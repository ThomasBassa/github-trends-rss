<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>GitHub Trending: Erlang, This week</title><link>https://github.com/trending/erlang?since=weekly</link><description>The top repositories on GitHub for erlang, measured weekly</description><pubDate>Mon, 11 Nov 2019 01:07:25 GMT</pubDate><lastBuildDate>Mon, 11 Nov 2019 01:07:25 GMT</lastBuildDate><generator>PyRSS2Gen-1.1.0</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><ttl>720</ttl><item><title>ninenines/cowboy #1 in Erlang, This week</title><link>https://github.com/ninenines/cowboy</link><description>&lt;p&gt;&lt;i&gt;Small, fast, modern HTTP server for Erlang/OTP.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body asciidoc" data-path="README.asciidoc"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-cowboy" class="anchor" aria-hidden="true" href="#cowboy"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cowboy&lt;/h1&gt;
&lt;div id="user-content-preamble"&gt;
&lt;div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy is a small, fast and modern HTTP server for Erlang/OTP.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-goals"&gt;&lt;a id="user-content-goals" class="anchor" aria-hidden="true" href="#goals"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Goals&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy aims to provide a &lt;strong&gt;complete&lt;/strong&gt; HTTP stack in a &lt;strong&gt;small&lt;/strong&gt; code base.
It is optimized for &lt;strong&gt;low latency&lt;/strong&gt; and &lt;strong&gt;low memory usage&lt;/strong&gt;, in part
because it uses &lt;strong&gt;binary strings&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy provides &lt;strong&gt;routing&lt;/strong&gt; capabilities, selectively dispatching requests
to handlers written in Erlang.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Because it uses Ranch for managing connections, Cowboy can easily be
&lt;strong&gt;embedded&lt;/strong&gt; in any other application.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy is &lt;strong&gt;clean&lt;/strong&gt; and &lt;strong&gt;well tested&lt;/strong&gt; Erlang code.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-online-documentation"&gt;&lt;a id="user-content-online-documentation" class="anchor" aria-hidden="true" href="#online-documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Online documentation&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/docs/en/cowboy/2.6/guide" rel="nofollow"&gt;User guide&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/docs/en/cowboy/2.6/manual" rel="nofollow"&gt;Function reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-offline-documentation"&gt;&lt;a id="user-content-offline-documentation" class="anchor" aria-hidden="true" href="#offline-documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Offline documentation&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;While still online, run &lt;code&gt;make docs&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;User guide available in &lt;code&gt;doc/&lt;/code&gt; in PDF and HTML formats&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Function reference man pages available in &lt;code&gt;doc/man3/&lt;/code&gt; and &lt;code&gt;doc/man7/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Run &lt;code&gt;make install-docs&lt;/code&gt; to install man pages on your system&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Full documentation in Asciidoc available in &lt;code&gt;doc/src/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Examples available in &lt;code&gt;examples/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-getting-help"&gt;&lt;a id="user-content-getting-help" class="anchor" aria-hidden="true" href="#getting-help"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting help&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Official IRC Channel: #ninenines on irc.freenode.net&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/ninenines/cowboy/issues"&gt;Issues tracker&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/services" rel="nofollow"&gt;Commercial Support&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/article&gt;&lt;/div&gt;</description><author>ninenines</author><guid isPermaLink="false">https://github.com/ninenines/cowboy</guid><pubDate>Mon, 11 Nov 2019 00:01:00 GMT</pubDate></item><item><title>rabbitmq/rabbitmq-server #2 in Erlang, This week</title><link>https://github.com/rabbitmq/rabbitmq-server</link><description>&lt;p&gt;&lt;i&gt;Open source multi-protocol messaging broker&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-rabbitmq-server" class="anchor" aria-hidden="true" href="#rabbitmq-server"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;RabbitMQ Server&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://rabbitmq.com" rel="nofollow"&gt;RabbitMQ&lt;/a&gt; is a &lt;a href="https://rabbitmq.com/documentation.html" rel="nofollow"&gt;feature rich&lt;/a&gt;, multi-protocol messaging broker. It supports:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AMQP 0-9-1&lt;/li&gt;
&lt;li&gt;AMQP 1.0&lt;/li&gt;
&lt;li&gt;STOMP 1.0 through 1.2&lt;/li&gt;
&lt;li&gt;MQTT 3.1.1&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/download.html" rel="nofollow"&gt;Installation guides&lt;/a&gt; for various platforms&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-tutorials--documentation" class="anchor" aria-hidden="true" href="#tutorials--documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tutorials &amp;amp; Documentation&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/getstarted.html" rel="nofollow"&gt;RabbitMQ tutorials&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/documentation.html" rel="nofollow"&gt;All documentation guides&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/rabbitmq/rabbitmq-website/"&gt;Documentation source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/devtools.html" rel="nofollow"&gt;Client libraries and tools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/monitoring.html" rel="nofollow"&gt;Monitoring guide&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/production-checklist.html" rel="nofollow"&gt;Production checklist&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/rabbitmq/rabbitmq-tutorials/"&gt;Runnable tutorials&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-getting-help" class="anchor" aria-hidden="true" href="#getting-help"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting Help&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://groups.google.com/forum/#!forum/rabbitmq-users" rel="nofollow"&gt;RabbitMQ mailing list&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/services.html" rel="nofollow"&gt;Commercial support&lt;/a&gt; from &lt;a href="https://pivotal.io" rel="nofollow"&gt;Pivotal&lt;/a&gt; for open source RabbitMQ&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq-slack.herokuapp.com/" rel="nofollow"&gt;Community Slack&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#rabbitmq&lt;/code&gt; on Freenode&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;See &lt;a href="./CONTRIBUTING.md"&gt;CONTRIBUTING.md&lt;/a&gt; and our &lt;a href="https://rabbitmq.com/github.html" rel="nofollow"&gt;development process overview&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Questions about contributing, internals and so on are very welcome on the &lt;a href="https://groups.google.com/forum/#!forum/rabbitmq-users" rel="nofollow"&gt;mailing list&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-licensing" class="anchor" aria-hidden="true" href="#licensing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Licensing&lt;/h2&gt;
&lt;p&gt;RabbitMQ server is &lt;a href="LICENSE-MPL-RabbitMQ"&gt;licensed under the MPL 1.1&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-building-from-source-and-packaging" class="anchor" aria-hidden="true" href="#building-from-source-and-packaging"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Building From Source and Packaging&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/build-server.html" rel="nofollow"&gt;Building RabbitMQ from Source&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://rabbitmq.com/build-server.html" rel="nofollow"&gt;Building RabbitMQ Distribution Packages&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-copyright" class="anchor" aria-hidden="true" href="#copyright"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Copyright&lt;/h2&gt;
&lt;p&gt;(c) Pivotal Software Inc., 2007-2019.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>rabbitmq</author><guid isPermaLink="false">https://github.com/rabbitmq/rabbitmq-server</guid><pubDate>Mon, 11 Nov 2019 00:02:00 GMT</pubDate></item><item><title>erlang/otp #3 in Erlang, This week</title><link>https://github.com/erlang/otp</link><description>&lt;p&gt;&lt;i&gt;Erlang/OTP&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-erlangotp" class="anchor" aria-hidden="true" href="#erlangotp"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="https://www.erlang.org" rel="nofollow"&gt;Erlang/OTP&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Erlang&lt;/strong&gt; is a programming language and runtime system for building massively scalable soft real-time systems with requirements on high availability.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OTP&lt;/strong&gt; is a set of Erlang libraries, which consists of the Erlang runtime system, a number of ready-to-use components mainly written in Erlang, and a set of design principles for Erlang programs. &lt;a href="http://erlang.org/doc/system_architecture_intro/sys_arch_intro.html" rel="nofollow"&gt;Learn more about Erlang and OTP&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://erlang.org/download/otp_versions_tree.html" rel="nofollow"&gt;Release notes&lt;/a&gt; for all OTP versions.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://learnyousomeerlang.com/content" rel="nofollow"&gt;Learn how to program in Erlang&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;p&gt;There are several examples &lt;a href="http://erlang.org/faq/getting_started.html" rel="nofollow"&gt;on the website&lt;/a&gt; to help you get started. The below example defines a function &lt;code&gt;world/0&lt;/code&gt; that prints "Hello, world" in the Erlang shell:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;module&lt;/span&gt;(&lt;span class="pl-en"&gt;hello&lt;/span&gt;).
-&lt;span class="pl-k"&gt;export&lt;/span&gt;([&lt;span class="pl-en"&gt;world&lt;/span&gt;/&lt;span class="pl-c1"&gt;0&lt;/span&gt;]).

&lt;span class="pl-en"&gt;world&lt;/span&gt;() &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;io&lt;/span&gt;:&lt;span class="pl-en"&gt;format&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Hello, world&lt;span class="pl-cce"&gt;\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Save the file as &lt;code&gt;hello.erl&lt;/code&gt; and run &lt;code&gt;erl&lt;/code&gt; to enter the Erlang shell to compile the module.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;Erlang/OTP 19 [erts-8.2] [source] [64-bit] [smp:4:4] [async-threads:10] [hipe] [kernel-poll:false] [dtrace]

Eshell V8.2  (abort with ^G)
1&amp;gt; c(hello).
{ok,hello}
2&amp;gt; hello:world().
Hello, world
ok
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Learn more about the Erlang syntax of &lt;a href="http://erlang.org/doc/reference_manual/modules.html" rel="nofollow"&gt;modules&lt;/a&gt;, &lt;a href="http://erlang.org/doc/reference_manual/functions.html" rel="nofollow"&gt;functions&lt;/a&gt; and &lt;a href="http://erlang.org/doc/reference_manual/expressions.html" rel="nofollow"&gt;expressions&lt;/a&gt; on &lt;a href="https://www.erlang.org" rel="nofollow"&gt;Erlang.org&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-binary-distributions" class="anchor" aria-hidden="true" href="#binary-distributions"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Binary Distributions&lt;/h3&gt;
&lt;p&gt;Erlang/OTP is available as pre-built binary packages by most OS package managers.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;apt-get install erlang
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-compiling-from-source" class="anchor" aria-hidden="true" href="#compiling-from-source"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compiling from source&lt;/h3&gt;
&lt;p&gt;To compile Erlang from source, run the following commands. The complete building and installation instructions &lt;a href="HOWTO/INSTALL.md"&gt;can be found here&lt;/a&gt;.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/erlang/otp.git
cd otp
./otp_build autoconf
./configure
make
make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Alternatively, you can use &lt;a href="https://github.com/kerl/kerl"&gt;Kerl&lt;/a&gt;, a script that lets you easily build Erlang with a few commands.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-bug-reports" class="anchor" aria-hidden="true" href="#bug-reports"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Bug Reports&lt;/h2&gt;
&lt;p&gt;Please visit &lt;a href="https://bugs.erlang.org/issues/?jql=project%20%3D%20ERL" rel="nofollow"&gt;bugs.erlang.org&lt;/a&gt; for reporting bugs. The instructions for submitting bugs reports &lt;a href="https://github.com/erlang/otp/wiki/Bug-reports"&gt;can be found here&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-security-disclosure" class="anchor" aria-hidden="true" href="#security-disclosure"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Security Disclosure&lt;/h3&gt;
&lt;p&gt;We take security bugs in Erlang/OTP seriously. Please disclose the issues regarding security by sending an email to &lt;strong&gt;erlang-security [at] erlang [dot] org&lt;/strong&gt; and not by creating a public issue.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;We are grateful to the community for contributing bug fixes and improvements. Read below to learn how you can take part in improving Erlang/OTP. We appreciate your help!&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-contribution-guide" class="anchor" aria-hidden="true" href="#contribution-guide"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contribution Guide&lt;/h3&gt;
&lt;p&gt;Read our &lt;a href="CONTRIBUTING.md"&gt;contribution guide&lt;/a&gt; to learn about our development process, how to propose fixes and improvements, and how to test your changes to Erlang/OTP before submitting a pull request.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-help-wanted" class="anchor" aria-hidden="true" href="#help-wanted"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Help Wanted&lt;/h3&gt;
&lt;p&gt;We have a list of &lt;a href="https://bugs.erlang.org/issues/?jql=status%20%3D%20%22Help%20Wanted%22" rel="nofollow"&gt;Help Wanted&lt;/a&gt; bugs that we would appreciate external help from the community. This is a great place to get involved.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;Erlang/OTP is released under the &lt;a href="http://www.apache.org/licenses/LICENSE-2.0" rel="nofollow"&gt;Apache License 2.0&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;%CopyrightBegin%&lt;/p&gt;
&lt;p&gt;Copyright Ericsson AB 2010-2017. All Rights Reserved.&lt;/p&gt;
&lt;p&gt;Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;http://www.apache.org/licenses/LICENSE-2.0
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.&lt;/p&gt;
&lt;p&gt;%CopyrightEnd%&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;&lt;a id="user-content-awesome-erlang" class="anchor" aria-hidden="true" href="#awesome-erlang"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Awesome-Erlang&lt;/h2&gt;
&lt;p&gt;You can find more projects, tools and articles related to Erlang/OTP on the &lt;a href="https://github.com/drobakowski/awesome-erlang"&gt;awesome-erlang list&lt;/a&gt;. Add your project there.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>erlang</author><guid isPermaLink="false">https://github.com/erlang/otp</guid><pubDate>Mon, 11 Nov 2019 00:03:00 GMT</pubDate></item><item><title>rbkmoney/woody_erlang #4 in Erlang, This week</title><link>https://github.com/rbkmoney/woody_erlang</link><description>&lt;p&gt;&lt;i&gt;Erlang версия RPC библиотеки для общения между микросервисами.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-woody-" class="anchor" aria-hidden="true" href="#woody-"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Woody &lt;a href="http://ci.rbkmoney.com/job/rbkmoney_private/view/Erlang/job/woody_erlang/job/master/" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/fa6fa8870c727b480244468171a5480109c58c54/687474703a2f2f63692e72626b6d6f6e65792e636f6d2f6275696c645374617475732f69636f6e3f6a6f623d72626b6d6f6e65795f707269766174652f776f6f64795f65726c616e672f6d6173746572" alt="Build Status" data-canonical-src="http://ci.rbkmoney.com/buildStatus/icon?job=rbkmoney_private/woody_erlang/master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Erlang реализация &lt;a href="http://coredocs.rbkmoney.com/design/ms/platform/rpc-lib/" rel="nofollow"&gt;Библиотеки RPC вызовов для общения между микросервисами&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;версия требований: &lt;strong&gt;ac4d40cc22d649d03369fcd52fb1230e51cdf52e&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-api" class="anchor" aria-hidden="true" href="#api"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;API&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-сервер" class="anchor" aria-hidden="true" href="#сервер"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Сервер&lt;/h3&gt;
&lt;p&gt;Получить &lt;em&gt;child_spec&lt;/em&gt; RPC сервера:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;EventHandler&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;my_event_handler&lt;/span&gt;.  &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% | {my_event_handler, MyEventHandlerOpts :: term()}. woody_event_handler behaviour&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;my_money_thrift&lt;/span&gt;, &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% имя модуля, сгенерированного из money.thrift файла&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;money&lt;/span&gt; &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% имя thrift сервиса, заданное в money.thift&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; }.
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;ThriftHandler&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;my_money_thrift_service_handler&lt;/span&gt;.  &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% | {my_money_thrift_service_handler, MyHandlerOpts :: term()}. woody_server_thrift_handler behaviour&lt;/span&gt;
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Handlers&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [{&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;/v1/thrift_money_service&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,{&lt;span class="pl-smi"&gt;Service&lt;/span&gt;, &lt;span class="pl-smi"&gt;ThriftHandler&lt;/span&gt;}}].
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;ServerSpec&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_server&lt;/span&gt;:&lt;span class="pl-en"&gt;child_spec&lt;/span&gt;(&lt;span class="pl-c1"&gt;money_service_sup&lt;/span&gt;, #{
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;handlers&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Handlers&lt;/span&gt;,
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;event_handler&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;EventHandler&lt;/span&gt;,
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;ip&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; {&lt;span class="pl-c1"&gt;127&lt;/span&gt;,&lt;span class="pl-c1"&gt;0&lt;/span&gt;,&lt;span class="pl-c1"&gt;0&lt;/span&gt;,&lt;span class="pl-c1"&gt;1&lt;/span&gt;},
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c1"&gt;port&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;8022&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% optional:&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% transport_opts =&amp;gt; woody_server_thrift_http_handler:transport_opts()&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% protocol_opts  =&amp;gt; cowboy_protocol:opts()&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% handler_limits =&amp;gt; woody_server_thrift_http_handler:handler_limits()&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;     &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% shutdown_timeout =&amp;gt; timeout()&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; }).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;С помощью опциональных полей можно:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;transport_opts&lt;/code&gt; - задать дополнительные опции для обработчика входящих соединений&lt;/li&gt;
&lt;li&gt;&lt;code&gt;protocol_opts&lt;/code&gt; - задать дополнительные опции для обработчика http протокола сервера cowboy&lt;/li&gt;
&lt;li&gt;&lt;code&gt;handler_limits&lt;/code&gt; - поставить лимиты на &lt;em&gt;heap size&lt;/em&gt; процесса хэндлера (&lt;em&gt;beam&lt;/em&gt; убьет хэндлер при превышении лимита - см. &lt;a href="http://erlang.org/doc/man/erlang.html#process_flag-2" rel="nofollow"&gt;erlang:process_flag(max_heap_size, MaxHeapSize)&lt;/a&gt;) и на максимальный размер памяти vm (см. &lt;a href="http://erlang.org/doc/man/erlang.html#memory-1" rel="nofollow"&gt;erlang:memory(total)&lt;/a&gt;), при достижении которого woody server начнет отбрасывать входящие rpc вызовы с системной ошибкой &lt;code&gt;internal resourse unavailable&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shutdown_timeout&lt;/code&gt; - задать время ожидания завершения всех текущих соединений при получении сервером сигнала &lt;code&gt;shutdown&lt;/code&gt;. При выборе значения данного параметра учитывайте опции &lt;code&gt;request_timeout&lt;/code&gt; и &lt;code&gt;max_keepalive&lt;/code&gt; в &lt;code&gt;protocol_opts&lt;/code&gt;. Безопасным будет являться значение &lt;code&gt;request_timeout&lt;/code&gt;, плюс теоретическое максимальное время обслуживания операции на сервере. При этом подразумевается, что отсутствие возможности обращения к удерживаемым в это время открытыми сокетам будет обеспечено внешними средствами. В том случае, если &lt;code&gt;max_keepalive =:= 1&lt;/code&gt;, значением &lt;code&gt;request_timeout&lt;/code&gt; в расчете и вышеупомянутыми средствами возможно пренебречь.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Теперь можно поднять RPC сервер в рамках supervision tree приложения. Например:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;_&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;supervisor&lt;/span&gt;:&lt;span class="pl-en"&gt;start_child&lt;/span&gt;(&lt;span class="pl-smi"&gt;MySup&lt;/span&gt;, &lt;span class="pl-smi"&gt;ServerSpec&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-клиент" class="anchor" aria-hidden="true" href="#клиент"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Клиент&lt;/h3&gt;
&lt;p&gt;Сделать синхронный RPC вызов:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Url&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;localhost:8022/v1/thrift_money_service&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;.
&lt;span class="pl-c1"&gt;8&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Function&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;give_me_money&lt;/span&gt;.  &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% thrift метод&lt;/span&gt;
&lt;span class="pl-c1"&gt;9&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Args&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-c1"&gt;100&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;rub&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;].
&lt;span class="pl-c1"&gt;10&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Request&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-smi"&gt;Service&lt;/span&gt;, &lt;span class="pl-smi"&gt;Function&lt;/span&gt;, &lt;span class="pl-smi"&gt;Args&lt;/span&gt;}.
&lt;span class="pl-c1"&gt;11&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;ClientEventHandler&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-c1"&gt;my_event_handler&lt;/span&gt;, &lt;span class="pl-smi"&gt;MyCustomOptions&lt;/span&gt;}.
&lt;span class="pl-c1"&gt;12&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;myUniqRequestID1&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&lt;span class="pl-c1"&gt;13&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Opts&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&lt;span class="pl-c1"&gt;url&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Url&lt;/span&gt;, &lt;span class="pl-c1"&gt;event_handler&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;ClientEventHandler&lt;/span&gt;}.
&lt;span class="pl-c1"&gt;14&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Result1&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_client&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-smi"&gt;Request&lt;/span&gt;, &lt;span class="pl-smi"&gt;Opts&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context1&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;В случае вызова &lt;em&gt;thrift&lt;/em&gt; &lt;code&gt;oneway&lt;/code&gt; функции (&lt;em&gt;thrift&lt;/em&gt; реализация &lt;em&gt;cast&lt;/em&gt;) &lt;code&gt;woody_client:call/3&lt;/code&gt; вернет &lt;code&gt;{ok, ok}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Если сервер бросает &lt;code&gt;Exception&lt;/code&gt;, описанный в &lt;em&gt;.thrift&lt;/em&gt; файле сервиса (т.е. &lt;em&gt;Бизнес ошибку&lt;/em&gt; в &lt;a href="http://coredocs.rbkmoney.com/design/ms/platform/overview/#_7" rel="nofollow"&gt;терминологии&lt;/a&gt; макросервис платформы), &lt;code&gt;woody_client:call/3&lt;/code&gt; вернет это исключение в виде: &lt;code&gt;{exception, Exception}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;В случае получения &lt;em&gt;Системной&lt;/em&gt; ошибки клиент выбрасывает &lt;em&gt;erlang:error&lt;/em&gt; типа &lt;code&gt;{woody_error, woody_error:system_error()}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;woody_context:new/0&lt;/code&gt; - можно использовать для создания контекста корневого запроса с автоматически сгенерированным уникальным RPC ID.&lt;/p&gt;
&lt;p&gt;Можно создать пул соединений для thrift клиента (например, для установления &lt;em&gt;keep alive&lt;/em&gt; соединений с сервером). Для этого надо использовать
&lt;code&gt;woody_client:child_spec/2&lt;/code&gt;. Для работы с определенным пулом в Options есть поле &lt;code&gt;transport_opts =&amp;gt; [{pool, pool_name}, {timeout, 150000}, {max_connections, 100}]&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;15&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Opts1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;Opts&lt;/span&gt;#{&lt;span class="pl-c1"&gt;transport_opts&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; [{&lt;span class="pl-c1"&gt;pool&lt;/span&gt;, &lt;span class="pl-c1"&gt;my_client_pool&lt;/span&gt;}]}.
&lt;span class="pl-c1"&gt;16&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;supervisor&lt;/span&gt;:&lt;span class="pl-en"&gt;start_child&lt;/span&gt;(&lt;span class="pl-smi"&gt;Sup&lt;/span&gt;, &lt;span class="pl-en"&gt;woody_client&lt;/span&gt;:&lt;span class="pl-en"&gt;child_spec&lt;/span&gt;(&lt;span class="pl-smi"&gt;Opts1&lt;/span&gt;)).
&lt;span class="pl-c1"&gt;17&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context2&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;myUniqRequestID2&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&lt;span class="pl-c1"&gt;18&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Result2&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_client&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-smi"&gt;Request&lt;/span&gt;, &lt;span class="pl-smi"&gt;Opts1&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context2&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Context&lt;/code&gt; позволяет аннотировать RPC запросы дополнительными мета данными в виде &lt;em&gt;key-value&lt;/em&gt;. &lt;code&gt;Context&lt;/code&gt; передается только в запросах и изменение мета данных возможно только в режиме &lt;em&gt;append-only&lt;/em&gt; (т.е. на попытку переопределить уже существующую запись в &lt;code&gt;context meta&lt;/code&gt;, библиотека вернет ошибку). Поскольку на транспортном уровне контекст передается в виде custom HTTP заголовков, синтаксис метаданных &lt;em&gt;key-value&lt;/em&gt; должен следовать ограничениям &lt;a href="https://tools.ietf.org/html/rfc7230#section-3.2.6" rel="nofollow"&gt;RFC7230 &lt;/a&gt;. Размер ключа записи метаданных не должен превышать &lt;em&gt;53 байта&lt;/em&gt; (см. остальные требования к метаданным в &lt;a href="http://coredocs.rbkmoney.com/design/ms/platform/rpc-lib/#rpc_2" rel="nofollow"&gt;описании библиотеки&lt;/a&gt;).&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;19&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Meta1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;client1-name&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Vasya&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}.
&lt;span class="pl-c1"&gt;20&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context3&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;myUniqRequestID3&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class="pl-smi"&gt;Meta1&lt;/span&gt;).
&lt;span class="pl-c1"&gt;21&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Meta1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_meta&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context3&lt;/span&gt;).
&lt;span class="pl-c1"&gt;22&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Meta2&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;client2-name&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Masha&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}.
&lt;span class="pl-c1"&gt;23&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context4&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;add_meta&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context4&lt;/span&gt;, &lt;span class="pl-smi"&gt;Meta2&lt;/span&gt;).
&lt;span class="pl-c1"&gt;24&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Masha&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_meta&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;client2-name&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class="pl-smi"&gt;Context4&lt;/span&gt;).
&lt;span class="pl-c1"&gt;25&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;FullMeta&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;maps&lt;/span&gt;:&lt;span class="pl-en"&gt;merge&lt;/span&gt;(&lt;span class="pl-smi"&gt;Meta1&lt;/span&gt;, &lt;span class="pl-smi"&gt;Meta2&lt;/span&gt;).
&lt;span class="pl-c1"&gt;26&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;FullMeta&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_meta&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context4&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Context&lt;/code&gt; также позволяет задать &lt;a href="http://coredocs.rbkmoney.com/design/ms/platform/rpc-lib/#deadline" rel="nofollow"&gt;deadline&lt;/a&gt; на исполнение запроса. Значение &lt;em&gt;deadline&lt;/em&gt; вложенных запросов можно менять произвольным образом. Также таймауты на запрос, &lt;a href="src/woody_client_thrift_http_transport.erl"&gt;вычисляемые по deadline&lt;/a&gt;, можно явно переопределить из приложения через &lt;em&gt;transport_opts&lt;/em&gt; в &lt;code&gt;woody_client:options()&lt;/code&gt;. Модуль &lt;a href="src/woody_deadline.erl"&gt;woody_deadline&lt;/a&gt; содержит API для работы с deadline.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;27&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Deadline&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {{{&lt;span class="pl-c1"&gt;2017&lt;/span&gt;, &lt;span class="pl-c1"&gt;12&lt;/span&gt;, &lt;span class="pl-c1"&gt;31&lt;/span&gt;}, {&lt;span class="pl-c1"&gt;23&lt;/span&gt;, &lt;span class="pl-c1"&gt;59&lt;/span&gt;, &lt;span class="pl-c1"&gt;59&lt;/span&gt;}}, &lt;span class="pl-c1"&gt;350&lt;/span&gt;}.
&lt;span class="pl-c1"&gt;28&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context5&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;set_deadline&lt;/span&gt;(&lt;span class="pl-smi"&gt;Deadline&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context4&lt;/span&gt;).
&lt;span class="pl-c1"&gt;29&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Context6&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;myUniqRequestID6&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class="pl-c1"&gt;undefined&lt;/span&gt;, &lt;span class="pl-smi"&gt;Deadline&lt;/span&gt;).
&lt;span class="pl-c1"&gt;30&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Deadline&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_deadline&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context5&lt;/span&gt;).
&lt;span class="pl-c1"&gt;31&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Deadline&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_deadline&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context6&lt;/span&gt;).
&lt;span class="pl-c1"&gt;32&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;true&lt;/span&gt;     &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_deadline&lt;/span&gt;:&lt;span class="pl-en"&gt;is_reached&lt;/span&gt;(&lt;span class="pl-smi"&gt;Deadline&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-кеширующий-клиент" class="anchor" aria-hidden="true" href="#кеширующий-клиент"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Кеширующий клиент&lt;/h4&gt;
&lt;p&gt;Для кеширования на стороне клиента можно иcпользовать обертку &lt;code&gt;woody_caching_client&lt;/code&gt;. Она содержит в себе обычный &lt;code&gt;woody_client&lt;/code&gt;, но кеширует результаты вызовов.&lt;/p&gt;
&lt;p&gt;Дополнительно, &lt;code&gt;woody_caching_client&lt;/code&gt; способен объединять одинаковые выполняющиеся параллельно запросы. Для включения этой функции необходимо указать в опциях &lt;code&gt;joint_control =&amp;gt; joint&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Перед использованием необходимо запустить служебные процессы, см &lt;code&gt;woody_caching_client:child_spec/2&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-woody-server-thrift-handler" class="anchor" aria-hidden="true" href="#woody-server-thrift-handler"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Woody Server Thrift Handler&lt;/h3&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;module&lt;/span&gt;(&lt;span class="pl-en"&gt;my_money_thrift_service_handler&lt;/span&gt;).
-&lt;span class="pl-k"&gt;behaviour&lt;/span&gt;(&lt;span class="pl-en"&gt;woody_server_thrift_handler&lt;/span&gt;).

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Auto-generated Thrift types from money.thrift&lt;/span&gt;
-&lt;span class="pl-k"&gt;include&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;my_money_thrift.hrl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).

-&lt;span class="pl-k"&gt;export&lt;/span&gt;([&lt;span class="pl-en"&gt;handle_function&lt;/span&gt;/&lt;span class="pl-c1"&gt;4&lt;/span&gt;]).

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;handle_function&lt;/span&gt;(&lt;span class="pl-en"&gt;woody&lt;/span&gt;:&lt;span class="pl-en"&gt;func&lt;/span&gt;(), &lt;span class="pl-en"&gt;woody&lt;/span&gt;:&lt;span class="pl-en"&gt;args&lt;/span&gt;(), &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;ctx&lt;/span&gt;(), &lt;span class="pl-en"&gt;woody&lt;/span&gt;:&lt;span class="pl-en"&gt;options&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-en"&gt;woody&lt;/span&gt;:&lt;span class="pl-en"&gt;result&lt;/span&gt;()} | &lt;span class="pl-en"&gt;no_return&lt;/span&gt;().
&lt;span class="pl-en"&gt;handle_function&lt;/span&gt;(&lt;span class="pl-c1"&gt;give_me_money&lt;/span&gt;, &lt;span class="pl-smi"&gt;Sum&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-smi"&gt;Amount&lt;/span&gt;, &lt;span class="pl-smi"&gt;Currency&lt;/span&gt;], &lt;span class="pl-smi"&gt;Context&lt;/span&gt;, &lt;span class="pl-smi"&gt;_MyOpts&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;

    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% RpcId можно получить из Context, полученного handle_function,&lt;/span&gt;
    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% для использования при логировании.&lt;/span&gt;
    &lt;span class="pl-smi"&gt;RpcId&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;get_rpc_id&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context&lt;/span&gt;),

    &lt;span class="pl-k"&gt;case&lt;/span&gt; &lt;span class="pl-en"&gt;check_loan_limits&lt;/span&gt;(&lt;span class="pl-smi"&gt;Sum&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context&lt;/span&gt;, &lt;span class="pl-c1"&gt;5&lt;/span&gt;) &lt;span class="pl-k"&gt;of&lt;/span&gt;
        {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;ok&lt;/span&gt;} -&amp;gt;

            &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Логи рекомендуется тэгировать RpcId.&lt;/span&gt;
            &lt;span class="pl-en"&gt;lager&lt;/span&gt;:&lt;span class="pl-en"&gt;info&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[&lt;span class="pl-c1"&gt;~p&lt;/span&gt;] giving away &lt;span class="pl-c1"&gt;~p&lt;/span&gt; &lt;span class="pl-c1"&gt;~p&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, [&lt;span class="pl-smi"&gt;RpcId&lt;/span&gt;, &lt;span class="pl-smi"&gt;Amount&lt;/span&gt;, &lt;span class="pl-smi"&gt;Currency&lt;/span&gt;]),
            &lt;span class="pl-smi"&gt;RequestMoney&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-c1"&gt;my_wallet_service&lt;/span&gt;, &lt;span class="pl-c1"&gt;get_money&lt;/span&gt;, &lt;span class="pl-smi"&gt;Sum&lt;/span&gt;},

            &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Используется значение Context, полученное из родительского вызова&lt;/span&gt;
            &lt;span class="pl-smi"&gt;Opts&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&lt;span class="pl-c1"&gt;url&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;wallet&lt;/span&gt;, &lt;span class="pl-c1"&gt;event_handler&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;woody_event_handler_default&lt;/span&gt;},
            &lt;span class="pl-smi"&gt;Meta&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;approved&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;true&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;},
            &lt;span class="pl-en"&gt;woody_client&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-smi"&gt;RequestMoney&lt;/span&gt;, &lt;span class="pl-smi"&gt;Opts&lt;/span&gt;, &lt;span class="pl-en"&gt;woody_context&lt;/span&gt;:&lt;span class="pl-en"&gt;add_meta&lt;/span&gt;(&lt;span class="pl-smi"&gt;Context&lt;/span&gt;, &lt;span class="pl-smi"&gt;Meta&lt;/span&gt;));
        {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;not_approved&lt;/span&gt;} -&amp;gt;
            &lt;span class="pl-en"&gt;lager&lt;/span&gt;:&lt;span class="pl-en"&gt;info&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[&lt;span class="pl-c1"&gt;~p&lt;/span&gt;] &lt;span class="pl-c1"&gt;~p&lt;/span&gt; &lt;span class="pl-c1"&gt;~p&lt;/span&gt; is too much&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, [&lt;span class="pl-smi"&gt;RpcId&lt;/span&gt;, &lt;span class="pl-smi"&gt;Amount&lt;/span&gt;, &lt;span class="pl-smi"&gt;Currency&lt;/span&gt;]),

            &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Thrift исключения выбрасываются через woody_error:raise/2 с тэгом business.&lt;/span&gt;
            &lt;span class="pl-en"&gt;woody_error&lt;/span&gt;:&lt;span class="pl-en"&gt;raise&lt;/span&gt;(&lt;span class="pl-c1"&gt;business&lt;/span&gt;, &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;take_it_easy&lt;/span&gt;{})
    &lt;span class="pl-k"&gt;end&lt;/span&gt;.

&lt;span class="pl-en"&gt;check_loan_limits&lt;/span&gt;(&lt;span class="pl-smi"&gt;_Limits&lt;/span&gt;, &lt;span class="pl-smi"&gt;_Context&lt;/span&gt;, &lt;span class="pl-c1"&gt;0&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;

    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Системные ошибки выбрасываются с помощью woody_error:raise/2 с тэгом system.&lt;/span&gt;
    &lt;span class="pl-en"&gt;woody_error&lt;/span&gt;:&lt;span class="pl-en"&gt;raise&lt;/span&gt;(&lt;span class="pl-c1"&gt;system&lt;/span&gt;, {&lt;span class="pl-c1"&gt;external&lt;/span&gt;, &lt;span class="pl-c1"&gt;result_unknown&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;limit checking service&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;});
&lt;span class="pl-en"&gt;check_loan_limits&lt;/span&gt;(&lt;span class="pl-smi"&gt;Limits&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context&lt;/span&gt;, &lt;span class="pl-smi"&gt;N&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-smi"&gt;Wallet&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;localhost:8022/v1/thrift_wallet_service&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
    &lt;span class="pl-smi"&gt;RequestLimits&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-c1"&gt;my_wallet_service&lt;/span&gt;, &lt;span class="pl-c1"&gt;check_limits&lt;/span&gt;, &lt;span class="pl-smi"&gt;Limits&lt;/span&gt;},

    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Используется Context, полученный handle_function.&lt;/span&gt;
    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% woody_context:new() вызывать не надо.&lt;/span&gt;
    &lt;span class="pl-smi"&gt;Opts&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&lt;span class="pl-c1"&gt;url&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Wallet&lt;/span&gt;, &lt;span class="pl-c1"&gt;event_handler&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;woody_event_handler_default&lt;/span&gt;},
    &lt;span class="pl-k"&gt;try&lt;/span&gt; &lt;span class="pl-en"&gt;woody_client&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-smi"&gt;RequestLimits&lt;/span&gt;, &lt;span class="pl-smi"&gt;Opts&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context&lt;/span&gt;) &lt;span class="pl-k"&gt;of&lt;/span&gt;
        {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;ok&lt;/span&gt;} -&amp;gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;approved&lt;/span&gt;};
        {&lt;span class="pl-c1"&gt;exception&lt;/span&gt;, &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;over_limits&lt;/span&gt;{}} -&amp;gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-c1"&gt;not_approved&lt;/span&gt;}
    &lt;span class="pl-k"&gt;catch&lt;/span&gt;
        &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Transient error&lt;/span&gt;
        &lt;span class="pl-c1"&gt;error&lt;/span&gt;:{&lt;span class="pl-c1"&gt;woody_error&lt;/span&gt;, {&lt;span class="pl-c1"&gt;external&lt;/span&gt;, &lt;span class="pl-c1"&gt;result_unknown&lt;/span&gt;, &lt;span class="pl-smi"&gt;Details&lt;/span&gt;}} -&amp;gt;
            &lt;span class="pl-en"&gt;lager&lt;/span&gt;:&lt;span class="pl-en"&gt;info&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Received transient error &lt;span class="pl-c1"&gt;~p&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, [&lt;span class="pl-smi"&gt;Details&lt;/span&gt;]),
            &lt;span class="pl-en"&gt;check_loan_limits&lt;/span&gt;(&lt;span class="pl-smi"&gt;Limits&lt;/span&gt;, &lt;span class="pl-smi"&gt;Context&lt;/span&gt;, &lt;span class="pl-smi"&gt;N&lt;/span&gt; &lt;span class="pl-k"&gt;-&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;)
    &lt;span class="pl-k"&gt;end&lt;/span&gt;.&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-woody-event-handler" class="anchor" aria-hidden="true" href="#woody-event-handler"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Woody Event Handler&lt;/h3&gt;
&lt;p&gt;Интерфейс для получения и логирования событий RPC библиотеки. Также содержит вспомогательные функции для удобного форматирования событий. Пример реализации &lt;em&gt;event handler&lt;/em&gt;'а - &lt;a href="src/woody_event_handler_default.erl"&gt;woody_event_handler_default.erl&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-tracing" class="anchor" aria-hidden="true" href="#tracing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tracing&lt;/h3&gt;
&lt;p&gt;Можно динамически включать и выключать трассировку http запросов и ответов.&lt;/p&gt;
&lt;p&gt;На сервере:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;application&lt;/span&gt;:&lt;span class="pl-en"&gt;set_env&lt;/span&gt;(&lt;span class="pl-c1"&gt;woody&lt;/span&gt;, &lt;span class="pl-c1"&gt;trace_http_server&lt;/span&gt;, &lt;span class="pl-c1"&gt;true&lt;/span&gt;).
&lt;span class="pl-en"&gt;application&lt;/span&gt;:&lt;span class="pl-en"&gt;unset_env&lt;/span&gt;(&lt;span class="pl-c1"&gt;woody&lt;/span&gt;, &lt;span class="pl-c1"&gt;trace_http_server&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>rbkmoney</author><guid isPermaLink="false">https://github.com/rbkmoney/woody_erlang</guid><pubDate>Mon, 11 Nov 2019 00:04:00 GMT</pubDate></item></channel></rss>
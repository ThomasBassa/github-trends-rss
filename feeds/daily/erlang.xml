<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>GitHub Trending: Erlang, Today</title><link>https://github.com/trending/erlang?since=daily</link><description>The top repositories on GitHub for erlang, measured daily</description><pubDate>Sun, 17 Nov 2019 01:07:48 GMT</pubDate><lastBuildDate>Sun, 17 Nov 2019 01:07:48 GMT</lastBuildDate><generator>PyRSS2Gen-1.1.0</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><ttl>720</ttl><item><title>sublimehq/Packages #1 in Erlang, Today</title><link>https://github.com/sublimehq/Packages</link><description>&lt;p&gt;&lt;i&gt;[No description found.]&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-sublime-packages" class="anchor" aria-hidden="true" href="#sublime-packages"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Sublime Packages&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;These packages are developed against the latest &lt;a href="http://sublimetext.com/3dev" rel="nofollow"&gt;Sublime Text 3 Dev Build&lt;/a&gt;. Bugs may exist on older builds, and the format used is not compatible with builds older than 3092.&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;&lt;a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;p&gt;If you want to make changes to these packages and test them locally, fork this repository and then symlink the changed packages into your &lt;em&gt;Packages&lt;/em&gt; folder.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Replace &lt;code&gt;Python&lt;/code&gt; in the following commands with the name of the syntax to install.&lt;/em&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-os-x" class="anchor" aria-hidden="true" href="#os-x"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OS X&lt;/h3&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ git clone https://github.com/sublimehq/Packages.git
$ ln -s &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;`&lt;/span&gt;pwd&lt;span class="pl-pds"&gt;`&lt;/span&gt;&lt;/span&gt;/Packages/Python &lt;span class="pl-k"&gt;~&lt;/span&gt;/Library/Application&lt;span class="pl-cce"&gt;\ &lt;/span&gt;Support/Sublime&lt;span class="pl-cce"&gt;\ &lt;/span&gt;Text&lt;span class="pl-cce"&gt;\ &lt;/span&gt;3/Packages/&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-linux" class="anchor" aria-hidden="true" href="#linux"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Linux&lt;/h3&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ git clone https://github.com/sublimehq/Packages.git
$ ln -s &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;`&lt;/span&gt;pwd&lt;span class="pl-pds"&gt;`&lt;/span&gt;&lt;/span&gt;/Packages/Python &lt;span class="pl-k"&gt;~&lt;/span&gt;/.config/sublime-text-3/Packages/&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-windows" class="anchor" aria-hidden="true" href="#windows"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Windows&lt;/h3&gt;
&lt;p&gt;On Windows, you can use directory junctions instead of symlinks (symlinks require administrative rights; directory junctions don't):&lt;/p&gt;
&lt;div class="highlight highlight-source-powershell"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Using PowerShell&lt;span class="pl-c"&gt;&lt;/span&gt;&lt;/span&gt;
PS&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; git clone https:&lt;span class="pl-k"&gt;//&lt;/span&gt;&lt;span class="pl-c1"&gt;github.com&lt;/span&gt;&lt;span class="pl-k"&gt;/&lt;/span&gt;sublimehq&lt;span class="pl-k"&gt;/&lt;/span&gt;Packages.git
PS&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; cmd &lt;span class="pl-k"&gt;/&lt;/span&gt;c mklink &lt;span class="pl-k"&gt;/&lt;/span&gt;J &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-smi"&gt;$&lt;span class="pl-c1"&gt;env:&lt;/span&gt;APPDATA&lt;/span&gt;/Sublime Text 3/Packages/Python&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; (&lt;span class="pl-c1"&gt;convert-path&lt;/span&gt; .&lt;span class="pl-k"&gt;/&lt;/span&gt;Packages&lt;span class="pl-k"&gt;/&lt;/span&gt;Python)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alternatively, download the portable version, and clone this repository directly as a subdirectory of the &lt;em&gt;Data&lt;/em&gt; folder.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;After you've finished, keep in mind that you're now overriding a default package. When Sublime Text updates to a new version, you'll run the risk of having an out-of-date package unless you pull the latest changes from this repository.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-pull-requests" class="anchor" aria-hidden="true" href="#pull-requests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Pull Requests&lt;/h2&gt;
&lt;p&gt;Pull requests should:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Start with the name of the package in square brackets, e.g. &lt;code&gt;[XML]&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Be as small and self-contained as is reasonable. &lt;em&gt;Smaller changes are quicker to review.&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;Include a new, or enhanced, &lt;a href="http://www.sublimetext.com/docs/3/syntax.html" rel="nofollow"&gt;syntax test&lt;/a&gt; when changing a &lt;code&gt;.sublime-syntax&lt;/code&gt; file.&lt;/li&gt;
&lt;li&gt;Have multiple syntax tests and a set of performance measurements (old vs. new) when making significant changes.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;&lt;a id="user-content-new-packages" class="anchor" aria-hidden="true" href="#new-packages"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;New Packages&lt;/h3&gt;
&lt;p&gt;Pull requests for new packages won't be accepted at this stage, as new packages can cause issues for users who have a package with the same name installed via Package Control. There are some planned changes that will address this in the future.&lt;/p&gt;
&lt;p&gt;Complex plugins such as auto complete systems and linters should generally be in a stand-alone package, rather than included in the default set of packages.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-missing-packages" class="anchor" aria-hidden="true" href="#missing-packages"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Missing Packages&lt;/h2&gt;
&lt;p&gt;This repository only contains syntax-definition-focused packages. Notably, packages such as &lt;em&gt;Default&lt;/em&gt; and &lt;em&gt;Theme - Default&lt;/em&gt; are not included.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>sublimehq</author><guid isPermaLink="false">https://github.com/sublimehq/Packages</guid><pubDate>Sun, 17 Nov 2019 00:01:00 GMT</pubDate></item><item><title>lpgauth/swirl #2 in Erlang, Today</title><link>https://github.com/lpgauth/swirl</link><description>&lt;p&gt;&lt;i&gt;High-Performance Erlang Stream Processor&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-swirl" class="anchor" aria-hidden="true" href="#swirl"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;swirl&lt;/h1&gt;
&lt;p&gt;High Performance Erlang Stream Processor&lt;/p&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/lpgauth/swirl" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/3793238b7f948677138df681fcf0a54fba3deac5/68747470733a2f2f7472617669732d63692e6f72672f6c7067617574682f737769726c2e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/lpgauth/swirl.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Requirements&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Erlang 16.0 +&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-environment-variables" class="anchor" aria-hidden="true" href="#environment-variables"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Environment variables&lt;/h3&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Type&lt;/th&gt;
    &lt;th&gt;Default&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;mappers_max&lt;/td&gt;
    &lt;td&gt;pos_integer()&lt;/td&gt;
    &lt;td&gt;100&lt;/td&gt;
    &lt;td&gt;maximum number of mappers&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;reducers_max&lt;/td&gt;
    &lt;td&gt;pos_integer()&lt;/td&gt;
    &lt;td&gt;100&lt;/td&gt;
    &lt;td&gt;maximum number of reducers&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;h4&gt;&lt;a id="user-content-starting-a-flow" class="anchor" aria-hidden="true" href="#starting-a-flow"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Starting a flow&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;ok&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;application&lt;/span&gt;:&lt;span class="pl-en"&gt;start&lt;/span&gt;(&lt;span class="pl-c1"&gt;swirl&lt;/span&gt;),

&lt;span class="pl-smi"&gt;FlowMod&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;swirl_flow_example&lt;/span&gt;,
&lt;span class="pl-smi"&gt;FlowOpts&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
    {&lt;span class="pl-c1"&gt;stream_names&lt;/span&gt;, [&lt;span class="pl-c1"&gt;delivery&lt;/span&gt;]},
    {&lt;span class="pl-c1"&gt;stream_filter&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;exchange_id = 3 AND bidder_id IS NOT NULL&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;}
],
&lt;span class="pl-smi"&gt;MapperNodes&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-en"&gt;node&lt;/span&gt;()],
&lt;span class="pl-smi"&gt;ReducerNode&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;node&lt;/span&gt;(),
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Flow&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;swirl_flow&lt;/span&gt;:&lt;span class="pl-en"&gt;start&lt;/span&gt;(&lt;span class="pl-smi"&gt;FlowMod&lt;/span&gt;, &lt;span class="pl-smi"&gt;FlowOpts&lt;/span&gt;, &lt;span class="pl-smi"&gt;MapperNodes&lt;/span&gt;, &lt;span class="pl-smi"&gt;ReducerNode&lt;/span&gt;),

&lt;span class="pl-smi"&gt;StreamName&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;delivery&lt;/span&gt;,
&lt;span class="pl-smi"&gt;Event&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; #{&lt;span class="pl-c1"&gt;exchange_id&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-c1"&gt;bidder_id&lt;/span&gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;10&lt;/span&gt;},

&lt;span class="pl-en"&gt;swirl_stream&lt;/span&gt;:&lt;span class="pl-en"&gt;emit&lt;/span&gt;(&lt;span class="pl-smi"&gt;StreamName&lt;/span&gt;, &lt;span class="pl-smi"&gt;Event&lt;/span&gt;),

&lt;span class="pl-c1"&gt;ok&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;swirl_flow&lt;/span&gt;:&lt;span class="pl-en"&gt;stop&lt;/span&gt;(&lt;span class="pl-smi"&gt;Flow&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-implementing-a-flow" class="anchor" aria-hidden="true" href="#implementing-a-flow"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Implementing a flow&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;module&lt;/span&gt;(&lt;span class="pl-en"&gt;swirl_flow_example&lt;/span&gt;).
-&lt;span class="pl-k"&gt;include_lib&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;swirl/include/swirl.hrl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).

-&lt;span class="pl-k"&gt;behavior&lt;/span&gt;(&lt;span class="pl-c1"&gt;swirl_flow&lt;/span&gt;).
-&lt;span class="pl-k"&gt;export&lt;/span&gt;([
    &lt;span class="pl-en"&gt;map&lt;/span&gt;/&lt;span class="pl-c1"&gt;3&lt;/span&gt;,
    &lt;span class="pl-en"&gt;reduce&lt;/span&gt;/&lt;span class="pl-c1"&gt;3&lt;/span&gt;,
    &lt;span class="pl-en"&gt;output&lt;/span&gt;/&lt;span class="pl-c1"&gt;4&lt;/span&gt;
]).

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% swirl_flow callbacks&lt;/span&gt;
&lt;span class="pl-en"&gt;map&lt;/span&gt;(&lt;span class="pl-smi"&gt;StreamName&lt;/span&gt;, &lt;span class="pl-smi"&gt;Event&lt;/span&gt;, &lt;span class="pl-smi"&gt;_MapperOpts&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-smi"&gt;Type&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;L&lt;/span&gt;(&lt;span class="pl-c1"&gt;type&lt;/span&gt;, &lt;span class="pl-smi"&gt;Event&lt;/span&gt;),
    &lt;span class="pl-smi"&gt;ExchangeId&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;L&lt;/span&gt;(&lt;span class="pl-c1"&gt;exchange_id&lt;/span&gt;, &lt;span class="pl-smi"&gt;Event&lt;/span&gt;),
    &lt;span class="pl-smi"&gt;BidderId&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;L&lt;/span&gt;(&lt;span class="pl-c1"&gt;bidder_id&lt;/span&gt;, &lt;span class="pl-smi"&gt;Event&lt;/span&gt;),

    &lt;span class="pl-smi"&gt;Key&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-smi"&gt;Type&lt;/span&gt;, &lt;span class="pl-smi"&gt;StreamName&lt;/span&gt;, &lt;span class="pl-smi"&gt;ExchangeId&lt;/span&gt;, &lt;span class="pl-smi"&gt;BidderId&lt;/span&gt;},
    &lt;span class="pl-smi"&gt;CounterIncrements&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-c1"&gt;10&lt;/span&gt;},

    {&lt;span class="pl-smi"&gt;Key&lt;/span&gt;, &lt;span class="pl-smi"&gt;CounterIncrements&lt;/span&gt;}.

&lt;span class="pl-en"&gt;reduce&lt;/span&gt;(&lt;span class="pl-smi"&gt;_Flow&lt;/span&gt;, &lt;span class="pl-smi"&gt;Row&lt;/span&gt;, &lt;span class="pl-smi"&gt;_ReducerOpts&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-smi"&gt;Row&lt;/span&gt;.

&lt;span class="pl-en"&gt;output&lt;/span&gt;(&lt;span class="pl-smi"&gt;_Flow&lt;/span&gt;, &lt;span class="pl-smi"&gt;_Period&lt;/span&gt;, &lt;span class="pl-smi"&gt;Rows&lt;/span&gt;, &lt;span class="pl-smi"&gt;OutputOpts&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% do something with the output&lt;/span&gt;
    &lt;span class="pl-en"&gt;io&lt;/span&gt;:&lt;span class="pl-en"&gt;format&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;rows: &lt;span class="pl-c1"&gt;~p~n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, [&lt;span class="pl-smi"&gt;Rows&lt;/span&gt;]),&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-stream-filter" class="anchor" aria-hidden="true" href="#stream-filter"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Stream Filter&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;exchange_id&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;3&lt;/span&gt; &lt;span class="pl-smi"&gt;AND&lt;/span&gt; &lt;span class="pl-c1"&gt;bidder_id&lt;/span&gt; &lt;span class="pl-smi"&gt;IS&lt;/span&gt; &lt;span class="pl-smi"&gt;NOT&lt;/span&gt; &lt;span class="pl-smi"&gt;NULL&lt;/span&gt;
&lt;span class="pl-c1"&gt;flight_id&lt;/span&gt; &lt;span class="pl-en"&gt;in&lt;/span&gt; (&lt;span class="pl-c1"&gt;10&lt;/span&gt;, &lt;span class="pl-c1"&gt;12&lt;/span&gt;, &lt;span class="pl-c1"&gt;23&lt;/span&gt;) &lt;span class="pl-smi"&gt;OR&lt;/span&gt; &lt;span class="pl-c1"&gt;tag_id&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;20&lt;/span&gt;
&lt;span class="pl-c1"&gt;buyer_id&lt;/span&gt; &lt;span class="pl-c1"&gt;notnull&lt;/span&gt; &lt;span class="pl-smi"&gt;AND&lt;/span&gt; &lt;span class="pl-c1"&gt;seller_id&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;103&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-swirl-ql" class="anchor" aria-hidden="true" href="#swirl-ql"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Swirl QL&lt;/h4&gt;
&lt;p&gt;variables:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;atom()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;values:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;integer() | float() | binary()
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;boolean operators:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;'and' | 'or'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;comparison operators:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;'&amp;lt;' | '&amp;lt;=' | '=' | '&amp;gt;=' | '&amp;gt;' | '&amp;lt;&amp;gt;'
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;inclusion operators:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;in | notin
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;null operators:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;null | notnull
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id="user-content-todo" class="anchor" aria-hidden="true" href="#todo"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;TODO&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;node discovery&lt;/li&gt;
&lt;li&gt;boolean expression indexing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tests&lt;/h2&gt;
&lt;div class="highlight highlight-source-makefile"&gt;&lt;pre&gt;make dialyzer
make elvis
make eunit
make xref&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;pre lang="license"&gt;&lt;code&gt;The MIT License (MIT)

Copyright (c) 2013-2016 Louis-Philippe Gauthier

Permission is hereby granted, free of charge, to any person obtaining a copy of
this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
&lt;/code&gt;&lt;/pre&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>lpgauth</author><guid isPermaLink="false">https://github.com/lpgauth/swirl</guid><pubDate>Sun, 17 Nov 2019 00:02:00 GMT</pubDate></item><item><title>lpgauth/fast_disk_log #3 in Erlang, Today</title><link>https://github.com/lpgauth/fast_disk_log</link><description>&lt;p&gt;&lt;i&gt;Pool-based asynchronous Erlang disk logger&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-fast-disk-log" class="anchor" aria-hidden="true" href="#fast-disk-log"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;fast disk log&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;Author:&lt;/strong&gt; Louis-Philippe Gauthier.&lt;/p&gt;
&lt;p&gt;Pool-based asynchronous Erlang disk logger&lt;/p&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/lpgauth/fast_disk_log" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/4e4ec05c8e39ac91c90fdd79a66982ab139a2ffd/68747470733a2f2f7472617669732d63692e6f72672f6c7067617574682f666173745f6469736b5f6c6f672e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/lpgauth/fast_disk_log.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Requirements&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Erlang 16.0 +&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-environment-variables" class="anchor" aria-hidden="true" href="#environment-variables"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Environment variables&lt;/h3&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Type&lt;/th&gt;
    &lt;th&gt;Default&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;max_delay&lt;/td&gt;
    &lt;td&gt;pos_integer()&lt;/td&gt;
    &lt;td&gt;2000&lt;/td&gt;
    &lt;td&gt;maximum delay time before flush to writer&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;max_size&lt;/td&gt;
    &lt;td&gt;pos_integer()&lt;/td&gt;
    &lt;td&gt;8000000&lt;/td&gt;
    &lt;td&gt;maximum buffer size before flush to writer&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-api" class="anchor" aria-hidden="true" href="#api"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;API&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://github.com/lpgauth/fast_disk_log/blob/master/doc/fast_disk_log.md#index"&gt;Function Index&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log_app&lt;/span&gt;:&lt;span class="pl-en"&gt;start&lt;/span&gt;().
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;

&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log&lt;/span&gt;:&lt;span class="pl-en"&gt;open&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14.json&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, [{&lt;span class="pl-c1"&gt;pool_size&lt;/span&gt;, &lt;span class="pl-c1"&gt;8&lt;/span&gt;}]).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;

&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log&lt;/span&gt;:&lt;span class="pl-en"&gt;log&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;key&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;value&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}&lt;span class="pl-cce"&gt;\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;

&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log&lt;/span&gt;:&lt;span class="pl-en"&gt;sync&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;

&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log&lt;/span&gt;:&lt;span class="pl-en"&gt;close&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;

&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;fast_disk_log&lt;/span&gt;:&lt;span class="pl-en"&gt;log&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2015-05-13-14&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;key&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;value&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}&lt;span class="pl-cce"&gt;\n&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,&lt;span class="pl-c1"&gt;no_such_log&lt;/span&gt;}&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tests&lt;/h2&gt;
&lt;div class="highlight highlight-source-makefile"&gt;&lt;pre&gt;make eunit
make build-plt &amp;amp;&amp;amp; make dialyze
make xref&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;pre lang="license"&gt;&lt;code&gt;The MIT License (MIT)

Copyright (c) 2015 Louis-Philippe Gauthier

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
&lt;/code&gt;&lt;/pre&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>lpgauth</author><guid isPermaLink="false">https://github.com/lpgauth/fast_disk_log</guid><pubDate>Sun, 17 Nov 2019 00:03:00 GMT</pubDate></item><item><title>eproxus/meck #4 in Erlang, Today</title><link>https://github.com/eproxus/meck</link><description>&lt;p&gt;&lt;i&gt;A mocking library for Erlang&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a href="https://travis-ci.org/eproxus/meck" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/0e4b0b340a36af1c240cdabb5eaba058e5daace9/68747470733a2f2f696d672e736869656c64732e696f2f7472617669732f6570726f7875732f6d65636b2f6d61737465722e7376673f7374796c653d666c61742d737175617265" alt="Travis" data-canonical-src="https://img.shields.io/travis/eproxus/meck/master.svg?style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://hex.pm/packages/meck" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/cc57adb0caefa2a016a54b863eded43f96dcd269/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f762f6d65636b2e7376673f7374796c653d666c61742d737175617265" alt="Hex.pm Version" data-canonical-src="https://img.shields.io/hexpm/v/meck.svg?style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://hex.pm/packages/meck" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/9fadf5e8fbb5520e991dd585f3e7a41797402665/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f6c2f6d65636b2e7376673f7374796c653d666c61742d737175617265" alt="Hex.pm License" data-canonical-src="https://img.shields.io/hexpm/l/meck.svg?style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://travis-ci.org/eproxus/meck" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/561a4def884cbcf42bd5ed66fafb9932ee26282f/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f65726c616e672d31372d2d32312d626c75652e7376673f7374796c653d666c61742d737175617265" alt="Erlang Versions" data-canonical-src="https://img.shields.io/badge/erlang-17--21-blue.svg?style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://hex.pm/packages/meck" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/e6155759df232e568767eefa23748f255e6173d4/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f6275696c64253230746f6f6c2d7265626172332d6f72616e67652e7376673f7374796c653d666c61742d737175617265" alt="Build Tool" data-canonical-src="https://img.shields.io/badge/build%20tool-rebar3-orange.svg?style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://liberapay.com/eproxus/" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/8087ea3a23a4cce366b2ee34843f60af3d3bb896/68747470733a2f2f696d672e736869656c64732e696f2f6c69626572617061792f72656365697665732f6570726f7875732e7376673f6c6f676f3d6c6962657261706179267374796c653d666c61742d737175617265" alt="Donations" data-canonical-src="https://img.shields.io/liberapay/receives/eproxus.svg?logo=liberapay&amp;amp;style=flat-square" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id="user-content-meck" class="anchor" aria-hidden="true" href="#meck"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Meck&lt;/h1&gt;
&lt;p&gt;A mocking library for Erlang.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#features"&gt;Features&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#examples"&gt;Examples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#use"&gt;Use&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#manual-build"&gt;Manual Build&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#caveats"&gt;Caveats&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#contribute"&gt;Contribute&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-features" class="anchor" aria-hidden="true" href="#features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Features&lt;/h2&gt;
&lt;p&gt;See what's new in &lt;a href="https://github.com/eproxus/meck/wiki/0.8-Release-Notes"&gt;0.8 Release Notes&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dynamic return values using sequences and loops of static values&lt;/li&gt;
&lt;li&gt;Compact definition of mock arguments, clauses and return values&lt;/li&gt;
&lt;li&gt;Pass through: call functions in the original module&lt;/li&gt;
&lt;li&gt;Complete call history showing calls, return values and exceptions&lt;/li&gt;
&lt;li&gt;Mock validation, will invalidate mocks that were not called correctly&lt;/li&gt;
&lt;li&gt;Throwing of expected exceptions that keeps the module valid&lt;/li&gt;
&lt;li&gt;Throws an error when mocking a module that doesn't exist or has been
renamed (disable with option &lt;code&gt;non_strict&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Support for &lt;a href="https://github.com/hyperthunk/hamcrest-erlang"&gt;Hamcrest&lt;/a&gt; matchers&lt;/li&gt;
&lt;li&gt;Automatic backup and restore of cover data&lt;/li&gt;
&lt;li&gt;Mock is linked to the creating process and will unload automatically
when a crash occurs (disable with option &lt;code&gt;no_link&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Mocking of sticky modules (using the option &lt;code&gt;unstick&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;p&gt;Here's an example of using Meck in the Erlang shell:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-smi"&gt;Eshell&lt;/span&gt; &lt;span class="pl-smi"&gt;V5&lt;/span&gt;.&lt;span class="pl-c1"&gt;8.4&lt;/span&gt;  (&lt;span class="pl-c1"&gt;abort&lt;/span&gt; &lt;span class="pl-c1"&gt;with&lt;/span&gt; ^&lt;span class="pl-smi"&gt;G&lt;/span&gt;)
&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;, [&lt;span class="pl-c1"&gt;non_strict&lt;/span&gt;]). &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt; non_strict is used to create modules that don't exist&lt;/span&gt;
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;, &lt;span class="pl-c1"&gt;bark&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;() -&amp;gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Woof!&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;end&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;dog&lt;/span&gt;:&lt;span class="pl-en"&gt;bark&lt;/span&gt;().
&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Woof!&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;).
&lt;span class="pl-c1"&gt;true&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;unload&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;dog&lt;/span&gt;:&lt;span class="pl-en"&gt;bark&lt;/span&gt;().
&lt;span class="pl-k"&gt;**&lt;/span&gt; &lt;span class="pl-c1"&gt;exception&lt;/span&gt; &lt;span class="pl-c1"&gt;error&lt;/span&gt;: &lt;span class="pl-c1"&gt;undefined&lt;/span&gt; &lt;span class="pl-c1"&gt;function&lt;/span&gt; &lt;span class="pl-c1"&gt;dog&lt;/span&gt;:&lt;span class="pl-c1"&gt;bark&lt;/span&gt;&lt;span class="pl-k"&gt;/&lt;/span&gt;&lt;span class="pl-c1"&gt;0&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Exceptions can be anticipated by Meck (resulting in validation still passing).
This is intended to be used to test code that can and should handle certain
exceptions indeed does take care of them:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;, &lt;span class="pl-c1"&gt;meow&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;() -&amp;gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;exception&lt;/span&gt;(&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-c1"&gt;not_a_cat&lt;/span&gt;) &lt;span class="pl-k"&gt;end&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-k"&gt;catch&lt;/span&gt; &lt;span class="pl-en"&gt;dog&lt;/span&gt;:&lt;span class="pl-en"&gt;meow&lt;/span&gt;().
{&lt;span class="pl-c1"&gt;'EXIT'&lt;/span&gt;,{&lt;span class="pl-c1"&gt;not_a_cat&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;meck&lt;/span&gt;,&lt;span class="pl-c1"&gt;exception&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;meck&lt;/span&gt;,&lt;span class="pl-c1"&gt;exec&lt;/span&gt;,&lt;span class="pl-c1"&gt;4&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;dog&lt;/span&gt;,&lt;span class="pl-c1"&gt;meow&lt;/span&gt;,[]},
                    {&lt;span class="pl-c1"&gt;erl_eval&lt;/span&gt;,&lt;span class="pl-c1"&gt;do_apply&lt;/span&gt;,&lt;span class="pl-c1"&gt;5&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;erl_eval&lt;/span&gt;,&lt;span class="pl-c1"&gt;expr&lt;/span&gt;,&lt;span class="pl-c1"&gt;5&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;exprs&lt;/span&gt;,&lt;span class="pl-c1"&gt;6&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;eval_exprs&lt;/span&gt;,&lt;span class="pl-c1"&gt;6&lt;/span&gt;},
                    {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;eval_loop&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;}]}}
&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;).
&lt;span class="pl-c1"&gt;true&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Normal Erlang exceptions result in a failed validation. The following example is
just to demonstrate the behavior, in real test code the exception would normally
come from the code under test (which should, if not expected, invalidate the
mocked module):&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;8&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;, &lt;span class="pl-c1"&gt;jump&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;(&lt;span class="pl-smi"&gt;Height&lt;/span&gt;) &lt;span class="pl-k"&gt;when&lt;/span&gt; &lt;span class="pl-smi"&gt;Height&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;3&lt;/span&gt; -&amp;gt;
                                  &lt;span class="pl-en"&gt;erlang&lt;/span&gt;:&lt;span class="pl-en"&gt;error&lt;/span&gt;(&lt;span class="pl-c1"&gt;too_high&lt;/span&gt;);
                             (&lt;span class="pl-smi"&gt;Height&lt;/span&gt;) -&amp;gt;
                                  &lt;span class="pl-c1"&gt;ok&lt;/span&gt;
                          &lt;span class="pl-k"&gt;end&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;9&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;dog&lt;/span&gt;:&lt;span class="pl-en"&gt;jump&lt;/span&gt;(&lt;span class="pl-c1"&gt;2&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;10&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-k"&gt;catch&lt;/span&gt; &lt;span class="pl-en"&gt;dog&lt;/span&gt;:&lt;span class="pl-en"&gt;jump&lt;/span&gt;(&lt;span class="pl-c1"&gt;5&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;'EXIT'&lt;/span&gt;,{&lt;span class="pl-c1"&gt;too_high&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;meck&lt;/span&gt;,&lt;span class="pl-c1"&gt;exec&lt;/span&gt;,&lt;span class="pl-c1"&gt;4&lt;/span&gt;},
                   {&lt;span class="pl-c1"&gt;dog&lt;/span&gt;,&lt;span class="pl-c1"&gt;jump&lt;/span&gt;,[&lt;span class="pl-c1"&gt;5&lt;/span&gt;]},
                   {&lt;span class="pl-c1"&gt;erl_eval&lt;/span&gt;,&lt;span class="pl-c1"&gt;do_apply&lt;/span&gt;,&lt;span class="pl-c1"&gt;5&lt;/span&gt;},
                   {&lt;span class="pl-c1"&gt;erl_eval&lt;/span&gt;,&lt;span class="pl-c1"&gt;expr&lt;/span&gt;,&lt;span class="pl-c1"&gt;5&lt;/span&gt;},
                   {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;exprs&lt;/span&gt;,&lt;span class="pl-c1"&gt;6&lt;/span&gt;},
                   {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;eval_exprs&lt;/span&gt;,&lt;span class="pl-c1"&gt;6&lt;/span&gt;},
                   {&lt;span class="pl-c1"&gt;shell&lt;/span&gt;,&lt;span class="pl-c1"&gt;eval_loop&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;}]}}
&lt;span class="pl-c1"&gt;11&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-c1"&gt;dog&lt;/span&gt;).
&lt;span class="pl-c1"&gt;false&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here's an example of using Meck inside an EUnit test case:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;my_test&lt;/span&gt;() &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-c1"&gt;my_library_module&lt;/span&gt;),
    &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;my_library_module&lt;/span&gt;, &lt;span class="pl-c1"&gt;fib&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;(&lt;span class="pl-c1"&gt;8&lt;/span&gt;) -&amp;gt; &lt;span class="pl-c1"&gt;21&lt;/span&gt; &lt;span class="pl-k"&gt;end&lt;/span&gt;),
    &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;assertEqual&lt;/span&gt;(&lt;span class="pl-c1"&gt;21&lt;/span&gt;, &lt;span class="pl-en"&gt;code_under_test&lt;/span&gt;:&lt;span class="pl-en"&gt;run&lt;/span&gt;(&lt;span class="pl-c1"&gt;fib&lt;/span&gt;, &lt;span class="pl-c1"&gt;8&lt;/span&gt;)), &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt; Uses my_library_module&lt;/span&gt;
    &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;assert&lt;/span&gt;(&lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-c1"&gt;my_library_module&lt;/span&gt;)),
    &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;unload&lt;/span&gt;(&lt;span class="pl-c1"&gt;my_library_module&lt;/span&gt;).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Pass-through is used when the original functionality of a module should be kept.
When the option &lt;code&gt;passthrough&lt;/code&gt; is used when calling &lt;code&gt;new/2&lt;/code&gt; all functions in the
original module will be kept in the mock. These can later be overridden by
calling &lt;code&gt;expect/3&lt;/code&gt; or &lt;code&gt;expect/4&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-smi"&gt;Eshell&lt;/span&gt; &lt;span class="pl-smi"&gt;V5&lt;/span&gt;.&lt;span class="pl-c1"&gt;8.4&lt;/span&gt;  (&lt;span class="pl-c1"&gt;abort&lt;/span&gt; &lt;span class="pl-c1"&gt;with&lt;/span&gt; ^&lt;span class="pl-smi"&gt;G&lt;/span&gt;)
&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-c1"&gt;string&lt;/span&gt;, [&lt;span class="pl-c1"&gt;unstick&lt;/span&gt;, &lt;span class="pl-c1"&gt;passthrough&lt;/span&gt;]).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;string&lt;/span&gt;:&lt;span class="pl-en"&gt;strip&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;  test  &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).
&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;It's also possible to pass calls to the original function allowing us to
override only a certain behavior of a function (this usage is compatible with
the &lt;code&gt;passthrough&lt;/code&gt; option). &lt;code&gt;passthrough/1&lt;/code&gt; will always call the original
function with the same name as the expect is defined in):&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-smi"&gt;Eshell&lt;/span&gt; &lt;span class="pl-smi"&gt;V5&lt;/span&gt;.&lt;span class="pl-c1"&gt;8.4&lt;/span&gt;  (&lt;span class="pl-c1"&gt;abort&lt;/span&gt; &lt;span class="pl-c1"&gt;with&lt;/span&gt; ^&lt;span class="pl-smi"&gt;G&lt;/span&gt;)
&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-c1"&gt;string&lt;/span&gt;, [&lt;span class="pl-c1"&gt;unstick&lt;/span&gt;]).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;string&lt;/span&gt;, &lt;span class="pl-c1"&gt;strip&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;(&lt;span class="pl-smi"&gt;String&lt;/span&gt;) -&amp;gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;passthrough&lt;/span&gt;([&lt;span class="pl-smi"&gt;String&lt;/span&gt;]) &lt;span class="pl-k"&gt;end&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;string&lt;/span&gt;:&lt;span class="pl-en"&gt;strip&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;  test  &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).
&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;unload&lt;/span&gt;(&lt;span class="pl-c1"&gt;string&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;string&lt;/span&gt;:&lt;span class="pl-en"&gt;strip&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;  test  &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;).
&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-use" class="anchor" aria-hidden="true" href="#use"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Use&lt;/h2&gt;
&lt;p&gt;Meck is best used via &lt;a href="https://github.com/erlang/rebar3"&gt;Rebar 3&lt;/a&gt;. Add Meck to the test dependencies
in your &lt;code&gt;rebar.config&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;{&lt;span class="pl-c1"&gt;profiles&lt;/span&gt;, [{&lt;span class="pl-c1"&gt;test&lt;/span&gt;, [{&lt;span class="pl-c1"&gt;deps&lt;/span&gt;, [&lt;span class="pl-c1"&gt;meck&lt;/span&gt;]}]}]}.&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-manual-build" class="anchor" aria-hidden="true" href="#manual-build"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Manual Build&lt;/h3&gt;
&lt;p&gt;Meck uses &lt;a href="https://github.com/erlang/rebar3"&gt;Rebar 3&lt;/a&gt;. To build Meck go to the Meck directory
and simply type:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;rebar3 compile&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;In order to run all tests for Meck type the following command from the same
directory:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;rebar3 eunit&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Documentation can be generated through the use of the following command:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;rebar3 edoc&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-test-output" class="anchor" aria-hidden="true" href="#test-output"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Test Output&lt;/h3&gt;
&lt;p&gt;Normally the test output is hidden, but if EUnit is run
directly, two things might seem alarming when running the tests:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Warnings emitted by cover&lt;/li&gt;
&lt;li&gt;An exception printed by SASL&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Both are expected due to the way Erlang currently prints errors. The important
line you should look for is &lt;code&gt;All XX tests passed&lt;/code&gt;, if that appears all is
correct.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-caveats" class="anchor" aria-hidden="true" href="#caveats"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Caveats&lt;/h2&gt;
&lt;p&gt;Meck will have trouble mocking certain modules since Meck works by recompiling
and reloading modules. Since Erlang have a flat module namespace, replacing a
module has to be done globally in the Erlang VM. This means certain modules
cannot be mocked. The following is a non-exhaustive list of modules that can
either be problematic to mock or not possible at all:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;erlang&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;os&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;crypto&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;compile&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;global&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;timer&lt;/code&gt; (possible to mock, but used by some test frameworks, like Elixir's
ExUnit)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Also, a meck expectation set up for a function &lt;em&gt;f&lt;/em&gt; does not apply to the module-
local invocation of &lt;em&gt;f&lt;/em&gt; within the mocked module. Consider the following module:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;module&lt;/span&gt;(&lt;span class="pl-en"&gt;test&lt;/span&gt;).
-&lt;span class="pl-k"&gt;export&lt;/span&gt;([&lt;span class="pl-en"&gt;a&lt;/span&gt;/&lt;span class="pl-c1"&gt;0&lt;/span&gt;, &lt;span class="pl-en"&gt;b&lt;/span&gt;/&lt;span class="pl-c1"&gt;0&lt;/span&gt;, &lt;span class="pl-en"&gt;c&lt;/span&gt;/&lt;span class="pl-c1"&gt;0&lt;/span&gt;]).

&lt;span class="pl-en"&gt;a&lt;/span&gt;() &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-en"&gt;c&lt;/span&gt;().

&lt;span class="pl-en"&gt;b&lt;/span&gt;() &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;MODULE&lt;/span&gt;:&lt;span class="pl-en"&gt;c&lt;/span&gt;().

&lt;span class="pl-en"&gt;c&lt;/span&gt;() &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-c1"&gt;original&lt;/span&gt;.&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Note how the module-local call to &lt;code&gt;c/0&lt;/code&gt; in &lt;code&gt;a/0&lt;/code&gt; stays unchanged even though the
expectation changes the externally visible behaviour of &lt;code&gt;c/0&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-c1"&gt;test&lt;/span&gt;, [&lt;span class="pl-c1"&gt;passthrough&lt;/span&gt;]).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;meck&lt;/span&gt;:&lt;span class="pl-en"&gt;expect&lt;/span&gt;(&lt;span class="pl-c1"&gt;test&lt;/span&gt;,&lt;span class="pl-c1"&gt;c&lt;/span&gt;,&lt;span class="pl-c1"&gt;0&lt;/span&gt;,&lt;span class="pl-c1"&gt;changed&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;test&lt;/span&gt;:&lt;span class="pl-en"&gt;a&lt;/span&gt;().
&lt;span class="pl-c1"&gt;original&lt;/span&gt;
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;test&lt;/span&gt;:&lt;span class="pl-en"&gt;b&lt;/span&gt;().
&lt;span class="pl-c1"&gt;changed&lt;/span&gt;
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;test&lt;/span&gt;:&lt;span class="pl-en"&gt;c&lt;/span&gt;().
&lt;span class="pl-c1"&gt;changed&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-contribute" class="anchor" aria-hidden="true" href="#contribute"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contribute&lt;/h2&gt;
&lt;p&gt;Patches are greatly appreciated! For a much nicer history, please &lt;a href="http://chris.beams.io/posts/git-commit/" rel="nofollow"&gt;write good
commit messages&lt;/a&gt;. Use a branch name prefixed by &lt;code&gt;feature/&lt;/code&gt;
(e.g. &lt;code&gt;feature/my_example_branch&lt;/code&gt;) for easier integration when developing new
features or fixes for meck.&lt;/p&gt;
&lt;p&gt;Should you find yourself using Meck and have issues, comments or feedback please
&lt;a href="http://github.com/eproxus/meck/issues"&gt;create an issue here on GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Meck has been greatly improved by &lt;a href="https://github.com/eproxus/meck/graphs/contributors"&gt;many contributors&lt;/a&gt;!&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-donations" class="anchor" aria-hidden="true" href="#donations"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Donations&lt;/h3&gt;
&lt;p&gt;If you or your company use Meck and find it useful, &lt;a href="https://liberapay.com/eproxus/" rel="nofollow"&gt;donations&lt;/a&gt; are greatly appreciated!&lt;/p&gt;

  &lt;a href="https://liberapay.com/eproxus/donate" rel="nofollow"&gt;
    &lt;img alt="Donate using Liberapay" src="https://camo.githubusercontent.com/ae8af018f80649f3d379eb23dbf59acceaffa24e/68747470733a2f2f6c69626572617061792e636f6d2f6173736574732f776964676574732f646f6e6174652e737667" data-canonical-src="https://liberapay.com/assets/widgets/donate.svg" style="max-width:100%;"&gt;
  &lt;/a&gt;



&lt;/article&gt;&lt;/div&gt;</description><author>eproxus</author><guid isPermaLink="false">https://github.com/eproxus/meck</guid><pubDate>Sun, 17 Nov 2019 00:04:00 GMT</pubDate></item><item><title>for-GET/jesse #5 in Erlang, Today</title><link>https://github.com/for-GET/jesse</link><description>&lt;p&gt;&lt;i&gt;jesse (JSon Schema Erlang) is an implementation of a JSON Schema validator for Erlang.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;strong&gt;This repository is the actively-maintained follow-up of &lt;a href="https://github.com/klarna/jesse"&gt;https://github.com/klarna/jesse&lt;/a&gt;. Please update your references.&lt;/strong&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id="user-content-jesse-" class="anchor" aria-hidden="true" href="#jesse-"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;jesse &lt;a href="https://travis-ci.org/for-GET/jesse" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/68e91cb1a5e7dcfd4ac0456d4d37ba7594887746/68747470733a2f2f7472617669732d63692e6f72672f666f722d4745542f6a657373652e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/for-GET/jesse.png" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;jesse (JSON Schema Erlang) is an implementation of a JSON Schema validator
for Erlang.&lt;/p&gt;
&lt;p&gt;jesse implements the following specifications:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://tools.ietf.org/html/draft-zyp-json-schema-03" rel="nofollow"&gt;Draft 03&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://tools.ietf.org/html/draft-zyp-json-schema-04" rel="nofollow"&gt;Draft 04&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-erlang-api-docs" class="anchor" aria-hidden="true" href="#erlang-api-docs"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Erlang API Docs&lt;/h2&gt;
&lt;p&gt;Automatically generated docs are available &lt;a href="https://dev.erldocs.com/github.com/for-get/jesse/" rel="nofollow"&gt;https://dev.erldocs.com/github.com/for-get/jesse/&lt;/a&gt; .&lt;/p&gt;
&lt;p&gt;Please keep in mind that the public API is the &lt;code&gt;jesse.erl&lt;/code&gt; module alone.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-quick-start---cli" class="anchor" aria-hidden="true" href="#quick-start---cli"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quick start - CLI&lt;/h2&gt;
&lt;p&gt;You can fire up &lt;code&gt;jesse&lt;/code&gt; from the CLI, with&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;bin/jesse [path_to_json_schema] path_to_json_schema -- path_to_json_instance [path_to_json_instance]&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can also output the result in JSON format, with &lt;code&gt;--json&lt;/code&gt;, and beautify it e.g. with python&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;bin/jesse [path_to_json_schema] path_to_json_schema --json -- path_to_json_instance [path_to_json_instance] &lt;span class="pl-k"&gt;|&lt;/span&gt; python -m json.tool&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can pass multiple JSON schemas which should be loaded into jesse in-memory storage, but JSON instances will be validated against the last JSON schema passed.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-quick-start---erlang" class="anchor" aria-hidden="true" href="#quick-start---erlang"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quick start - Erlang&lt;/h2&gt;
&lt;p&gt;There are two ways of using jesse:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;to use jesse internal in-memory storage to keep all your schema definitions
In this case jesse will look up a schema definition in its own storage,
and then validate given a JSON instance.&lt;/li&gt;
&lt;li&gt;it is also possible to provide jesse with schema definitions when jesse is called.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-examples" class="anchor" aria-hidden="true" href="#examples"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Examples&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;NOTE: jesse doesn't have any parsing functionality. It currently works with four
      formats: mochijson2, jiffy, jsx and Erlang 17+ maps, so JSON needs to be
      parsed in advance, or you can specify a callback which jesse will use to
      parse JSON.

      In examples below and in jesse test suite jiffy parser is used.
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Use jesse's internal in-memory storage:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(parse JSON in advance)&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Schema&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;items&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;integer&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;items&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;integer&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]}}]}
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;add_schema&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-smi"&gt;Schema&lt;/span&gt;).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Json1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[1, 2, 3]&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
[&lt;span class="pl-c1"&gt;1&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;]
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-smi"&gt;Json1&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;,[&lt;span class="pl-c1"&gt;1&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;]}
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Json2&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;x&lt;span class="pl-cce"&gt;\"&lt;/span&gt;]&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
[&lt;span class="pl-c1"&gt;1&lt;/span&gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;x&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-smi"&gt;Json2&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;integer&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;x&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
                      [&lt;span class="pl-c1"&gt;1&lt;/span&gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;[1]&lt;/code&gt; in the error is the path in the original value to &lt;code&gt;&amp;lt;&amp;lt;"x"&amp;gt;&amp;gt;&lt;/code&gt; where the
validation failed. See &lt;em&gt;Validation errors&lt;/em&gt; below for the full error format.&lt;/p&gt;
&lt;p&gt;(using a callback)&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;add_schema&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                  &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;uniqueItems&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                  [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
&lt;span class="pl-c1"&gt;ok&lt;/span&gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[1, 2]&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;,[&lt;span class="pl-c1"&gt;1&lt;/span&gt;, &lt;span class="pl-c1"&gt;2&lt;/span&gt;]}
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;some_key&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;[{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;foo&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;bar&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}, {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;foo&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;bar&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}] &lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;uniqueItems&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&lt;span class="pl-c1"&gt;true&lt;/span&gt;}]},
                      {&lt;span class="pl-c1"&gt;not_unique&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]}},
                      [{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]}],
                      []}]}&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Call jesse with schema definition in place (do not use internal storage)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;(parse JSON in advance)&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Schema&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;pattern&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;^a*$&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;pattern&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;^a*$&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]}
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Json1&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\"&lt;/span&gt;aaa&lt;span class="pl-cce"&gt;\"&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;aaa&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;, &lt;span class="pl-smi"&gt;Json1&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;aaa&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Json2&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-cce"&gt;\"&lt;/span&gt;abc&lt;span class="pl-cce"&gt;\"&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;).
&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;abc&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;, &lt;span class="pl-smi"&gt;Json2&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;pattern&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;^a*$&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;no_match&lt;/span&gt;,
                      &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;abc&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,[]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;(using a callback)&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Schema&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;patternProperties&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;f.*o&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;integer&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}}}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;.
&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;patternProperties&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;f.*o&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;integer&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}}}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;foo&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;foooooo&lt;span class="pl-cce"&gt;\"&lt;/span&gt; : 2}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&lt;span class="pl-c1"&gt;1&lt;/span&gt;},{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foooooo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;}]}}
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;foo&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;bar&lt;span class="pl-cce"&gt;\"&lt;/span&gt;, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;fooooo&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;integer&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Since 0.4.0 it's possible to instruct jesse to collect errors, and not stop
immediately when it finds an error in the given JSON instance:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-smi"&gt;Schema&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;properties&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;integer&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;string&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;boolean&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}}}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;.
&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;properties&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;integer&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;string&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: {&lt;span class="pl-cce"&gt;\"&lt;/span&gt;type&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;boolean&lt;span class="pl-cce"&gt;\"&lt;/span&gt;}}}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&lt;span class="pl-c1"&gt;1&lt;/span&gt;},{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;},{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;c&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&lt;span class="pl-c1"&gt;true&lt;/span&gt;}]}}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;now let's change the value of the field "b" to an integer&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;works as expected, but let's change the value of the field "c" as well&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 3}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;4&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;still works as expected, jesse stops validating as soon as finds an error.&lt;/p&gt;
&lt;p&gt;Let's use the &lt;code&gt;allowed_errors&lt;/code&gt; option, and set it to 1&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 3}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;},
&lt;span class="pl-c1"&gt;5&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                             {&lt;span class="pl-c1"&gt;allowed_errors&lt;/span&gt;, &lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;boolean&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;c&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]},
        {&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;now we got a list of two errors.&lt;/p&gt;
&lt;p&gt;Let's now change the value of the field "a" to a boolean&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 3}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;},
&lt;span class="pl-c1"&gt;6&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                             {&lt;span class="pl-c1"&gt;allowed_errors&lt;/span&gt;, &lt;span class="pl-c1"&gt;1&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]},
        {&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;integer&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;true&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;we stil got only two errors.&lt;/p&gt;
&lt;p&gt;Let's try using 'infinity' as the argument for the &lt;code&gt;allowed_errors&lt;/code&gt; option&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 3}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;},
&lt;span class="pl-c1"&gt;7&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                             {&lt;span class="pl-c1"&gt;allowed_errors&lt;/span&gt;, &lt;span class="pl-c1"&gt;infinity&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;boolean&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;3&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;c&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]},
        {&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]},
        {&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,{[{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;integer&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}]},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;true&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Maps example&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;8&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;8&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 2, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;8&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;(&lt;span class="pl-smi"&gt;Bin&lt;/span&gt;) -&amp;gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&lt;span class="pl-smi"&gt;Bin&lt;/span&gt;, [&lt;span class="pl-c1"&gt;return_maps&lt;/span&gt;]) &lt;span class="pl-k"&gt;end&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;error&lt;/span&gt;,[{&lt;span class="pl-c1"&gt;data_invalid&lt;/span&gt;,#{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;string&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;},
                      &lt;span class="pl-c1"&gt;wrong_type&lt;/span&gt;,&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
                      [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;]}]}
&lt;span class="pl-c1"&gt;9&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;jesse&lt;/span&gt;:&lt;span class="pl-en"&gt;validate_with_schema&lt;/span&gt;(&lt;span class="pl-smi"&gt;Schema&lt;/span&gt;,
&lt;span class="pl-c1"&gt;9&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;{&lt;span class="pl-cce"&gt;\"&lt;/span&gt;a&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: 1, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;b&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: &lt;span class="pl-cce"&gt;\"&lt;/span&gt;val&lt;span class="pl-cce"&gt;\"&lt;/span&gt;, &lt;span class="pl-cce"&gt;\"&lt;/span&gt;c&lt;span class="pl-cce"&gt;\"&lt;/span&gt;: true}&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;,
&lt;span class="pl-c1"&gt;9&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;                            [{&lt;span class="pl-c1"&gt;parser_fun&lt;/span&gt;, &lt;span class="pl-k"&gt;fun&lt;/span&gt;(&lt;span class="pl-smi"&gt;Bin&lt;/span&gt;) -&amp;gt; &lt;span class="pl-en"&gt;jiffy&lt;/span&gt;:&lt;span class="pl-en"&gt;decode&lt;/span&gt;(&lt;span class="pl-smi"&gt;Bin&lt;/span&gt;, [&lt;span class="pl-c1"&gt;return_maps&lt;/span&gt;]) &lt;span class="pl-k"&gt;end&lt;/span&gt;}]).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, #{&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;val&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;c&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;true&lt;/span&gt;}}&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-json-schema-versions" class="anchor" aria-hidden="true" href="#json-schema-versions"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JSON Schema versions&lt;/h2&gt;
&lt;p&gt;Currently there are two popular drafts of JSON Schema: draft3 and draft4. jesse
supports both. To decide which validator to use jesse tries to read $schema
property from the given schema, and checks if it's a supported one, otherwise it
will return an error. If $schema property isn't provided in the given schema,
jesse will use the default validator (currently the validator for draft3).&lt;/p&gt;
&lt;p&gt;To specify which validator to use by default (if there's no $schema property in
the given schema), one should use 'default_schema_ver' option when call
&lt;code&gt;jesse:validate/3&lt;/code&gt; or &lt;code&gt;jesse:validate_with_schema/3&lt;/code&gt;, the value should be
a binary consisting a schema path,
i.e. &amp;lt;&amp;lt;"&lt;a href="http://json-schema.org/draft-03/schema#%22%3E%3E" rel="nofollow"&gt;http://json-schema.org/draft-03/schema#"&amp;gt;&amp;gt;&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-validation-errors" class="anchor" aria-hidden="true" href="#validation-errors"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Validation errors&lt;/h2&gt;
&lt;p&gt;The validation functions &lt;code&gt;jesse:validate/2&lt;/code&gt; and &lt;code&gt;jesse:validate_with_schema/2,3&lt;/code&gt;
return &lt;code&gt;{ok, Value}&lt;/code&gt; on success and &lt;code&gt;{error, ListOfErrors}&lt;/code&gt; on failure. An error
is either &lt;code&gt;data_invalid&lt;/code&gt; or &lt;code&gt;schema_invalid&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;data_invalid&lt;/code&gt; error is a tuple on the form &lt;code&gt;{data_invalid, Schema, ErrorType, Value, Path}&lt;/code&gt; where&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Schema is the part of the schema where validation failed&lt;/li&gt;
&lt;li&gt;ErrorType is the type of error, usually an atom such as &lt;code&gt;wrong_type&lt;/code&gt;,
&lt;code&gt;not_in_range&lt;/code&gt; or &lt;code&gt;no_match&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Value is The part of the value where failed validation agains Schema&lt;/li&gt;
&lt;li&gt;Path is a path to where validation failed within the original value. The path
is a list of property names and zero-based array indices referencing the
properties and array items within a JSON document; e.g. in the JSON document
&lt;code&gt;{"foo": [42, 43, 44]}&lt;/code&gt;, the path &lt;code&gt;[&amp;lt;&amp;lt;"foo"&amp;gt;&amp;gt;, 0]&lt;/code&gt; refers to the value 42. An
empty list refers to the whole JSON document.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A &lt;code&gt;schema_invalid&lt;/code&gt; error is a tuple on the form &lt;code&gt;{schema_invalid, Schema, ErrorType}&lt;/code&gt; where&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Schema is the part of the schema which is invalid&lt;/li&gt;
&lt;li&gt;ErrorType is an atom such as &lt;code&gt;missing_id_field&lt;/code&gt; or a tuple such as
&lt;code&gt;{wrong_type_dependency, Dependency}&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-caveats" class="anchor" aria-hidden="true" href="#caveats"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Caveats&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;pattern and patternProperty attributes:&lt;/p&gt;
&lt;p&gt;jesse uses standard erlang module &lt;code&gt;re&lt;/code&gt; for regexp matching, therefore there could be
some incompatible regular expressions in schemas you define.&lt;/p&gt;
&lt;p&gt;From erlang docs: "re's matching algorithms are currently based on the PCRE library,
but not all of the PCRE library is interfaced"&lt;/p&gt;
&lt;p&gt;But most of common cases should work fine.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;internal references (id attribute) are NOT supported&lt;/p&gt;
&lt;p&gt;&lt;a href="http://json-schema.org/latest/json-schema-core.html#rfc.section.8.2.1" rel="nofollow"&gt;http://json-schema.org/latest/json-schema-core.html#rfc.section.8.2.1&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;If you see something missing or incorrect, a pull request is most welcome!&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;&lt;a href="LICENSE"&gt;Apache 2.0&lt;/a&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>for-GET</author><guid isPermaLink="false">https://github.com/for-GET/jesse</guid><pubDate>Sun, 17 Nov 2019 00:05:00 GMT</pubDate></item><item><title>aeternity/mnesia_rocksdb #6 in Erlang, Today</title><link>https://github.com/aeternity/mnesia_rocksdb</link><description>&lt;p&gt;&lt;i&gt;A RocksDB backend plugin for mnesia, based on mnesia_eleveldb&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-mnesia_rocksdb" class="anchor" aria-hidden="true" href="#mnesia_rocksdb"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;mnesia_rocksdb&lt;/h1&gt;
&lt;p&gt;A RocksDb backend for Mnesia&lt;/p&gt;
&lt;p&gt;This permits Erlang/OTP applications to use RocksDB as a backend for
mnesia tables. It is based on Klarna's &lt;code&gt;mnesia_eleveldb&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-prerequisites" class="anchor" aria-hidden="true" href="#prerequisites"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;rocksdb&lt;/li&gt;
&lt;li&gt;Erlang/OTP 20.0 or newer (&lt;a href="https://github.com/erlang/otp"&gt;https://github.com/erlang/otp&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting started&lt;/h2&gt;
&lt;p&gt;Call &lt;code&gt;mnesia_rocksdb:register()&lt;/code&gt; immediately after
starting mnesia.&lt;/p&gt;
&lt;p&gt;Put &lt;code&gt;{rocksdb_copies, [node()]}&lt;/code&gt; into the table definitions of
tables you want to be in RocksDB.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-special-features" class="anchor" aria-hidden="true" href="#special-features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Special features&lt;/h2&gt;
&lt;p&gt;RocksDB tables support efficient selects on &lt;em&gt;prefix keys&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;The backend uses the &lt;code&gt;sext&lt;/code&gt; module (see
&lt;a href="https://github.com/uwiger/sext"&gt;https://github.com/uwiger/sext&lt;/a&gt;) for mapping between Erlang terms and the
binary data stored in the tables. This provides two useful properties:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;The records are stored in the Erlang term order of their keys.&lt;/li&gt;
&lt;li&gt;A prefix of a composite key is ordered just before any key for which
it is a prefix. For example, &lt;code&gt;{x, '_'}&lt;/code&gt; is a prefix for keys &lt;code&gt;{x, a}&lt;/code&gt;,
&lt;code&gt;{x, b}&lt;/code&gt; and so on.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This means that a prefix key identifies the start of the sequence of
entries whose keys match the prefix. The backend uses this to optimize
selects on prefix keys.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-customization" class="anchor" aria-hidden="true" href="#customization"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Customization&lt;/h2&gt;
&lt;p&gt;RocksDB supports a number of customization options. These can be specified
by providing a &lt;code&gt;{Key, Value}&lt;/code&gt; list named &lt;code&gt;rocksdb_opts&lt;/code&gt; under &lt;code&gt;user_properties&lt;/code&gt;,
for example:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;mnesia&lt;/span&gt;:&lt;span class="pl-en"&gt;create_table&lt;/span&gt;(&lt;span class="pl-c1"&gt;foo&lt;/span&gt;, [{&lt;span class="pl-c1"&gt;rocksdb_copies&lt;/span&gt;, [&lt;span class="pl-en"&gt;node&lt;/span&gt;()]},
                          ...
                          {&lt;span class="pl-c1"&gt;user_properties&lt;/span&gt;,
                              [{&lt;span class="pl-c1"&gt;rocksdb_opts&lt;/span&gt;, [{&lt;span class="pl-c1"&gt;max_open_files&lt;/span&gt;, &lt;span class="pl-c1"&gt;1024&lt;/span&gt;}]}]
                          }])&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Consult the &lt;a href="https://github.com/facebook/rocksdb/wiki/Setup-Options-and-Basic-Tuning"&gt;RocksDB documentation&lt;/a&gt;
for information on configuration parameters. Also see the section below on handling write errors.&lt;/p&gt;
&lt;p&gt;The default configuration for tables in &lt;code&gt;mnesia_rocksdb&lt;/code&gt; is:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;default_open_opts() -&amp;gt;
    [ {create_if_missing, true}
      , {cache_size,
         list_to_integer(get_env_default("ROCKSDB_CACHE_SIZE", "32212254"))}
      , {block_size, 1024}
      , {max_open_files, 100}
      , {write_buffer_size,
         list_to_integer(get_env_default(
                           "ROCKSDB_WRITE_BUFFER_SIZE", "4194304"))}
      , {compression,
         list_to_atom(get_env_default("ROCKSDB_COMPRESSION", "true"))}
      , {use_bloomfilter, true}
    ].
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;It is also possible, for larger databases, to produce a tuning parameter file.
This is experimental, and mostly copied from &lt;code&gt;mnesia_leveldb&lt;/code&gt;. Consult the
source code in &lt;code&gt;mnesia_rocksdb_tuning.erl&lt;/code&gt; and &lt;code&gt;mnesia_rocksdb_params.erl&lt;/code&gt;.
Contributions are welcome.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-handling-of-errors-in-write-operations" class="anchor" aria-hidden="true" href="#handling-of-errors-in-write-operations"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Handling of errors in write operations&lt;/h2&gt;
&lt;p&gt;The RocksDB update operations return either &lt;code&gt;ok&lt;/code&gt; or &lt;code&gt;{error, any()}&lt;/code&gt;.
Since the actual updates are performed after the 'point-of-no-return',
returning an &lt;code&gt;error&lt;/code&gt; result will cause mnesia to behave unpredictably, since
the operations are expected to simply work.&lt;/p&gt;
&lt;p&gt;An &lt;code&gt;on_write_error&lt;/code&gt; option can be provided, per-table, in the &lt;code&gt;rocksdb_opts&lt;/code&gt;
user property (see &lt;a href="#customization"&gt;Customization&lt;/a&gt; above). Supported values indicate at which level an error
indication should be reported. Mnesia may save reported events in RAM, and may
also print them, depending on the debug level (controlled with &lt;code&gt;mnesia:set_debug_level/1&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Mnesia debug levels are, in increasing detail, &lt;code&gt;none | verbose | debug | trace&lt;/code&gt;
The supported values for &lt;code&gt;on_write_error&lt;/code&gt; are:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Value&lt;/th&gt;
&lt;th&gt;Saved at debug level&lt;/th&gt;
&lt;th&gt;Printed at debug level&lt;/th&gt;
&lt;th&gt;Action&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;debug&lt;/td&gt;
&lt;td&gt;unless none&lt;/td&gt;
&lt;td&gt;verbose, debug, trace&lt;/td&gt;
&lt;td&gt;ignore&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;verbose&lt;/td&gt;
&lt;td&gt;unless none&lt;/td&gt;
&lt;td&gt;verbose, debug, trace&lt;/td&gt;
&lt;td&gt;ignore&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;warning&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;ignore&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;error&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;exception&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;fatal&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;always&lt;/td&gt;
&lt;td&gt;core dump&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-caveats" class="anchor" aria-hidden="true" href="#caveats"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Caveats&lt;/h2&gt;
&lt;p&gt;Avoid placing &lt;code&gt;bag&lt;/code&gt; tables in RocksDB. Although they work, each write
requires additional reads, causing substantial runtime overheads. There
are better ways to represent and process bag data (see above about
&lt;em&gt;prefix keys&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;mnesia:table_info(T, size)&lt;/code&gt; call always returns zero for RocksDB
tables. RocksDB itself does not track the number of elements in a table, and
although it is possible to make the mnesia_rocksdb backend maintain a size
counter, it incurs a high runtime overhead for writes and deletes since it
forces them to first do a read to check the existence of the key. If you
depend on having an up to date size count at all times, you need to maintain
it yourself. If you only need the size occasionally, you may traverse the
table to count the elements.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>aeternity</author><guid isPermaLink="false">https://github.com/aeternity/mnesia_rocksdb</guid><pubDate>Sun, 17 Nov 2019 00:06:00 GMT</pubDate></item><item><title>openx/rebar3_build_rpm #7 in Erlang, Today</title><link>https://github.com/openx/rebar3_build_rpm</link><description>&lt;p&gt;&lt;i&gt;Rebar 3 template for building an RPM of a release.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h2&gt;&lt;a id="user-content-motivation" class="anchor" aria-hidden="true" href="#motivation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Motivation&lt;/h2&gt;
&lt;p&gt;This rebar3 plugin was developed to allow packaging of rebar3 releases as
an rpm.  In order to do so it pulled in &lt;a href="http://github.com/flussonic/epm"&gt;epm&lt;/a&gt;, fixed several issues with epm under Centos systems and embedded it.  The
easiest way to start using this plugin is to install the corresponding
&lt;a href="http://github.com/openx/rebar3_service_rpm_template"&gt;template&lt;/a&gt;, and use
that as a basis for an erlang service.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-conventions" class="anchor" aria-hidden="true" href="#conventions"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Conventions&lt;/h2&gt;
&lt;p&gt;When building a release and using overlays the resulting release directory
layout is used to build rpms.  The following conventions will be applied&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;the release itself will be install in /usr/lib64/release_name/ unless the prefix is overridden.&lt;/li&gt;
&lt;li&gt;the contents of the directory 'slash' will be copied into '/' of the package.  'slash' should exist at the top level of the release.&lt;/li&gt;
&lt;li&gt;if the directory 'slash/internal' exists the following scripts will be looked for and added to the rpm (but will not exist as files in the final rpm)
&lt;ul&gt;
&lt;li&gt;pre.sh - run at the pre-install script of rpm installation&lt;/li&gt;
&lt;li&gt;post.sh - run at the post-install script of rpm installation&lt;/li&gt;
&lt;li&gt;preun.sh - run before uninstalling or upgrading&lt;/li&gt;
&lt;li&gt;postun.sh - run after uninstalling or upgrading&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>openx</author><guid isPermaLink="false">https://github.com/openx/rebar3_build_rpm</guid><pubDate>Sun, 17 Nov 2019 00:07:00 GMT</pubDate></item><item><title>ferd/recon #8 in Erlang, Today</title><link>https://github.com/ferd/recon</link><description>&lt;p&gt;&lt;i&gt;Collection of functions and scripts to debug Erlang in production.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-recon" class="anchor" aria-hidden="true" href="#recon"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;recon&lt;/h1&gt;
&lt;p&gt;Recon wants to be a set of tools usable in production to diagnose Erlang problems or inspect production environment safely.&lt;/p&gt;
&lt;p&gt;To build the library:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;rebar3 compile
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Documentation for the library can be obtained at &lt;a href="http://ferd.github.io/recon/" rel="nofollow"&gt;http://ferd.github.io/recon/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;It is recommended that you use tags if you do not want bleeding edge and development content for this library.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-current-status" class="anchor" aria-hidden="true" href="#current-status"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Current Status&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/ferd/recon" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/26c93e0a7cba48bf72b222f90f4842b22bc00c3d/68747470733a2f2f7472617669732d63692e6f72672f666572642f7265636f6e2e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/ferd/recon.png" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Versions supported: OTP-17 and up. Support of R16B03-1 down to R15B02 is best effort. Builds with Rebar3 require OTP-17.1 and up because that's what the tool supports.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-changelog" class="anchor" aria-hidden="true" href="#changelog"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changelog&lt;/h2&gt;
&lt;p&gt;Branches are organized by version. &lt;code&gt;master&lt;/code&gt; contains the bleeding edge, &lt;code&gt;2.x&lt;/code&gt;
contains all stable changes up to the latest release of v2, and &lt;code&gt;1.x&lt;/code&gt; contains
all stable changes of the first version of Recon.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;2.x&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2.5.0
&lt;ul&gt;
&lt;li&gt;Optional formatting of records in traces (thanks to @bartekgorny)&lt;/li&gt;
&lt;li&gt;Basic support for OTP-22 in &lt;code&gt;recon_alloc&lt;/code&gt; (base handling of &lt;code&gt;foreign_blocks&lt;/code&gt; type)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.4.0
&lt;ul&gt;
&lt;li&gt;Optional formatting of records in traces (thanks to @bartekgorny)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.6
&lt;ul&gt;
&lt;li&gt;Adapting for OTP-21. Includes the 'deprecation' of &lt;code&gt;recon:files/0&lt;/code&gt;
since OTP-21 no longer supports listing all file descriptors, and
removing &lt;code&gt;error_logger_queue_len&lt;/code&gt; from node stats since a new
logging mechanism was introduced in-process instead.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.5
&lt;ul&gt;
&lt;li&gt;fixing timefold's first iteration to prevent errors at call-site
by sleeping before sampling&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.4
&lt;ul&gt;
&lt;li&gt;fixing edoc tag that broke some downstream packaging attempts&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.3
&lt;ul&gt;
&lt;li&gt;fixing &lt;code&gt;bin_leak&lt;/code&gt; arith errors&lt;/li&gt;
&lt;li&gt;fixes to &lt;code&gt;recon_alloc:allocators/1&lt;/code&gt; (incl. R16 compatibility)&lt;/li&gt;
&lt;li&gt;fix errors in scheduler wall time calculations&lt;/li&gt;
&lt;li&gt;&lt;code&gt;term_to_pid&lt;/code&gt; supports binaries&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.2
&lt;ul&gt;
&lt;li&gt;Allow the &lt;code&gt;return_to&lt;/code&gt; option in &lt;code&gt;recon_trace&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;More efficient sorting function for procs and ports attributes
(thanks to @zhongwencool and @pichi)&lt;/li&gt;
&lt;li&gt;Allow the usage of &lt;code&gt;return_trace&lt;/code&gt; in &lt;code&gt;recon_trace:calls/2-3&lt;/code&gt; instead
of &lt;code&gt;fun(_) -&amp;gt; return_trace() end&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.1
&lt;ul&gt;
&lt;li&gt;Updated &lt;code&gt;app_deps&lt;/code&gt; script to run with rebar3 dependencies&lt;/li&gt;
&lt;li&gt;Minor docs update&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.3.0
&lt;ul&gt;
&lt;li&gt;Doc made clearer around semantics of &lt;code&gt;recon:proc_count&lt;/code&gt; and
&lt;code&gt;recon:proc_window&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Fix doc typos&lt;/li&gt;
&lt;li&gt;Fix potential race condition on waiting for death of tracing process&lt;/li&gt;
&lt;li&gt;Add an option which allows sending tracing output somewhere other than
group_leader() (thanks @djnym)&lt;/li&gt;
&lt;li&gt;Add ability to pass custom formatter function when tracing (thanks @iilyak)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.2.1
&lt;ul&gt;
&lt;li&gt;Fixing type specs for &lt;code&gt;recon:port_types/0&lt;/code&gt; and &lt;code&gt;recon_lib:count/1&lt;/code&gt;,
thanks to @lucafavatella&lt;/li&gt;
&lt;li&gt;Minor documentation fixes.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.2.0:
&lt;ul&gt;
&lt;li&gt;Adding scheduler info metrics to get a more accurate picture than what
top and CPU gives.&lt;/li&gt;
&lt;li&gt;Broadening &lt;code&gt;recon_trace:calls/2&lt;/code&gt; interface to allow multiple match specs,
which was currently only allowed for &lt;code&gt;calls/3&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Support for &lt;code&gt;mbcs_pool&lt;/code&gt; data in &lt;code&gt;erts_alloc&lt;/code&gt;, and some internal refactoring,
thanks to Lukas Larsson.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.1.2:
&lt;ul&gt;
&lt;li&gt;Fixing tests for R15B02 and up&lt;/li&gt;
&lt;li&gt;Fixing a backwards compatibility for R15B03 on &lt;code&gt;recon_alloc&lt;/code&gt; operations
with dumps on disk&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.1.1:
&lt;ul&gt;
&lt;li&gt;Renaming &lt;code&gt;recon_trace:mfa()&lt;/code&gt; type to &lt;code&gt;recon_trace:tspec()&lt;/code&gt; to avoid
issues in older Erlang versions regarding redefining an existing type
(Thanks Roberto Aloi)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.1.0:
&lt;ul&gt;
&lt;li&gt;Adding &lt;code&gt;recon_trace&lt;/code&gt; script to allow safe tracing of function calls
on production nodes.&lt;/li&gt;
&lt;li&gt;Adding &lt;code&gt;queue_fun.awk&lt;/code&gt; script to inspect running functions of processes
with large mailboxes in a crash dump.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.0.2:
&lt;ul&gt;
&lt;li&gt;Preventing crashes in &lt;code&gt;recon_alloc&lt;/code&gt; when certain expected allocators
do not return results (Thanks to Michal Ptaszek)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.0.1:
&lt;ul&gt;
&lt;li&gt;Add support for R16B03 in &lt;code&gt;recon_alloc&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;2.0.0:
&lt;ul&gt;
&lt;li&gt;Test suite added&lt;/li&gt;
&lt;li&gt;Major rewrite of &lt;code&gt;recon_alloc&lt;/code&gt;, thanks to Lukas Larsson. Things that changed include:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;average_sizes/0&lt;/code&gt; is renamed &lt;code&gt;average_block_sizes/1&lt;/code&gt; and now takes
the keywords &lt;code&gt;current&lt;/code&gt; and &lt;code&gt;max&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Documentation updates.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;memory/1&lt;/code&gt; has new options in &lt;code&gt;allocated_types&lt;/code&gt; and &lt;code&gt;allocated_instances&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;memory/2&lt;/code&gt; has been added, which allows to choose between &lt;code&gt;current&lt;/code&gt; and
&lt;code&gt;max&lt;/code&gt; values. &lt;code&gt;memory(Term)&lt;/code&gt; is made equivalent to &lt;code&gt;memory(Term, current)&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Allow &lt;code&gt;sbcs_to_mbcs/0&lt;/code&gt; to take the arguments &lt;code&gt;current&lt;/code&gt; and &lt;code&gt;max&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Added unit conversion function &lt;code&gt;set_unit/1&lt;/code&gt;, which allows to get the
&lt;code&gt;recon_alloc&lt;/code&gt; results in bytes (default), kilobytes, megabytes, and
gigabytes, to help with readability.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Updated the internal rebar version, if anybody were to use it.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recon:port_info/1&lt;/code&gt; no longer includes the &lt;code&gt;parallelism&lt;/code&gt; option by default
within the &lt;code&gt;meta&lt;/code&gt; category as this would hurt backwards compatibility on
some installations.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;recon:get_state/2&lt;/code&gt; is added in order to specify timeouts.
&lt;code&gt;recon:get_state/1&lt;/code&gt; keeps its 5000 milliseconds timeout.&lt;/li&gt;
&lt;li&gt;Addition of a fake attribute called &lt;code&gt;binary_memory&lt;/code&gt;, which is callable in
&lt;code&gt;recon:info/2,4&lt;/code&gt;, &lt;code&gt;recon:proc_count/2&lt;/code&gt;, and &lt;code&gt;recon:proc_window/3&lt;/code&gt;. This
attribute allows to fetch the amount of memory used by refc binaries for
a process, and to sort by that value for counts and windows.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;1.x&lt;/em&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1.2.0:
&lt;ul&gt;
&lt;li&gt;add &lt;code&gt;recon_alloc:snapshot*&lt;/code&gt; functions, which allow memory allocation
snapshots to be taken, saved on disk, reloaded, and analyzed on-demand.
Thanks to Lukas Larsson for this functionality.&lt;/li&gt;
&lt;li&gt;remove &lt;code&gt;parallelism&lt;/code&gt; data from &lt;code&gt;port_info&lt;/code&gt; for better OTP backwards
compatibility with little loss of information.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1.1.0:
&lt;ul&gt;
&lt;li&gt;add &lt;code&gt;recon_lib:term_to_port&lt;/code&gt; to convert a string back to a
usable port.&lt;/li&gt;
&lt;li&gt;add &lt;code&gt;recon:port_info/1&lt;/code&gt; and &lt;code&gt;recon:port_info/2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;add &lt;code&gt;recon_alloc&lt;/code&gt; module&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;1.0.0: add &lt;code&gt;info/2&lt;/code&gt; and &lt;code&gt;info/4&lt;/code&gt;. The &lt;code&gt;memory&lt;/code&gt; info type thus gets renamed
to &lt;code&gt;memory_used&lt;/code&gt;, in order to avoid conflicts when picking between a type
and a specific process attribute. Types exported by the module also get
updated.&lt;/li&gt;
&lt;li&gt;0.4.2: extended &lt;code&gt;app_deps.erl&lt;/code&gt; to read apps/ directories for releases&lt;/li&gt;
&lt;li&gt;0.4.1: fixed bug where nodes with lots of processes could see the GC call
fail if said processes failed between long calls within the &lt;code&gt;bin_leak&lt;/code&gt;
function call.&lt;/li&gt;
&lt;li&gt;0.4.0: fixed bug where nodes with lots of processes or ports could see their
count or window functions fail because a process or socket closed between the
time the function started and before it finished. This ends up changing the
API in &lt;code&gt;recon_lib&lt;/code&gt; for the window and count functions that take a specific
pid as an argument.&lt;/li&gt;
&lt;li&gt;0.3.1: factored out some logic from &lt;code&gt;recon:info/1&lt;/code&gt; into &lt;code&gt;recon_lib:term_to_pid&lt;/code&gt;
and allowed arbitrary terms to be used for pids in &lt;code&gt;recon:get_state/1&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>ferd</author><guid isPermaLink="false">https://github.com/ferd/recon</guid><pubDate>Sun, 17 Nov 2019 00:08:00 GMT</pubDate></item><item><title>openx/ox-thrift #9 in Erlang, Today</title><link>https://github.com/openx/ox-thrift</link><description>&lt;p&gt;&lt;i&gt;Erlang Thrift encoder/decoder library optimized for efficiency&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;
&lt;h1&gt;&lt;a id="user-content-openx-erlang-thrift-implementation" class="anchor" aria-hidden="true" href="#openx-erlang-thrift-implementation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;OpenX Erlang Thrift Implementation&lt;/h1&gt;
&lt;p&gt;OX Thrift (&lt;code&gt;ox-thrift&lt;/code&gt;) is a reimplementation of the
&lt;a href="https://thrift.apache.org/" rel="nofollow"&gt;Apache Thrift&lt;/a&gt; Erlang library with an
emphasis on speed of encoding and decoding.  In its current
incarnation, it uses the structure definitions produced by the Apache
Thrift code generator.  However it has the following differences from
the Apache Thrift Erlang library.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;It supports only framed transports and binary and compact protocols.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It gives up the ability to stream directly to or from the transport.
Instead, the processor layer decodes the thrift message from a
binary buffer and encodes to an iolist.  Compared to the Apache
Erlang Thrift library, this simplifies the implementation and avoids
a lot of record modifications that are inefficient in Erlang.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The Thrift server uses the
&lt;a href="https://github.com/ninenines/ranch"&gt;Ranch&lt;/a&gt; acceptor pool instead of
rolling its own.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;HandlerModule:handle_function(Function, Args)&lt;/code&gt; interface
expects the HandlerModule to take its arguments as a list instead of
a tuple.  This is more consistent with Erlang conventions for
functions that take a variable number of arguments.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For the Thrift &lt;code&gt;map&lt;/code&gt; type, for encoding OX Thrift will accept either
a dict (as Apache Thrift does), a proplist, or an Erlang map.  For
decoding, however, OX Thrift can be configured to return a dict or a
map.  See the documentation for the &lt;code&gt;map_module&lt;/code&gt; option.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;For the Thrift &lt;code&gt;set&lt;/code&gt; type, for encoding OX Thrift will accept either a set
(as Apache Thrift does) or a list.  OX Thrift does not deduplicate the list
elements if passed a list.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Like the Apache library, OX Thrift does not enforce required struct
fields, on either encoding or decoding.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Like the Apache library, OX Thrift does not populate the structs
with default values on decoding.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-interface" class="anchor" aria-hidden="true" href="#interface"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Interface&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-client" class="anchor" aria-hidden="true" href="#client"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Client&lt;/h3&gt;
&lt;p&gt;The OX Thrift client interface is provided by the &lt;code&gt;ox_thrift_client&lt;/code&gt;
module.  This module exports two functions, &lt;code&gt;new&lt;/code&gt;, and &lt;code&gt;call&lt;/code&gt;.&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-new----manage-a-connection-to-a-thrift-server" class="anchor" aria-hidden="true" href="#new----manage-a-connection-to-a-thrift-server"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;code&gt;new&lt;/code&gt; -- Manage a Connection to a Thrift Server&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Client&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;ox_thrift_client&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-smi"&gt;Connection&lt;/span&gt;, &lt;span class="pl-smi"&gt;ConnectionState&lt;/span&gt;, &lt;span class="pl-smi"&gt;Transport&lt;/span&gt;, &lt;span class="pl-smi"&gt;Protocol&lt;/span&gt;, &lt;span class="pl-smi"&gt;Service&lt;/span&gt;)
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Client&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;ox_thrift_client&lt;/span&gt;:&lt;span class="pl-en"&gt;new&lt;/span&gt;(&lt;span class="pl-smi"&gt;Connection&lt;/span&gt;, &lt;span class="pl-smi"&gt;ConnectionState&lt;/span&gt;, &lt;span class="pl-smi"&gt;Transport&lt;/span&gt;, &lt;span class="pl-smi"&gt;Protocol&lt;/span&gt;, &lt;span class="pl-smi"&gt;Service&lt;/span&gt;, &lt;span class="pl-smi"&gt;Options&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Connection: A module that manages a connection to the Thrift server.
This module must support the interface defined by
&lt;code&gt;ox_thrift_connection&lt;/code&gt;.  The OX Thrift client will call the module's
&lt;code&gt;checkout&lt;/code&gt; and &lt;code&gt;checkin&lt;/code&gt; functions.  The OX Thrift library supplies
several modules that implement this interface, described in the
&lt;a href="#connection-managers"&gt;Connection Managers&lt;/a&gt; section below.&lt;/li&gt;
&lt;li&gt;ConnectionState: State managed by the Connection module.&lt;/li&gt;
&lt;li&gt;Transport: A module that provides the transport layer, such as
&lt;code&gt;gen_tcp&lt;/code&gt;.  This module is expected to export &lt;code&gt;send/2&lt;/code&gt;, &lt;code&gt;recv/3&lt;/code&gt;,
and &lt;code&gt;close/1&lt;/code&gt; functions.&lt;/li&gt;
&lt;li&gt;Protocol: A module that provides the Thrift protocol layer, e.g.,
&lt;code&gt;ox_thrift_protocol_binary&lt;/code&gt; or &lt;code&gt;ox_thrift_protocol_compact&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Service: A module, produced by the Thrift IDL compiler from the
service's Thrift definition, that provides the Service layer.&lt;/li&gt;
&lt;li&gt;Options: A list of options.
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;{map_module, MapModule}&lt;/code&gt; where &lt;code&gt;MapModule&lt;/code&gt; is &lt;code&gt;dict&lt;/code&gt; or &lt;code&gt;maps&lt;/code&gt;
specifies the module that is used to decode Thrift &lt;code&gt;map&lt;/code&gt; fields.
The default is &lt;code&gt;dict&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{recv_timeout, Milliseconds}&lt;/code&gt; or &lt;code&gt;{recv_timeout, infinity}&lt;/code&gt; The
receive timeout.  The default is &lt;code&gt;infinity&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Connection module's &lt;code&gt;checkout&lt;/code&gt; function should return a socket
Socket, and the OX Thrift library expects the Transport module to
support the following functions on this Socket.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ok = Transport:send(Socket, IOData)&lt;/code&gt;,&lt;/li&gt;
&lt;li&gt;&lt;code&gt;{ok, Binary} = Transport:recv(Socket, Length, Timeout)&lt;/code&gt;, and&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ok = Transport:close(Socket)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-call----make-a-call-to-a-thrift-server" class="anchor" aria-hidden="true" href="#call----make-a-call-to-a-thrift-server"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;code&gt;call&lt;/code&gt; -- Make a Call to a Thrift Server&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;OClient&lt;/span&gt;, &lt;span class="pl-smi"&gt;Result&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;ox_thrift_client&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-smi"&gt;IClient&lt;/span&gt;, &lt;span class="pl-smi"&gt;Function&lt;/span&gt;, &lt;span class="pl-smi"&gt;Args&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;IClient: An &lt;code&gt;ox_thrift_client&lt;/code&gt; record, as returned by the
&lt;code&gt;ox_thrift_client:new&lt;/code&gt; call or a previous &lt;code&gt;ox_thrift_client:call&lt;/code&gt;
call.&lt;/li&gt;
&lt;li&gt;Function: An atom representing the function to call.&lt;/li&gt;
&lt;li&gt;Args: A list containing the arguments to Function.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-connection-managers" class="anchor" aria-hidden="true" href="#connection-managers"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Connection Managers&lt;/h4&gt;
&lt;p&gt;OX Thrift supplies several connection managers for use with the OX
Thrift client.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ox_thrift_simple_socket&lt;/code&gt; implements a non-reconnecting connection
to the Thrift server.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ox_thrift_reconnecting_socket&lt;/code&gt; implements a simple dedicated
connection to the Thrift server that automatically reopens the
connection when there is an error.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ox_thrift_socket_pool&lt;/code&gt; implements a pool of connections that can be
shared among multiple processes.  The pool is managed by a
gen_server which you are expected to link into your supervisor tree
by calling the &lt;code&gt;ox_thrift_socket_pool:start_link/4&lt;/code&gt; function.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can turn on some additional features out in &lt;code&gt;ox_thrift_socket_pool&lt;/code&gt; by
adding the following to your &lt;code&gt;rebar.config&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;{&lt;span class="pl-c1"&gt;overrides&lt;/span&gt;,
  [ {&lt;span class="pl-c1"&gt;add&lt;/span&gt;, &lt;span class="pl-c1"&gt;ox_thrift&lt;/span&gt;,
      [ {&lt;span class="pl-c1"&gt;erl_opts&lt;/span&gt;,
          [ {&lt;span class="pl-c1"&gt;d&lt;/span&gt;, &lt;span class="pl-c1"&gt;'DEBUG_CONNECTIONS'&lt;/span&gt;} &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Debug errors in connection monitoring&lt;/span&gt;
          , {&lt;span class="pl-c1"&gt;d&lt;/span&gt;, &lt;span class="pl-c1"&gt;'MONDEMAND_PROGID'&lt;/span&gt;, &lt;span class="pl-c1"&gt;myapp&lt;/span&gt;} &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt;% Emit mondemand stats for errors.&lt;/span&gt;
          ]}
      ]}
  ]}.&lt;/pre&gt;&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;DEBUG_CONNECTIONS&lt;/code&gt; macro controls whether the connections monitoring is
logged if certain errors are detected.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The &lt;code&gt;MONDEMAND_PROGID&lt;/code&gt; macro controls whether error metrics are emitted
using the &lt;a href="https://github.com/mondemand/mondemand-erlang"&gt;MonDemand&lt;/a&gt; metric
collection framework.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-server" class="anchor" aria-hidden="true" href="#server"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Server&lt;/h3&gt;
&lt;p&gt;The OX Thrift server interface is provided by the &lt;code&gt;ox_thrift_server&lt;/code&gt;
module.  This module is designed to be used with the
&lt;a href="https://github.com/ninenines/ranch"&gt;Ranch&lt;/a&gt; acceptor pool.  Your
application needs to start Ranch, and then to register the
&lt;code&gt;ox_thrift_server&lt;/code&gt; module with Ranch as a protocol handler.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;ranch&lt;/span&gt;:&lt;span class="pl-en"&gt;start_listener&lt;/span&gt;(
  &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;THRIFT_SERVICE_REF&lt;/span&gt;,
  &lt;span class="pl-c1"&gt;10&lt;/span&gt;,                &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt; Number of acceptors.&lt;/span&gt;
  &lt;span class="pl-c1"&gt;ranch_tcp&lt;/span&gt;,
  [ {&lt;span class="pl-c1"&gt;port&lt;/span&gt;, &lt;span class="pl-smi"&gt;Port&lt;/span&gt;} ],  &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt; https://github.com/ninenines/ranch/blob/master/doc/src/manual/ranch_tcp.asciidoc&lt;/span&gt;
  &lt;span class="pl-c1"&gt;ox_thrift_server&lt;/span&gt;,  &lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;%&lt;/span&gt; Ranch protocol module.&lt;/span&gt;
  &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{
     &lt;span class="pl-smi"&gt;service_module&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;service_thrift&lt;/span&gt;,
     &lt;span class="pl-smi"&gt;protocol_module&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;ox_thrift_protocol_binary&lt;/span&gt;,
     &lt;span class="pl-smi"&gt;handler_module&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;MODULE&lt;/span&gt;}).&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Your Thrift server must supply two functions, &lt;code&gt;handle_function&lt;/code&gt; and
&lt;code&gt;handle_error&lt;/code&gt;.  These functions are defined by the &lt;code&gt;ox_thrift_server&lt;/code&gt;
behaviour, and the module that supplies these functions is specified
in the &lt;code&gt;handler_module&lt;/code&gt; field.&lt;/p&gt;
&lt;p&gt;Unlike the Apache Thrift's &lt;code&gt;handle_function&lt;/code&gt; Erlang interface, OX
Thrift passes the Args parameter as a list instead of a tuple.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;behaviour&lt;/span&gt;(&lt;span class="pl-en"&gt;ox_thrift_server&lt;/span&gt;).

&lt;span class="pl-en"&gt;handle_function&lt;/span&gt; (&lt;span class="pl-smi"&gt;Function&lt;/span&gt;, &lt;span class="pl-smi"&gt;Args&lt;/span&gt;) &lt;span class="pl-k"&gt;when&lt;/span&gt; &lt;span class="pl-en"&gt;is_atom&lt;/span&gt;(&lt;span class="pl-smi"&gt;Function&lt;/span&gt;), &lt;span class="pl-en"&gt;is_list&lt;/span&gt;(&lt;span class="pl-smi"&gt;Args&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-k"&gt;case&lt;/span&gt; &lt;span class="pl-en"&gt;apply&lt;/span&gt;(&lt;span class="pl-k"&gt;?&lt;/span&gt;&lt;span class="pl-en"&gt;MODULE&lt;/span&gt;, &lt;span class="pl-smi"&gt;Function&lt;/span&gt;, &lt;span class="pl-smi"&gt;Args&lt;/span&gt;) &lt;span class="pl-k"&gt;of&lt;/span&gt;
    &lt;span class="pl-c1"&gt;ok&lt;/span&gt;    -&amp;gt; &lt;span class="pl-c1"&gt;ok&lt;/span&gt;;
    &lt;span class="pl-smi"&gt;Reply&lt;/span&gt; -&amp;gt; {&lt;span class="pl-c1"&gt;reply&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reply&lt;/span&gt;}
  &lt;span class="pl-k"&gt;end&lt;/span&gt;.

&lt;span class="pl-en"&gt;handle_error&lt;/span&gt;(&lt;span class="pl-smi"&gt;Function&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-c1"&gt;ok&lt;/span&gt;.&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;handle_function&lt;/code&gt; function may return &lt;code&gt;ok&lt;/code&gt; for a void function, or
&lt;code&gt;{reply, Reply}&lt;/code&gt; for a non-void function.  In addition, the function
may request that the Thrift server close the client's connection after
returning the reply by returning &lt;code&gt;{ok, close}&lt;/code&gt; for a void function or
&lt;code&gt;{reply, Reply, close}&lt;/code&gt; for a non-void function.&lt;/p&gt;
&lt;p&gt;If the Thrift function wants to return one of its declared exceptions,
&lt;code&gt;E&lt;/code&gt;, it may call &lt;code&gt;{throw, E}&lt;/code&gt;.  The Thrift server will catch the
exception and return a message to the client, where the exception will
be re-thrown.&lt;/p&gt;
&lt;p&gt;The protocol is specified by setting the &lt;code&gt;protocol_module&lt;/code&gt; field to
one of the following values.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ox_thrift_protocol_binary&lt;/code&gt;: binary protocol&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ox_thrift_protocol_compact&lt;/code&gt;: compact protocol&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-thrift-map-field-decoding" class="anchor" aria-hidden="true" href="#thrift-map-field-decoding"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Thrift &lt;code&gt;map&lt;/code&gt; Field Decoding&lt;/h4&gt;
&lt;p&gt;By default, Thrift &lt;code&gt;map&lt;/code&gt; fields are decoded to Erlang &lt;code&gt;dict&lt;/code&gt;s.  You
can specify that they be decoded as Erlang &lt;code&gt;maps&lt;/code&gt; with the
&lt;code&gt;map_module&lt;/code&gt; option.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{&lt;span class="pl-smi"&gt;options&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { &lt;span class="pl-c1"&gt;map_module&lt;/span&gt;, &lt;span class="pl-c1"&gt;maps&lt;/span&gt; } ]}&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-setting-the-servers-recv-timeout" class="anchor" aria-hidden="true" href="#setting-the-servers-recv-timeout"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Setting the Server's &lt;code&gt;recv&lt;/code&gt; Timeout&lt;/h4&gt;
&lt;p&gt;The default &lt;code&gt;recv&lt;/code&gt; timeout is &lt;code&gt;infinity&lt;/code&gt;, which means that the server
will keep a socket open indefinitely waiting for a client to send a
request.  You can override this with the &lt;code&gt;recv_timeout&lt;/code&gt; option.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{&lt;span class="pl-smi"&gt;options&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { &lt;span class="pl-c1"&gt;recv_timeout&lt;/span&gt;, &lt;span class="pl-smi"&gt;TimeoutMilliseconds&lt;/span&gt; } ]}&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-limiting-the-maximum-message-size" class="anchor" aria-hidden="true" href="#limiting-the-maximum-message-size"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Limiting the Maximum Message Size&lt;/h4&gt;
&lt;p&gt;By default the OX Thrift server will accept Thrift messages of unlimited size
(&lt;code&gt;infinity&lt;/code&gt;).  If you are in an environment where clients may sent you
improperly-framed thrift messages (for example, random requests coming from a
port scanner), ox_thrift allows you to limit the maximum size of the message
the server will accept.  Messages that are larger than this limit will result
in a call to the &lt;code&gt;handle_error&lt;/code&gt; function with a &lt;code&gt;large_message&lt;/code&gt; error.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{&lt;span class="pl-smi"&gt;options&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { &lt;span class="pl-c1"&gt;max_message_size&lt;/span&gt;, &lt;span class="pl-smi"&gt;MaxSizeBytes&lt;/span&gt; } ]}&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-stats-collection" class="anchor" aria-hidden="true" href="#stats-collection"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Stats Collection&lt;/h4&gt;
&lt;p&gt;The OX Thrift server will optionally call a &lt;code&gt;handle_stats&lt;/code&gt; function in
a module that you define when you start the Ranch listener.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{&lt;span class="pl-smi"&gt;options&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { &lt;span class="pl-c1"&gt;stats_module&lt;/span&gt;, &lt;span class="pl-smi"&gt;StatsModule&lt;/span&gt; } ]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The interface for the stats-collection function is:&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;handle_stats&lt;/span&gt; (&lt;span class="pl-smi"&gt;Function&lt;/span&gt;, [ {&lt;span class="pl-smi"&gt;Stat&lt;/span&gt;, &lt;span class="pl-smi"&gt;Value&lt;/span&gt;} ]) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
  &lt;span class="pl-c1"&gt;ok&lt;/span&gt;.&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The statistics currently collected are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;decode_time&lt;/code&gt;: The call arguments decoding time in microseconds.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;decode_size&lt;/code&gt;: The size of the encoded Thrift message being decoded.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;decode_reductions&lt;/code&gt;: The number of reductions consumed decoding the Thrift message.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;encode_time&lt;/code&gt;: The call reply encoding time in microseconds.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;encode_size&lt;/code&gt;: The size of the encoded Thrift message.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;encode_reductions&lt;/code&gt;: The number of reductions consumed encoding the Thrift message.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;connect_time&lt;/code&gt;: The total connect time in microseconds.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;call_count&lt;/code&gt;: The number of calls to the Thrift server.&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-spawning-a-new-process-for-each-thrift-call" class="anchor" aria-hidden="true" href="#spawning-a-new-process-for-each-thrift-call"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Spawning a New Process for Each Thrift Call&lt;/h4&gt;
&lt;p&gt;Normally, Ranch will start a OX Thrift server process for each client
connection, and all the processing for any Thrift calls will be done in this
server process.  If the OX Thrift server is started with the &lt;code&gt;spawn_options&lt;/code&gt;
option, however, a new process will be spawned and linked to handle each
request, with the value of the &lt;code&gt;spawn_options&lt;/code&gt; passed as the second argument
to the &lt;code&gt;spawn_opt/2&lt;/code&gt; call.  If processing the Thrift call generates a lot of
garbage it can be more efficient to release it all when the process exits than
to let the Erlang runtime do garbage collection on a long-running process.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;ox_thrift_config&lt;/span&gt;{&lt;span class="pl-smi"&gt;options&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { &lt;span class="pl-c1"&gt;spawn_options&lt;/span&gt;, [] } ]}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you use this option, you may want to determine the typical heap size of a
handler process (perhaps by calling &lt;code&gt;process_info(self(), heap_size)&lt;/code&gt; in a
&lt;code&gt;handle_stats&lt;/code&gt; function) and specify it as the min_heap_size in the
&lt;code&gt;spawn_options&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-direct-encoding-and-decoding-of-records-to-and-from-binaries" class="anchor" aria-hidden="true" href="#direct-encoding-and-decoding-of-records-to-and-from-binaries"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Direct Encoding and Decoding of Records to and from Binaries&lt;/h3&gt;
&lt;p&gt;The &lt;code&gt;ox_thrift_protocol_binary:encode_record/2&lt;/code&gt; function encodes a
Thrift struct record to a binary, and
&lt;code&gt;ox_thrift_protocol_binary:decode_record/2&lt;/code&gt; decodes the binary back to
the original record.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-smi"&gt;Binary&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;encode_record&lt;/span&gt;({&lt;span class="pl-smi"&gt;ServiceTypesModule&lt;/span&gt;, &lt;span class="pl-smi"&gt;StructName&lt;/span&gt;}, &lt;span class="pl-smi"&gt;Record&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-smi"&gt;Record&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;decode_record&lt;/span&gt;({&lt;span class="pl-smi"&gt;ServiceTypesModule&lt;/span&gt;, &lt;span class="pl-smi"&gt;StructName&lt;/span&gt;}, &lt;span class="pl-smi"&gt;Binary&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If your Thrift service is "svc" the ServiceTypesModule will be &lt;code&gt;svc_types&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-speedup" class="anchor" aria-hidden="true" href="#speedup"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Speedup&lt;/h2&gt;
&lt;p&gt;These numbers were taken from benchmarks of the binary protocol on a
production SSRTB system.&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;/th&gt;
&lt;th align="right"&gt;Apache Thrift&lt;/th&gt;
&lt;th align="right"&gt;OX Thrift&lt;/th&gt;
&lt;th align="right"&gt;Speedup&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Decoding&lt;/td&gt;
&lt;td align="right"&gt;1098 us&lt;/td&gt;
&lt;td align="right"&gt;244 us&lt;/td&gt;
&lt;td align="right"&gt;4.5 x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Encoding&lt;/td&gt;
&lt;td align="right"&gt;868 us&lt;/td&gt;
&lt;td align="right"&gt;185 us&lt;/td&gt;
&lt;td align="right"&gt;4.7 x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-message-protocol" class="anchor" aria-hidden="true" href="#message-protocol"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Message Protocol&lt;/h2&gt;
&lt;p&gt;See the &lt;a href="MessageProtocol.md"&gt;message protocol documentation&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-other-info" class="anchor" aria-hidden="true" href="#other-info"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Other Info&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Anthony pointed me a talk by &lt;a href="https://github.com/gomoripeti"&gt;Péter Gömöri&lt;/a&gt; on
&lt;a href="http://www.erlang-factory.com/static/upload/media/1442407543231431thefunpartofwritingathriftcodec.pdf" rel="nofollow"&gt;The Fun Part of Writing a Thrift Codec&lt;/a&gt;,
which describes his work to speed up Thrift encoding and decoding.
Unfortunately, the code is not public.  The author claims the
following speedups:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;Optimization&lt;/th&gt;
&lt;th align="right"&gt;Decoding&lt;/th&gt;
&lt;th align="right"&gt;Encoding&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Layer Squashing&lt;/td&gt;
&lt;td align="right"&gt;2x&lt;/td&gt;
&lt;td align="right"&gt;8x&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;Generated Funs&lt;/td&gt;
&lt;td align="right"&gt;16x&lt;/td&gt;
&lt;td align="right"&gt;16x&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/dantswain/thrash"&gt;Thrash&lt;/a&gt; is an Elixir library
that automatically generates functions for decoding and encoding
Thrift messages using the binary protocol.  The author claims
speedups of 18x for decoding and 5x for encoding over the Apache
Thrift library.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/pinterest/elixir-thrift"&gt;elixir-thrift&lt;/a&gt; is another
Elixir Thrift library.  The author claims a speedup of between 10x and 25x
over the Apache Thrift library.  It appears that this library generates code
from the Thrift definition directly instead of using the structure
definitions that the Apache Thrift code generator produces as Thrash does.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Erlang documentation on
&lt;a href="http://erlang.org/doc/efficiency_guide/binaryhandling.html" rel="nofollow"&gt;Constructing and Matching Binaries&lt;/a&gt;,
which may be useful for optimization.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The
&lt;a href="https://thrift.apache.org/static/files/thrift-20070401.pdf" rel="nofollow"&gt;Thrift paper&lt;/a&gt;,
which describes the design and data encoding protocol for Thrift.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Erik van Oosten's
&lt;a href="https://erikvanoosten.github.io/thrift-missing-specification/" rel="nofollow"&gt;Thrift Specification -- Remote Procedure Call&lt;/a&gt;
(a.k.a, "Thrift: The Missing Specification").&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Andrew Prunicki's "Apache Thrift" overview has a &lt;a href="http://jnb.ociweb.com/jnb/jnbJun2009.html#compare" rel="nofollow"&gt;comparison of Thrift with
other protocols&lt;/a&gt; that
compares encoding size and has some benchmarks.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-acknowledgements" class="anchor" aria-hidden="true" href="#acknowledgements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Acknowledgements&lt;/h2&gt;
&lt;p&gt;Many thanks to &lt;a href="https://github.com/hirotnk"&gt;Yoshihiro Tanaka&lt;/a&gt;
and &lt;a href="https://github.com/djnym"&gt;Anthony Molinaro&lt;/a&gt; for their insights
and suggestions.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>openx</author><guid isPermaLink="false">https://github.com/openx/ox-thrift</guid><pubDate>Sun, 17 Nov 2019 00:09:00 GMT</pubDate></item><item><title>helium/blockchain-core #10 in Erlang, Today</title><link>https://github.com/helium/blockchain-core</link><description>&lt;p&gt;&lt;i&gt;[No description found.]&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-helium-blockchain-core" class="anchor" aria-hidden="true" href="#helium-blockchain-core"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Helium Blockchain Core&lt;/h1&gt;
&lt;p&gt;The Helium Blockchain Core is a library that other Helium blockchain applications such as &lt;a href="https://github.com/helium/miner"&gt;miner&lt;/a&gt; and &lt;a href="https://github.com/helium/blockchain-api"&gt;blockchain-api&lt;/a&gt; depend on.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://buildkite.com/helium/blockchain-core" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/76082a449dafffddfd01ef0165df34fec9eb51fa/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f30643430346464643931666438626166643836376266653438373031343431333836343936353037333530363836366231342e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://badge.buildkite.com/0d404ddd91fd8bafd867bfe487014413864965073506866b14.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://codecov.io/gh/helium/blockchain-core" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/3f5fdcbff933d57054138c2b4c6dc017a0e04d5e/68747470733a2f2f636f6465636f762e696f2f67682f68656c69756d2f626c6f636b636861696e2d636f72652f6272616e63682f6d61737465722f67726170682f62616467652e7376673f746f6b656e3d576d33774b6c78506952" alt="codecov" data-canonical-src="https://codecov.io/gh/helium/blockchain-core/branch/master/graph/badge.svg?token=Wm3wKlxPiR" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;For a detailed explanation of how the network works please see the &lt;a href="https://" rel="nofollow"&gt;Helium Network Guide&lt;/a&gt;.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>helium</author><guid isPermaLink="false">https://github.com/helium/blockchain-core</guid><pubDate>Sun, 17 Nov 2019 00:10:00 GMT</pubDate></item><item><title>lpgauth/shackle #11 in Erlang, Today</title><link>https://github.com/lpgauth/shackle</link><description>&lt;p&gt;&lt;i&gt;High-Performance Erlang Network Client Framework&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-shackle" class="anchor" aria-hidden="true" href="#shackle"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;shackle&lt;/h1&gt;
&lt;p&gt;High-Performance Erlang Network Client Framework&lt;/p&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/lpgauth/shackle" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/c55d13363616814193c566391076f65d83fad404/68747470733a2f2f7472617669732d63692e6f72672f6c7067617574682f736861636b6c652e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/lpgauth/shackle.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://coveralls.io/github/lpgauth/shackle?branch=master" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/47abeec582f10475cf9478ae0fcd9e5a6c0a91bb/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6c7067617574682f736861636b6c652f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/lpgauth/shackle/badge.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-requirements" class="anchor" aria-hidden="true" href="#requirements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Requirements&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Erlang 16.0+&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-features" class="anchor" aria-hidden="true" href="#features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Features&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Backpressure via backlog (OOM protection)&lt;/li&gt;
&lt;li&gt;Fast pool implementation (random, round_robin)&lt;/li&gt;
&lt;li&gt;Managed timeouts&lt;/li&gt;
&lt;li&gt;Multi-protocol support (SSL / TCP / UDP)&lt;/li&gt;
&lt;li&gt;Performance-optimized&lt;/li&gt;
&lt;li&gt;Request pipelining&lt;/li&gt;
&lt;li&gt;Smart reconnect mechanism (exponential backoff)&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;&lt;a id="user-content-framework-goals" class="anchor" aria-hidden="true" href="#framework-goals"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Framework goals&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Reusability&lt;/li&gt;
&lt;li&gt;Speed&lt;/li&gt;
&lt;li&gt;Concurrency&lt;/li&gt;
&lt;li&gt;Safety&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-environment-variables" class="anchor" aria-hidden="true" href="#environment-variables"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Environment variables&lt;/h2&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Type&lt;/th&gt;
    &lt;th&gt;Default&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;hooks&lt;/td&gt;
    &lt;td&gt;[{atom(), {module(), atom()}}]&lt;/td&gt;
    &lt;td&gt;[]&lt;/td&gt;
    &lt;td&gt;used to receive events/metrics about your client&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-how-to" class="anchor" aria-hidden="true" href="#how-to"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How-to&lt;/h2&gt;
&lt;h4&gt;&lt;a id="user-content-implementing-a-client" class="anchor" aria-hidden="true" href="#implementing-a-client"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Implementing a client&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;behavior&lt;/span&gt;(&lt;span class="pl-c1"&gt;shackle_client&lt;/span&gt;).
-&lt;span class="pl-k"&gt;export&lt;/span&gt;([
    &lt;span class="pl-en"&gt;init&lt;/span&gt;/&lt;span class="pl-c1"&gt;0&lt;/span&gt;,
    &lt;span class="pl-en"&gt;setup&lt;/span&gt;/&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
    &lt;span class="pl-en"&gt;handle_request&lt;/span&gt;/&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
    &lt;span class="pl-en"&gt;handle_data&lt;/span&gt;/&lt;span class="pl-c1"&gt;2&lt;/span&gt;,
    &lt;span class="pl-en"&gt;terminate&lt;/span&gt;/&lt;span class="pl-c1"&gt;1&lt;/span&gt;
]).

-&lt;span class="pl-k"&gt;record&lt;/span&gt;(&lt;span class="pl-en"&gt;state&lt;/span&gt;, {
    &lt;span class="pl-smi"&gt;buffer&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt;       &amp;lt;&amp;lt;&amp;gt;&amp;gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;binary&lt;/span&gt;(),
    &lt;span class="pl-smi"&gt;request_counter&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;0&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;non_neg_integer&lt;/span&gt;()
}).

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;init&lt;/span&gt;(&lt;span class="pl-smi"&gt;Options&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()} |
    {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()}.

&lt;span class="pl-en"&gt;init&lt;/span&gt;(&lt;span class="pl-smi"&gt;_Options&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;state&lt;/span&gt; {}}.

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;setup&lt;/span&gt;(&lt;span class="pl-smi"&gt;Socket&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;inet&lt;/span&gt;:&lt;span class="pl-en"&gt;socket&lt;/span&gt;(), &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()} |
    {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;(), &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()}.

&lt;span class="pl-en"&gt;setup&lt;/span&gt;(&lt;span class="pl-smi"&gt;Socket&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-k"&gt;case&lt;/span&gt; &lt;span class="pl-en"&gt;gen_tcp&lt;/span&gt;:&lt;span class="pl-en"&gt;send&lt;/span&gt;(&lt;span class="pl-smi"&gt;Socket&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;INIT&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;) &lt;span class="pl-k"&gt;of&lt;/span&gt;
        &lt;span class="pl-c1"&gt;ok&lt;/span&gt; -&amp;gt;
            &lt;span class="pl-k"&gt;case&lt;/span&gt; &lt;span class="pl-en"&gt;gen_tcp&lt;/span&gt;:&lt;span class="pl-en"&gt;recv&lt;/span&gt;(&lt;span class="pl-smi"&gt;Socket&lt;/span&gt;, &lt;span class="pl-c1"&gt;0&lt;/span&gt;) &lt;span class="pl-k"&gt;of&lt;/span&gt;
                {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;OK&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;} -&amp;gt;
                    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;};
                {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt;} -&amp;gt;
                    {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;}
            &lt;span class="pl-k"&gt;end&lt;/span&gt;;
        {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt;} -&amp;gt;
            {&lt;span class="pl-c1"&gt;error&lt;/span&gt;, &lt;span class="pl-smi"&gt;Reason&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;}
    &lt;span class="pl-k"&gt;end&lt;/span&gt;.

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;handle_request&lt;/span&gt;(&lt;span class="pl-smi"&gt;Request&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;(), &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;RequestId&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;external_request_id&lt;/span&gt;(), &lt;span class="pl-smi"&gt;Data&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;iodata&lt;/span&gt;(), &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()}.

&lt;span class="pl-en"&gt;handle_request&lt;/span&gt;({&lt;span class="pl-smi"&gt;Operation&lt;/span&gt;, &lt;span class="pl-smi"&gt;A&lt;/span&gt;, &lt;span class="pl-smi"&gt;B&lt;/span&gt;}, &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;state&lt;/span&gt; {
        &lt;span class="pl-smi"&gt;request_counter&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;RequestCounter&lt;/span&gt;
    } &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;State&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;

    &lt;span class="pl-smi"&gt;RequestId&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;request_id&lt;/span&gt;(&lt;span class="pl-smi"&gt;RequestCounter&lt;/span&gt;),
    &lt;span class="pl-smi"&gt;Data&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;request&lt;/span&gt;(&lt;span class="pl-smi"&gt;RequestId&lt;/span&gt;, &lt;span class="pl-smi"&gt;Operation&lt;/span&gt;, &lt;span class="pl-smi"&gt;A&lt;/span&gt;, &lt;span class="pl-smi"&gt;B&lt;/span&gt;),

    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;RequestId&lt;/span&gt;, &lt;span class="pl-smi"&gt;Data&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;state&lt;/span&gt; {
        &lt;span class="pl-smi"&gt;request_counter&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;RequestCounter&lt;/span&gt; &lt;span class="pl-k"&gt;+&lt;/span&gt; &lt;span class="pl-c1"&gt;1&lt;/span&gt;
    }}.

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;handle_data&lt;/span&gt;(&lt;span class="pl-smi"&gt;Data&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;binary&lt;/span&gt;(), &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, [{&lt;span class="pl-smi"&gt;RequestId&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;external_request_id&lt;/span&gt;(), &lt;span class="pl-smi"&gt;Reply&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()}], &lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()}.

&lt;span class="pl-en"&gt;handle_data&lt;/span&gt;(&lt;span class="pl-smi"&gt;Data&lt;/span&gt;, &lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;state&lt;/span&gt; {
        &lt;span class="pl-smi"&gt;buffer&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;Buffer&lt;/span&gt;
    } &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;State&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;

    &lt;span class="pl-smi"&gt;Data2&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &amp;lt;&amp;lt;&lt;span class="pl-smi"&gt;Buffer&lt;/span&gt;/&lt;span class="pl-k"&gt;binary&lt;/span&gt;, &lt;span class="pl-smi"&gt;Data&lt;/span&gt;/&lt;span class="pl-k"&gt;binary&lt;/span&gt;&amp;gt;&amp;gt;,
    {&lt;span class="pl-smi"&gt;Replies&lt;/span&gt;, &lt;span class="pl-smi"&gt;Buffer2&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;parse_replies&lt;/span&gt;(&lt;span class="pl-smi"&gt;Data2&lt;/span&gt;, []),

    {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;Replies&lt;/span&gt;, &lt;span class="pl-smi"&gt;State&lt;/span&gt;&lt;span class="pl-k"&gt;#&lt;/span&gt;&lt;span class="pl-en"&gt;state&lt;/span&gt; {
        &lt;span class="pl-smi"&gt;buffer&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-smi"&gt;Buffer2&lt;/span&gt;
    }}.

-&lt;span class="pl-k"&gt;spec&lt;/span&gt; &lt;span class="pl-en"&gt;terminate&lt;/span&gt;(&lt;span class="pl-smi"&gt;State&lt;/span&gt; &lt;span class="pl-k"&gt;::&lt;/span&gt; &lt;span class="pl-en"&gt;term&lt;/span&gt;()) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;ok&lt;/span&gt;.

&lt;span class="pl-en"&gt;terminate&lt;/span&gt;(&lt;span class="pl-smi"&gt;_State&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="pl-c1"&gt;ok&lt;/span&gt;.&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-starting-client-pool" class="anchor" aria-hidden="true" href="#starting-client-pool"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Starting client pool&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-en"&gt;shackle_pool&lt;/span&gt;:&lt;span class="pl-en"&gt;start&lt;/span&gt;(&lt;span class="pl-en"&gt;pool_name&lt;/span&gt;(), &lt;span class="pl-en"&gt;client&lt;/span&gt;(), &lt;span class="pl-en"&gt;client_options&lt;/span&gt;(), &lt;span class="pl-en"&gt;pool_options&lt;/span&gt;())&lt;/pre&gt;&lt;/div&gt;
&lt;h5&gt;&lt;a id="user-content-client_options" class="anchor" aria-hidden="true" href="#client_options"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;client_options()&lt;/h5&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Type&lt;/th&gt;
    &lt;th&gt;Default&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;ip&lt;/td&gt;
    &lt;td&gt;inet:ip_address() | inet:hostname()&lt;/td&gt;
    &lt;td&gt;"127.0.0.1"&lt;/td&gt;
    &lt;td&gt;server ip&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;port&lt;/td&gt;
    &lt;td&gt;inet:port_number()&lt;/td&gt;
    &lt;td&gt;undefined&lt;/td&gt;
    &lt;td&gt;server port&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;protocol&lt;/td&gt;
    &lt;td&gt;shackle_tcp | shackle_udp&lt;/td&gt;
    &lt;td&gt;shackle_tcp&lt;/td&gt;
    &lt;td&gt;server protocol&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;reconnect&lt;/td&gt;
    &lt;td&gt;boolean()&lt;/td&gt;
    &lt;td&gt;true&lt;/td&gt;
    &lt;td&gt;reconnect closed connections&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;reconnect_time_max&lt;/td&gt;
    &lt;td&gt;pos_integer() | infinity&lt;/td&gt;
    &lt;td&gt;120000&lt;/td&gt;
    &lt;td&gt;maximum reconnect time in milliseconds&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;reconnect_time_min&lt;/td&gt;
    &lt;td&gt;none | pos_integer()&lt;/td&gt;
    &lt;td&gt;1000&lt;/td&gt;
    &lt;td&gt;minimum reconnect time in milliseconds&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;socket_options&lt;/td&gt;
    &lt;td&gt;[gen_tcp:connect_option() | gen_udp:option()]&lt;/td&gt;
    &lt;td&gt;[]&lt;/td&gt;
    &lt;td&gt;options passed to the socket&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h5&gt;&lt;a id="user-content-pool_options" class="anchor" aria-hidden="true" href="#pool_options"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;pool_options()&lt;/h5&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Type&lt;/th&gt;
    &lt;th&gt;Default&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;backlog_size&lt;/td&gt;
    &lt;td&gt;pos_integer() | infinity&lt;/td&gt;
    &lt;td&gt;1024&lt;/td&gt;
    &lt;td&gt;maximum number of concurrent requests per connection&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;max_retries&lt;/td&gt;
    &lt;td&gt;non_neg_integer()&lt;/td&gt;
    &lt;td&gt;3&lt;/td&gt;
    &lt;td&gt;&amp;gt;maximum number of tries to find an active server&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;pool_size&lt;/td&gt;
    &lt;td&gt;pos_integer()&lt;/td&gt;
    &lt;td&gt;16&lt;/td&gt;
    &lt;td&gt;number of connections&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;pool_strategy&lt;/td&gt;
    &lt;td&gt;random | round_robin&lt;/td&gt;
    &lt;td&gt;random&lt;/td&gt;
    &lt;td&gt;connection selection strategy&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h4&gt;&lt;a id="user-content-calling--casting-client" class="anchor" aria-hidden="true" href="#calling--casting-client"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Calling / Casting client&lt;/h4&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;&lt;span class="pl-c1"&gt;1&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;shackle&lt;/span&gt;:&lt;span class="pl-en"&gt;call&lt;/span&gt;(&lt;span class="pl-c1"&gt;pool_name&lt;/span&gt;, {&lt;span class="pl-c1"&gt;get&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}

&lt;span class="pl-c1"&gt;2&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; {&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &lt;span class="pl-smi"&gt;ReqId&lt;/span&gt;} &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-en"&gt;shackle&lt;/span&gt;:&lt;span class="pl-en"&gt;cast&lt;/span&gt;(&lt;span class="pl-c1"&gt;pool_name&lt;/span&gt;, {&lt;span class="pl-c1"&gt;get&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}, &lt;span class="pl-c1"&gt;500&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, {&lt;span class="pl-c1"&gt;anchor&lt;/span&gt;, &lt;span class="pl-c1"&gt;anchor_client&lt;/span&gt;, #&lt;span class="pl-smi"&gt;Ref&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;&lt;span class="pl-c1"&gt;0.0&lt;/span&gt;.&lt;span class="pl-c1"&gt;0.2407&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;}}

&lt;span class="pl-c1"&gt;3&lt;/span&gt;&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; &lt;span class="pl-en"&gt;shackle&lt;/span&gt;:&lt;span class="pl-en"&gt;receive_response&lt;/span&gt;(&lt;span class="pl-smi"&gt;ReqId&lt;/span&gt;).
{&lt;span class="pl-c1"&gt;ok&lt;/span&gt;, &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;}&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-hooks" class="anchor" aria-hidden="true" href="#hooks"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hooks&lt;/h2&gt;
&lt;p&gt;Hooks allow you to receive events and metrics about your client. To do so you need to implement the &lt;code&gt;shackle_hooks&lt;/code&gt; behaviour and then use the &lt;code&gt;hooks&lt;/code&gt; environment variable.&lt;/p&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;-&lt;span class="pl-k"&gt;module&lt;/span&gt;(&lt;span class="pl-en"&gt;my_client_hooks&lt;/span&gt;).

-&lt;span class="pl-k"&gt;behaviour&lt;/span&gt;(&lt;span class="pl-en"&gt;shackle_hooks&lt;/span&gt;).
-&lt;span class="pl-k"&gt;export&lt;/span&gt;([
    &lt;span class="pl-en"&gt;metrics&lt;/span&gt;/&lt;span class="pl-c1"&gt;4&lt;/span&gt;
]).

&lt;span class="pl-en"&gt;metrics&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-c1"&gt;counter&lt;/span&gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;, &lt;span class="pl-smi"&gt;Value&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-en"&gt;statsderl&lt;/span&gt;:&lt;span class="pl-en"&gt;increment&lt;/span&gt;(&lt;span class="pl-en"&gt;key&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;), &lt;span class="pl-smi"&gt;Value&lt;/span&gt;, &lt;span class="pl-c1"&gt;0.005&lt;/span&gt;);
&lt;span class="pl-en"&gt;metrics&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-c1"&gt;timing&lt;/span&gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;, &lt;span class="pl-smi"&gt;Value&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    &lt;span class="pl-en"&gt;statsderl&lt;/span&gt;:&lt;span class="pl-en"&gt;timing&lt;/span&gt;(&lt;span class="pl-en"&gt;key&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;), &lt;span class="pl-smi"&gt;Value&lt;/span&gt;, &lt;span class="pl-c1"&gt;0.005&lt;/span&gt;).

&lt;span class="pl-en"&gt;key&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;) &lt;span class="pl-k"&gt;-&amp;gt;&lt;/span&gt;
    [&amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;shackle.&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class="pl-en"&gt;atom_to_binary&lt;/span&gt;(&lt;span class="pl-smi"&gt;Client&lt;/span&gt;, &lt;span class="pl-c1"&gt;latin1&lt;/span&gt;), &amp;lt;&amp;lt;&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;.&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&amp;gt;&amp;gt;, &lt;span class="pl-smi"&gt;Key&lt;/span&gt;].&lt;/pre&gt;&lt;/div&gt;
&lt;div class="highlight highlight-source-erlang"&gt;&lt;pre&gt;{&lt;span class="pl-c1"&gt;shackle&lt;/span&gt;, [
  {&lt;span class="pl-c1"&gt;hooks&lt;/span&gt;, [
    {&lt;span class="pl-c1"&gt;metrics&lt;/span&gt; {&lt;span class="pl-c1"&gt;my_client_hooks&lt;/span&gt;, &lt;span class="pl-c1"&gt;metrics&lt;/span&gt;}}
  ]}
]}&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tests&lt;/h2&gt;
&lt;div class="highlight highlight-source-makefile"&gt;&lt;pre&gt;make dialyzer
make elvis
make eunit
make xref&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-performance-testing" class="anchor" aria-hidden="true" href="#performance-testing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Performance testing&lt;/h2&gt;
&lt;p&gt;To run performance testing targets you must first start the server:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./bin/rebar3 as test shell
===&amp;gt; Verifying dependencies...
===&amp;gt; Compiling shackle
Erlang/OTP 18 [erts-7.3.1] [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false] [dtrace]

Eshell V7.3.1  (abort with ^G)
1&amp;gt; arithmetic_tcp_server:start().
ok
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Then you can run the &lt;code&gt;bench&lt;/code&gt; or &lt;code&gt;profile&lt;/code&gt; target:&lt;/p&gt;
&lt;div class="highlight highlight-source-makefile"&gt;&lt;pre&gt;make bench
make profile&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-clients" class="anchor" aria-hidden="true" href="#clients"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Clients&lt;/h2&gt;

    &lt;table width="100%"&gt;
  &lt;tbody&gt;&lt;tr&gt;&lt;th&gt;Name&lt;/th&gt;
    &lt;th&gt;Description&lt;/th&gt;
  
  &lt;/tr&gt;&lt;tr&gt;
    &lt;td&gt;&lt;a href="https://github.com/lpgauth/anchor"&gt;anchor&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;Memcached Client&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;a href="https://github.com/lpgauth/buoy"&gt;buoy&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;HTTP 1.1 Client&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;a href="https://github.com/lpgauth/flare"&gt;flare&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;Kafka Producer&lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;&lt;a href="https://github.com/lpgauth/marina"&gt;marina&lt;/a&gt;&lt;/td&gt;
    &lt;td&gt;Cassandra CQL Client&lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;pre lang="license"&gt;&lt;code&gt;The MIT License (MIT)

Copyright (c) 2015-2017 Louis-Philippe Gauthier

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
&lt;/code&gt;&lt;/pre&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>lpgauth</author><guid isPermaLink="false">https://github.com/lpgauth/shackle</guid><pubDate>Sun, 17 Nov 2019 00:11:00 GMT</pubDate></item><item><title>ninenines/cowboy #12 in Erlang, Today</title><link>https://github.com/ninenines/cowboy</link><description>&lt;p&gt;&lt;i&gt;Small, fast, modern HTTP server for Erlang/OTP.&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body asciidoc" data-path="README.asciidoc"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-cowboy" class="anchor" aria-hidden="true" href="#cowboy"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Cowboy&lt;/h1&gt;
&lt;div id="user-content-preamble"&gt;
&lt;div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy is a small, fast and modern HTTP server for Erlang/OTP.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-goals"&gt;&lt;a id="user-content-goals" class="anchor" aria-hidden="true" href="#goals"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Goals&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy aims to provide a &lt;strong&gt;complete&lt;/strong&gt; HTTP stack in a &lt;strong&gt;small&lt;/strong&gt; code base.
It is optimized for &lt;strong&gt;low latency&lt;/strong&gt; and &lt;strong&gt;low memory usage&lt;/strong&gt;, in part
because it uses &lt;strong&gt;binary strings&lt;/strong&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy provides &lt;strong&gt;routing&lt;/strong&gt; capabilities, selectively dispatching requests
to handlers written in Erlang.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Because it uses Ranch for managing connections, Cowboy can easily be
&lt;strong&gt;embedded&lt;/strong&gt; in any other application.&lt;/p&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;p&gt;Cowboy is &lt;strong&gt;clean&lt;/strong&gt; and &lt;strong&gt;well tested&lt;/strong&gt; Erlang code.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-online-documentation"&gt;&lt;a id="user-content-online-documentation" class="anchor" aria-hidden="true" href="#online-documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Online documentation&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/docs/en/cowboy/2.6/guide" rel="nofollow"&gt;User guide&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/docs/en/cowboy/2.6/manual" rel="nofollow"&gt;Function reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-offline-documentation"&gt;&lt;a id="user-content-offline-documentation" class="anchor" aria-hidden="true" href="#offline-documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Offline documentation&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;While still online, run &lt;code&gt;make docs&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;User guide available in &lt;code&gt;doc/&lt;/code&gt; in PDF and HTML formats&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Function reference man pages available in &lt;code&gt;doc/man3/&lt;/code&gt; and &lt;code&gt;doc/man7/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Run &lt;code&gt;make install-docs&lt;/code&gt; to install man pages on your system&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Full documentation in Asciidoc available in &lt;code&gt;doc/src/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Examples available in &lt;code&gt;examples/&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;
&lt;h2 id="user-content-getting-help"&gt;&lt;a id="user-content-getting-help" class="anchor" aria-hidden="true" href="#getting-help"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting help&lt;/h2&gt;
&lt;div&gt;
&lt;div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Official IRC Channel: #ninenines on irc.freenode.net&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://github.com/ninenines/cowboy/issues"&gt;Issues tracker&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="https://ninenines.eu/services" rel="nofollow"&gt;Commercial Support&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;/article&gt;&lt;/div&gt;</description><author>ninenines</author><guid isPermaLink="false">https://github.com/ninenines/cowboy</guid><pubDate>Sun, 17 Nov 2019 00:12:00 GMT</pubDate></item><item><title>processone/ejabberd #13 in Erlang, Today</title><link>https://github.com/processone/ejabberd</link><description>&lt;p&gt;&lt;i&gt;Robust, Ubiquitous and Massively Scalable Messaging Platform (XMPP, MQTT, SIP Server)&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-ejabberd-community-edition" class="anchor" aria-hidden="true" href="#ejabberd-community-edition"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ejabberd Community Edition&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/processone/ejabberd" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/e26f2673232de92b391dd11071ea48f8ea6d283a/68747470733a2f2f7472617669732d63692e6f72672f70726f636573736f6e652f656a6162626572642e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/processone/ejabberd.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt; &lt;a href="https://hex.pm/packages/ejabberd" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/3bfccfbe74dee9451b013e8afe247470e2857bdd/68747470733a2f2f696d672e736869656c64732e696f2f686578706d2f762f656a6162626572642e737667" alt="Hex version" title="Hex version" data-canonical-src="https://img.shields.io/hexpm/v/ejabberd.svg" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ejabberd is a distributed, fault-tolerant technology that allows the creation
of large-scale instant messaging applications. The server can reliably support
thousands of simultaneous users on a single node and has been designed to
provide exceptional standards of fault tolerance. As an open source
technology, based on industry-standards, ejabberd can be used to build bespoke
solutions very cost effectively.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-key-features" class="anchor" aria-hidden="true" href="#key-features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Key Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Cross-platform&lt;/strong&gt;
ejabberd runs under Microsoft Windows and Unix-derived systems such as
Linux, FreeBSD and NetBSD.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Distributed&lt;/strong&gt;
You can run ejabberd on a cluster of machines and all of them will serve the
same XMPP domain(s). When you need more capacity you can simply add a new
cheap node to your cluster. Accordingly, you do not need to buy an expensive
high-end machine to support tens of thousands concurrent users.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Fault-tolerant&lt;/strong&gt;
You can deploy an ejabberd cluster so that all the information required for
a properly working service will be replicated permanently on all nodes. This
means that if one of the nodes crashes, the others will continue working
without disruption. In addition, nodes also can be added or replaced ‘on
the fly’.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Administrator-friendly&lt;/strong&gt;
ejabberd is built on top of the Open Source Erlang. As a result you do not
need to install an external database, an external web server, amongst others
because everything is already included, and ready to run out of the box.
Other administrator benefits include:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Comprehensive documentation.&lt;/li&gt;
&lt;li&gt;Straightforward installers for Linux and Mac OS X.&lt;/li&gt;
&lt;li&gt;Web administration.&lt;/li&gt;
&lt;li&gt;Shared roster groups.&lt;/li&gt;
&lt;li&gt;Command line administration tool.&lt;/li&gt;
&lt;li&gt;Can integrate with existing authentication mechanisms.&lt;/li&gt;
&lt;li&gt;Capability to send announce messages.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Internationalized&lt;/strong&gt;
ejabberd leads in internationalization. Hence it is very well suited in a
globalized world. Related features are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Translated to 25 languages.&lt;/li&gt;
&lt;li&gt;Support for IDNA.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Open Standards&lt;/strong&gt;
ejabberd is the first Open Source Jabber server claiming to fully comply to
the XMPP standard.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Fully XMPP-compliant.&lt;/li&gt;
&lt;li&gt;XML-based protocol.&lt;/li&gt;
&lt;li&gt;Many protocols supported.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-additional-features" class="anchor" aria-hidden="true" href="#additional-features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Additional Features&lt;/h2&gt;
&lt;p&gt;Moreover, ejabberd comes with a wide range of other state-of-the-art features:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Modularity&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Load only the modules you want.&lt;/li&gt;
&lt;li&gt;Extend ejabberd with your own custom modules.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Security&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SASL and STARTTLS for c2s and s2s connections.&lt;/li&gt;
&lt;li&gt;STARTTLS and Dialback s2s connections.&lt;/li&gt;
&lt;li&gt;Web Admin accessible via HTTPS secure access.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Databases&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Internal database for fast deployment (Mnesia).&lt;/li&gt;
&lt;li&gt;Native MySQL support.&lt;/li&gt;
&lt;li&gt;Native PostgreSQL support.&lt;/li&gt;
&lt;li&gt;ODBC data storage support.&lt;/li&gt;
&lt;li&gt;Microsoft SQL Server support.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Authentication&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Internal authentication.&lt;/li&gt;
&lt;li&gt;PAM, LDAP and ODBC.&lt;/li&gt;
&lt;li&gt;External authentication script.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Others&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Support for virtual hosting.&lt;/li&gt;
&lt;li&gt;Compressing XML streams with Stream Compression (XEP-0138).&lt;/li&gt;
&lt;li&gt;Statistics via Statistics Gathering (XEP-0039).&lt;/li&gt;
&lt;li&gt;IPv6 support both for c2s and s2s connections.&lt;/li&gt;
&lt;li&gt;Multi-User Chat module with support for clustering and HTML logging.&lt;/li&gt;
&lt;li&gt;Users Directory based on users vCards.&lt;/li&gt;
&lt;li&gt;Publish-Subscribe component with support for Personal Eventing.&lt;/li&gt;
&lt;li&gt;Support for web clients: HTTP Polling and HTTP Binding (BOSH).&lt;/li&gt;
&lt;li&gt;Component support: interface with networks such as AIM, ICQ and MSN.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-quickstart-guide" class="anchor" aria-hidden="true" href="#quickstart-guide"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart guide&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-0-requirements" class="anchor" aria-hidden="true" href="#0-requirements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;0. Requirements&lt;/h3&gt;
&lt;p&gt;To compile ejabberd you need:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GNU Make.&lt;/li&gt;
&lt;li&gt;GCC.&lt;/li&gt;
&lt;li&gt;Libexpat ≥ 1.95.&lt;/li&gt;
&lt;li&gt;Libyaml ≥ 0.1.4.&lt;/li&gt;
&lt;li&gt;Erlang/OTP ≥ 19.3.&lt;/li&gt;
&lt;li&gt;OpenSSL ≥ 1.0.0.&lt;/li&gt;
&lt;li&gt;Zlib ≥ 1.2.3, for Stream Compression support (XEP-0138). Optional.&lt;/li&gt;
&lt;li&gt;PAM library. Optional. For Pluggable Authentication Modules (PAM).&lt;/li&gt;
&lt;li&gt;ImageMagick's Convert program and Ghostscript fonts. Optional. For CAPTCHA
challenges.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If your system splits packages in libraries and development headers, you must
install the development packages also.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-1-compile-and-install-on-nix-systems" class="anchor" aria-hidden="true" href="#1-compile-and-install-on-nix-systems"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;1. Compile and install on *nix systems&lt;/h3&gt;
&lt;p&gt;To compile ejabberd, execute the following commands.  The first one is only
necessary if your source tree didn't come with a &lt;code&gt;configure&lt;/code&gt; script (In this
case you need autoconf installed).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;./autogen.sh
./configure
make
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To install ejabberd, run this command with system administrator rights (root
user):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;sudo make install
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;These commands will:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install the configuration files in &lt;code&gt;/etc/ejabberd/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install ejabberd binary, header and runtime files in &lt;code&gt;/lib/ejabberd/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install the administration script: &lt;code&gt;/sbin/ejabberdctl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Install ejabberd documentation in &lt;code&gt;/share/doc/ejabberd/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a spool directory: &lt;code&gt;/var/lib/ejabberd/&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Create a directory for log files: &lt;code&gt;/var/log/ejabberd/&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-2-start-ejabberd" class="anchor" aria-hidden="true" href="#2-start-ejabberd"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;2. Start ejabberd&lt;/h3&gt;
&lt;p&gt;You can use the &lt;code&gt;ejabberdctl&lt;/code&gt; command line administration script to
start and stop ejabberd. For example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;ejabberdctl start
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For detailed information please refer to the ejabberd Installation and
Operation Guide available online and in the &lt;code&gt;doc&lt;/code&gt; directory of the source
tarball.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-development" class="anchor" aria-hidden="true" href="#development"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Development&lt;/h2&gt;
&lt;p&gt;In order to assist in the development of ejabberd, and particularly the
execution of the test suite, a Vagrant environment is available at
&lt;a href="https://github.com/processone/ejabberd-vagrant-dev"&gt;https://github.com/processone/ejabberd-vagrant-dev&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;To start ejabberd in development mode from the repository directory, you can
type a command like:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;EJABBERD_CONFIG_PATH=ejabberd.yml erl -pa ebin -pa deps/*/ebin -pa test -pa deps/elixir/lib/*/ebin/ -s ejabberd
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id="user-content-links" class="anchor" aria-hidden="true" href="#links"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Links&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Documentation: &lt;a href="https://docs.ejabberd.im" rel="nofollow"&gt;https://docs.ejabberd.im&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Community site: &lt;a href="https://www.ejabberd.im" rel="nofollow"&gt;https://www.ejabberd.im&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ejabberd commercial offering and support: &lt;a href="https://www.process-one.net/en/ejabberd" rel="nofollow"&gt;https://www.process-one.net/en/ejabberd&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>processone</author><guid isPermaLink="false">https://github.com/processone/ejabberd</guid><pubDate>Sun, 17 Nov 2019 00:13:00 GMT</pubDate></item></channel></rss>
<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>GitHub Trending: Lua, Today</title><link>https://github.com/trending/lua?since=daily</link><description>The top repositories on GitHub for lua, measured daily</description><pubDate>Fri, 06 Dec 2019 01:04:09 GMT</pubDate><lastBuildDate>Fri, 06 Dec 2019 01:04:09 GMT</lastBuildDate><generator>PyRSS2Gen-1.1.0</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><ttl>720</ttl><item><title>apache/incubator-apisix #1 in Lua, Today</title><link>https://github.com/apache/incubator-apisix</link><description>&lt;p&gt;&lt;i&gt;Cloud-Native Microservices API Gateway&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;
&lt;p&gt;&lt;a href="README_CN.md"&gt;Chinese&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-apisix" class="anchor" aria-hidden="true" href="#apisix"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;APISIX&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/apache/incubator-apisix" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/1ed9f512514c97c413e71e4c8f5240edeefb11fc/68747470733a2f2f7472617669732d63692e6f72672f6170616368652f696e63756261746f722d6170697369782e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/apache/incubator-apisix.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://github.com/apache/incubator-apisix/blob/master/LICENSE"&gt;&lt;img src="https://camo.githubusercontent.com/8051e9938a1ab39cf002818dfceb6b6092f34d68/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;QQ group&lt;/strong&gt;: 552030619&lt;/li&gt;
&lt;li&gt;Mail list: Mail to &lt;a href="mailto:dev-subscribe@apisix.apache.org"&gt;dev-subscribe@apisix.apache.org&lt;/a&gt;, follow the reply to subscribe the mail list.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://gitter.im/apisix/community?utm_source=badge&amp;amp;utm_medium=badge&amp;amp;utm_campaign=pr-badge" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/568da9652db68475b3c235e1274c91d42c378149/68747470733a2f2f6261646765732e6769747465722e696d2f6170697369782f636f6d6d756e6974792e737667" alt="Gitter" data-canonical-src="https://badges.gitter.im/apisix/community.svg" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://twitter.com/intent/follow?screen_name=apisixfast" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/8aeaef778a0e54bb395d635f5b1bfdf8a48abde2/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f617069736978666173742e7376673f7374796c653d736f6369616c266c6162656c3d466f6c6c6f77" alt="Twitter" data-canonical-src="https://img.shields.io/twitter/follow/apisixfast.svg?style=social&amp;amp;label=Follow" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;APISIX is a cloud-native microservices API gateway, delivering the ultimate performance, security, open source and scalable platform for all your APIs and microservices.&lt;/p&gt;
&lt;p&gt;APISIX is based on Nginx and etcd. Compared with traditional API gateways, APISIX has dynamic routing and plug-in hot loading, which is especially suitable for API management under micro-service system.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-why-apisix" class="anchor" aria-hidden="true" href="#why-apisix"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why APISIX?&lt;/h2&gt;
&lt;p&gt;If you are building a website, mobile device or IoT (Internet of Things) application, you may need to use an API gateway to handle interface traffic.&lt;/p&gt;
&lt;p&gt;APISIX is a cloud-based microservices API gateway that handles traditional north-south traffic and handles east-west traffic between services.&lt;/p&gt;
&lt;p&gt;APISIX provides dynamic load balancing, authentication, rate limiting, other plugins through plugin mechanisms, and supports plugins you develop yourself.&lt;/p&gt;
&lt;p&gt;For more detailed information, see the &lt;a href="https://www.iresty.com/download/Choosing%20the%20Right%20Microservice%20API%20Gateway%20for%20the%20Enterprise%20User.pdf" rel="nofollow"&gt;White Paper&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="doc/images/apisix.png"&gt;&lt;img src="doc/images/apisix.png" alt="" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-features" class="anchor" aria-hidden="true" href="#features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Run Environment&lt;/strong&gt;: Both OpenResty and Tengine are supported.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloud-Native&lt;/strong&gt;: Platform agnostic, No vendor lock-in, APISIX can run from bare-metal to Kubernetes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins.md"&gt;Hot Updates And Hot Plugins&lt;/a&gt;&lt;/strong&gt;: Continuously updates its configurations and plugins without restarts!&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dynamic Load Balancing&lt;/strong&gt;: Round-robin load balancing with weight.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hash-based Load Balancing&lt;/strong&gt;: Load balance with consistent hashing sessions.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/https.md"&gt;SSL&lt;/a&gt;&lt;/strong&gt;: Dynamically load an SSL certificate.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP(S) Forward Proxy&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/health-check.md"&gt;Health Checks&lt;/a&gt;&lt;/strong&gt;：Enable health check on the upstream node, and will automatically filter unhealthy nodes during load balancing to ensure system stability.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Circuit-Breaker&lt;/strong&gt;: Intelligent tracking of unhealthy upstream services.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Authentications&lt;/strong&gt;: &lt;a href="doc/plugins/key-auth.md"&gt;key-auth&lt;/a&gt;, &lt;a href="doc/plugins/jwt-auth.md"&gt;JWT&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/limit-req.md"&gt;Limit-req&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/limit-count.md"&gt;Limit-count&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/limit-conn.md"&gt;Limit-concurrency&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/proxy-rewrite.md"&gt;Proxy Rewrite&lt;/a&gt;&lt;/strong&gt;: Support for rewriting the &lt;code&gt;host&lt;/code&gt;, &lt;code&gt;uri&lt;/code&gt;, &lt;code&gt;schema&lt;/code&gt;, &lt;code&gt;enable_websocket&lt;/code&gt;, &lt;code&gt;headers&lt;/code&gt; information upstream of the request.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OpenTracing: &lt;a href="doc/plugins/zipkin.md"&gt;support Apache Skywalking and Zipkin&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Monitoring And Metrics&lt;/strong&gt;: &lt;a href="doc/plugins/prometheus.md"&gt;Prometheus&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/grpc-proxy.md"&gt;gRPC proxy&lt;/a&gt;&lt;/strong&gt;：Proxying gRPC traffic.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/grpc-transcoding.md"&gt;gRPC transcoding&lt;/a&gt;&lt;/strong&gt;：Supports protocol transcoding so that clients can access your gRPC API by using HTTP/JSON.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/serverless.md"&gt;Serverless&lt;/a&gt;&lt;/strong&gt;: Invoke functions in each phase in APISIX.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Custom plugins&lt;/strong&gt;: Allows hooking of common phases, such as &lt;code&gt;rewrite&lt;/code&gt;, &lt;code&gt;access&lt;/code&gt;, &lt;code&gt;header filer&lt;/code&gt;, &lt;code&gt;body filter&lt;/code&gt; and &lt;code&gt;log&lt;/code&gt;, also allows to hook the &lt;code&gt;balancer&lt;/code&gt; stage.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dashboard&lt;/strong&gt;: Built-in dashboard to control APISIX.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Version Control&lt;/strong&gt;: Supports rollbacks of operations.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CLI&lt;/strong&gt;: start\stop\reload APISIX through the command line.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Proxy Websocket&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/response-rewrite.md"&gt;Response Rewrite&lt;/a&gt;&lt;/strong&gt;: Set customized response status code, body and header to the client.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPv6&lt;/strong&gt;: Use IPv6 to match route.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Clustering&lt;/strong&gt;: APISIX nodes are stateless, creates clustering of the configuration center, please refer to &lt;a href="https://github.com/etcd-io/etcd/blob/master/Documentation/v2/clustering.md"&gt;etcd Clustering Guide&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scalability&lt;/strong&gt;: plug-in mechanism is easy to extend.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;High performance&lt;/strong&gt;: The single-core QPS reaches 24k with an average delay of less than 0.6 milliseconds.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Anti-ReDoS(Regular expression Denial of Service)&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IP Whitelist/Blacklist&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IdP&lt;/strong&gt;: Support external authentication services, such as Auth0, okta, etc., users can use this to connect to Oauth2.0 and other authentication methods.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/stand-alone.md"&gt;Stand-alone mode&lt;/a&gt;&lt;/strong&gt;: Supports to load route rules from local yaml file, it is more friendly such as under the kubernetes(k8s).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Global Rule&lt;/strong&gt;: Allows to run any plugin for all request, eg: limit rate, IP filter etc.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/stream-proxy.md"&gt;TCP/UDP Proxy&lt;/a&gt;&lt;/strong&gt;: Dynamic TCP/UDP proxy.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="doc/plugins/mqtt-proxy.md"&gt;Dynamic MQTT Proxy&lt;/a&gt;&lt;/strong&gt;: Supports to load balance MQTT by &lt;code&gt;client_id&lt;/code&gt;, both support MQTT &lt;a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html" rel="nofollow"&gt;3.1.*&lt;/a&gt;, &lt;a href="https://docs.oasis-open.org/mqtt/mqtt/v5.0/mqtt-v5.0.html" rel="nofollow"&gt;5.0&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;p&gt;APISIX Installed and tested in the following systems(OpenResty MUST &amp;gt;= 1.15.8.1, or Tengine &amp;gt;= 2.3.2):&lt;/p&gt;
&lt;p&gt;CentOS 7, Ubuntu 16.04, Ubuntu 18.04, Debian 9, Debian 10, macOS, &lt;strong&gt;ARM64&lt;/strong&gt; Ubuntu 18.04&lt;/p&gt;
&lt;p&gt;Steps to install APISIX:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Installation runtime dependencies: OpenResty and etcd, refer to &lt;a href="doc/install-dependencies.md"&gt;documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;There are several ways to install Apache APISIX:
&lt;ul&gt;
&lt;li&gt;&lt;a href="doc/how-to-build.md#installation-via-source-release"&gt;Source Release&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="doc/how-to-build.md#installation-via-rpm-package-centos-7"&gt;RPM package&lt;/a&gt; for CentOS 7&lt;/li&gt;
&lt;li&gt;&lt;a href="doc/how-to-build.md#installation-via-luarocks-macos-not-supported"&gt;Luarocks&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/apache/incubator-apisix-docker"&gt;Docker&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;&lt;a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;start server:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;sudo apisix start&lt;/pre&gt;&lt;/div&gt;
&lt;ol start="2"&gt;
&lt;li&gt;try limit count plugin&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Limit count plugin is a good start to try APISIX,
you can follow the &lt;a href="doc/plugins/limit-count.md"&gt;documentation of limit count&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then you can try more &lt;a href="doc/README.md#plugins"&gt;plugins&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-dashboard" class="anchor" aria-hidden="true" href="#dashboard"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dashboard&lt;/h2&gt;
&lt;p&gt;APISIX has built-in support for dashboards, as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Download the source code of &lt;a href="https://github.com/apache/incubator-apisix-dashboard"&gt;dashboard&lt;/a&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;git clone https://github.com/apache/incubator-apisix-dashboard.git
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Install dependencies and compile&lt;/li&gt;
&lt;/ul&gt;
&lt;pre&gt;&lt;code&gt;yarn install
yarn run build: prod
&lt;/code&gt;&lt;/pre&gt;
&lt;ul&gt;
&lt;li&gt;Integration with APISIX
Copy the compiled files to the apisix / dashboard directory,
open &lt;code&gt;http://127.0.0.1:9080/apisix/dashboard/&lt;/code&gt; with a browser and try it.
Do not need to fill the user name and password, log in directly.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Dashboard allow any remote IP by default, and you can modify &lt;code&gt;allow_admin&lt;/code&gt; in &lt;code&gt;conf/config.yaml&lt;/code&gt; by yourself, to list the list of IPs allowed to access.&lt;/p&gt;
&lt;p&gt;We provide an online dashboard &lt;a href="http://apisix.iresty.com" rel="nofollow"&gt;demo version&lt;/a&gt;, make it easier for you to understand APISIX.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-benchmark" class="anchor" aria-hidden="true" href="#benchmark"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Benchmark&lt;/h2&gt;
&lt;p&gt;Using AWS's 8 core server, APISIX's QPS reach to 140,000 with a latency of only 0.2 ms.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-document" class="anchor" aria-hidden="true" href="#document"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Document&lt;/h2&gt;
&lt;p&gt;&lt;a href="doc/README.md"&gt;Documents of Apache APISIX&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-videos-and-articles" class="anchor" aria-hidden="true" href="#videos-and-articles"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Videos And Articles&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;2019.10.30 &lt;a href="https://www.upyun.com/opentalk/440.html" rel="nofollow"&gt;Introduction to Apache APISIX Microservice Gateway Extreme Performance Architecture(Chinese)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2019.8.31 &lt;a href="https://www.upyun.com/opentalk/433.html" rel="nofollow"&gt;APISIX technology selection, testing and continuous integration(Chinese)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2019.8.31 &lt;a href="https://www.upyun.com/opentalk/437.html" rel="nofollow"&gt;APISIX high performance practice 2(Chinese)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2019.7.6 &lt;a href="https://www.upyun.com/opentalk/429.html" rel="nofollow"&gt;APISIX high performance practice(Chinese)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-who-uses-apisix" class="anchor" aria-hidden="true" href="#who-uses-apisix"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Who Uses APISIX?&lt;/h2&gt;
&lt;p&gt;A wide variety of companies and organizations use APISIX for research, production and commercial product, including:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;dasouche 大搜车 &lt;a href="https://www.dasouche.com/" rel="nofollow"&gt;https://www.dasouche.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ehomepay 理房通 &lt;a href="https://www.ehomepay.com.cn/" rel="nofollow"&gt;https://www.ehomepay.com.cn/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;haieruplus.com 海尔优家  &lt;a href="http://haieruplus.com/" rel="nofollow"&gt;http://haieruplus.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;HelloTalk, Inc.  &lt;a href="https://www.hellotalk.com/" rel="nofollow"&gt;https://www.hellotalk.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ke.com 贝壳找房 &lt;a href="https://www.ke.com/" rel="nofollow"&gt;https://www.ke.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Meizu 魅族 &lt;a href="https://www.meizu.com/" rel="nofollow"&gt;https://www.meizu.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;NASA JPL 美国国家航空航天局 喷气推进实验室 &lt;a href="https://www.jpl.nasa.gov" rel="nofollow"&gt;https://www.jpl.nasa.gov&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Netease 网易 &lt;a href="http://www.163.com" rel="nofollow"&gt;http://www.163.com&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;taikang.com 泰康云   &lt;a href="http://taikang.com/" rel="nofollow"&gt;http://taikang.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;tangdou.com 糖豆网   &lt;a href="http://www.tangdou.com/" rel="nofollow"&gt;http://www.tangdou.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Tencent Cloud 腾讯云 &lt;a href="https://cloud.tencent.com/" rel="nofollow"&gt;https://cloud.tencent.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Xin 优信二手车 &lt;a href="https://www.xin.com/" rel="nofollow"&gt;https://www.xin.com/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;zuzuche 租租车 &lt;a href="https://www.zuzuche.com/" rel="nofollow"&gt;https://www.zuzuche.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Users are encouraged to add themselves to the &lt;a href="doc/powered-by.md"&gt;Powered By&lt;/a&gt; page.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-landscape" class="anchor" aria-hidden="true" href="#landscape"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Landscape&lt;/h2&gt;
&lt;p align="left"&gt;
&lt;a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/26c22bf25d18bfa6da23f2af1191ad3662161575/68747470733a2f2f6c616e6473636170652e636e63662e696f2f696d616765732f6c6566742d6c6f676f2e737667"&gt;&lt;img src="https://camo.githubusercontent.com/26c22bf25d18bfa6da23f2af1191ad3662161575/68747470733a2f2f6c616e6473636170652e636e63662e696f2f696d616765732f6c6566742d6c6f676f2e737667" width="150" data-canonical-src="https://landscape.cncf.io/images/left-logo.svg" style="max-width:100%;"&gt;&lt;/a&gt;  &lt;a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/c8ade7347586d795a3d7ecb713469e62ced7e27b/68747470733a2f2f6c616e6473636170652e636e63662e696f2f696d616765732f72696768742d6c6f676f2e737667"&gt;&lt;img src="https://camo.githubusercontent.com/c8ade7347586d795a3d7ecb713469e62ced7e27b/68747470733a2f2f6c616e6473636170652e636e63662e696f2f696d616765732f72696768742d6c6f676f2e737667" width="200" data-canonical-src="https://landscape.cncf.io/images/right-logo.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;br&gt;&lt;br&gt;
APISIX enriches the &lt;a href="https://landscape.cncf.io/category=api-gateway&amp;amp;format=card-mode&amp;amp;grouping=category" rel="nofollow"&gt;
CNCF API Gateway Landscape.&lt;/a&gt;
&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;See &lt;a href="Contributing.md"&gt;CONTRIBUTING&lt;/a&gt; for details on submitting patches and the contribution workflow.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-acknowledgments" class="anchor" aria-hidden="true" href="#acknowledgments"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Acknowledgments&lt;/h2&gt;
&lt;p&gt;inspired by Kong and Orange.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>apache</author><guid isPermaLink="false">https://github.com/apache/incubator-apisix</guid><pubDate>Fri, 06 Dec 2019 00:01:00 GMT</pubDate></item><item><title>Kong/kong #2 in Lua, Today</title><link>https://github.com/Kong/kong</link><description>&lt;p&gt;&lt;i&gt;🦍 The Cloud-Native API Gateway &lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a href="https://konghq.com/" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/9e4fe7914c7357861223aa535d7ca9858253c96e/68747470733a2f2f6b6f6e6768712e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031382f30352f6b6f6e672d6c6f676f2d6769746875622d726561646d652e706e67" alt="" data-canonical-src="https://konghq.com/wp-content/uploads/2018/05/kong-logo-github-readme.png" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/Kong/kong/branches" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/032b58c2a2e0a2a8dbb0c1fe60a0236e1042b7ad/68747470733a2f2f7472617669732d63692e6f72672f4b6f6e672f6b6f6e672e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/Kong/kong.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://github.com/Kong/kong/blob/master/LICENSE"&gt;&lt;img src="https://camo.githubusercontent.com/8051e9938a1ab39cf002818dfceb6b6092f34d68/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://twitter.com/intent/follow?screen_name=thekonginc" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/295bb78a3be8393e728bb4ad7470bd98a1c5062d/68747470733a2f2f696d672e736869656c64732e696f2f747769747465722f666f6c6c6f772f7468656b6f6e67696e632e7376673f7374796c653d736f6369616c266c6162656c3d466f6c6c6f77" alt="Twitter" data-canonical-src="https://img.shields.io/twitter/follow/thekonginc.svg?style=social&amp;amp;label=Follow" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Kong is a cloud-native, fast, scalable, and distributed Microservice
Abstraction Layer &lt;em&gt;(also known as an API Gateway, API Middleware or in some
cases Service Mesh)&lt;/em&gt;. Made available as an open-source project in 2015, its
core values are high performance and extensibility.&lt;/p&gt;
&lt;p&gt;Actively maintained, Kong is widely used in production at companies ranging
from startups to Global 5000 as well as government organizations.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://konghq.com/install" rel="nofollow"&gt;Installation&lt;/a&gt; |
&lt;a href="https://docs.konghq.com" rel="nofollow"&gt;Documentation&lt;/a&gt; |
&lt;a href="https://discuss.konghq.com" rel="nofollow"&gt;Forum&lt;/a&gt; |
&lt;a href="https://konghq.com/blog" rel="nofollow"&gt;Blog&lt;/a&gt; |
IRC (freenode): &lt;a href="https://webchat.freenode.net/?channels=kong" rel="nofollow"&gt;#kong&lt;/a&gt; |
&lt;a href="https://bintray.com/kong/kong-nightly/master" rel="nofollow"&gt;Nightly Builds&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-summary" class="anchor" aria-hidden="true" href="#summary"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Summary&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#why-kong"&gt;&lt;strong&gt;Why Kong?&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#features"&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#distributions"&gt;&lt;strong&gt;Distributions&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#development"&gt;&lt;strong&gt;Development&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#enterprise-support--demo"&gt;&lt;strong&gt;Enterprise Support &amp;amp; Demo&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#license"&gt;&lt;strong&gt;License&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-why-kong" class="anchor" aria-hidden="true" href="#why-kong"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why Kong?&lt;/h2&gt;
&lt;p&gt;If you are building for the web, mobile, or IoT (Internet of Things) you will
likely end up needing common functionality to run your actual software. Kong
can help by acting as a gateway (or a sidecar) for microservices requests while
providing load balancing, logging, authentication, rate-limiting,
transformations, and more through plugins.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://konghq.com/" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/d4d0dcb22c223db0bf2e301aab0dddb3015f1729/68747470733a2f2f6b6f6e6768712e636f6d2f77702d636f6e74656e742f75706c6f6164732f323031382f30352f6b6f6e672d62656e65666974732d6769746875622d726561646d652e706e67" alt="" data-canonical-src="https://konghq.com/wp-content/uploads/2018/05/kong-benefits-github-readme.png" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-features" class="anchor" aria-hidden="true" href="#features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cloud-Native&lt;/strong&gt;: Platform agnostic, Kong can run from bare metal to
Kubernetes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Dynamic Load Balancing&lt;/strong&gt;: Load balance traffic across multiple upstream
services.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Hash-based Load Balancing&lt;/strong&gt;: Load balance with consistent hashing/sticky
sessions.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Circuit-Breaker&lt;/strong&gt;: Intelligent tracking of unhealthy upstream services.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Health Checks:&lt;/strong&gt; Active and passive monitoring of your upstream services.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Service Discovery&lt;/strong&gt;: Resolve SRV records in third-party DNS resolvers like
Consul.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Serverless&lt;/strong&gt;: Invoke and secure AWS Lambda or OpenWhisk functions directly
from Kong.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;WebSockets&lt;/strong&gt;: Communicate to your upstream services via WebSockets.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;gRPC&lt;/strong&gt;: Communicate to your gRPC services and observe your traffic with logging
and observability plugins&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OAuth2.0&lt;/strong&gt;: Easily add OAuth2.0 authentication to your APIs.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Logging&lt;/strong&gt;: Log requests and responses to your system over HTTP, TCP, UDP,
or to disk.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Security&lt;/strong&gt;: ACL, Bot detection, whitelist/blacklist IPs, etc...&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Syslog&lt;/strong&gt;: Logging to System log.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SSL&lt;/strong&gt;: Setup a Specific SSL Certificate for an underlying service or API.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Monitoring&lt;/strong&gt;: Live monitoring provides key load and performance server
metrics.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Forward Proxy&lt;/strong&gt;: Make Kong connect to intermediary transparent HTTP proxies.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Authentications&lt;/strong&gt;: HMAC, JWT, Basic, and more.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Rate-limiting&lt;/strong&gt;: Block and throttle requests based on many variables.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Transformations&lt;/strong&gt;: Add, remove, or manipulate HTTP requests and responses.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Caching&lt;/strong&gt;: Cache and serve responses at the proxy layer.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;CLI&lt;/strong&gt;: Control your Kong cluster from the command line.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;: Kong can be operated with its RESTful API for maximum
flexibility.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Geo-Replicated&lt;/strong&gt;: Configs are always up-to-date across different regions.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Failure Detection &amp;amp; Recovery&lt;/strong&gt;: Kong is unaffected if one of your Cassandra
nodes goes down.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Clustering&lt;/strong&gt;: All Kong nodes auto-join the cluster keeping their config
updated across nodes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Scalability&lt;/strong&gt;: Distributed by nature, Kong scales horizontally by simply
adding nodes.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Performance&lt;/strong&gt;: Kong handles load with ease by scaling and using NGINX at
the core.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Plugins&lt;/strong&gt;: Extendable architecture for adding functionality to Kong and
APIs.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For more info about plugins and integrations, you can check out the &lt;a href="https://docs.konghq.com/hub/" rel="nofollow"&gt;Kong
Hub&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-distributions" class="anchor" aria-hidden="true" href="#distributions"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Distributions&lt;/h2&gt;
&lt;p&gt;Kong comes in many shapes. While this repository contains its core's source
code, other repos are also under active development:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/docker-kong"&gt;Kong Docker&lt;/a&gt;: A Dockerfile for
running Kong in Docker.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/kong/releases"&gt;Kong Packages&lt;/a&gt;: Pre-built packages
for Debian, Red Hat, and OS X distributions (shipped with each release).&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/kong-vagrant"&gt;Kong Vagrant&lt;/a&gt;: A Vagrantfile for
provisioning a development-ready environment for Kong.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/homebrew-kong"&gt;Kong Homebrew&lt;/a&gt;: Homebrew Formula
for Kong.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/kong-dist-cloudformation"&gt;Kong CloudFormation&lt;/a&gt;:
Kong in a 1-click deployment for AWS EC2.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://aws.amazon.com/marketplace/pp/B06WP4TNKL" rel="nofollow"&gt;Kong AWS AMI&lt;/a&gt;: Kong AMI on
the AWS Marketplace.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/kong-dist-azure"&gt;Kong on Microsoft Azure&lt;/a&gt;: Run Kong
using Azure Resource Manager.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/heroku/heroku-kong"&gt;Kong on Heroku&lt;/a&gt;: Deploy Kong on
Heroku in one click.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.instaclustr.com/solutions/managed-cassandra-for-kong/" rel="nofollow"&gt;Kong and Instaclustr&lt;/a&gt;: Let
Instaclustr manage your Cassandra cluster.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/Kong/kubernetes-ingress-controller"&gt;Kubernetes Ingress Controller for Kong&lt;/a&gt;:
Use Kong for Kubernetes Ingress.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bintray.com/kong/kong-nightly/master" rel="nofollow"&gt;Nightly Builds&lt;/a&gt;: Builds of the master branch available
every morning at about 9AM PST.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-development" class="anchor" aria-hidden="true" href="#development"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Development&lt;/h2&gt;
&lt;p&gt;If you are planning on developing on Kong, you'll need a development
installation. The &lt;code&gt;next&lt;/code&gt; branch holds the latest unreleased source code.&lt;/p&gt;
&lt;p&gt;You can read more about writing your own plugins in the &lt;a href="https://docs.konghq.com/latest/plugin-development/" rel="nofollow"&gt;Plugin Development
Guide&lt;/a&gt;, or browse an
online version of Kong's source code documentation in the &lt;a href="https://docs.konghq.com/latest/pdk/" rel="nofollow"&gt;Plugin Development
Kit (PDK) Reference&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-docker" class="anchor" aria-hidden="true" href="#docker"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Docker&lt;/h4&gt;
&lt;p&gt;You can use Docker / docker-compose and a mounted volume to develop Kong by
following the instructions on &lt;a href="https://github.com/Kong/kong-build-tools#developing-kong"&gt;Kong/kong-build-tools&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-vagrant" class="anchor" aria-hidden="true" href="#vagrant"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Vagrant&lt;/h4&gt;
&lt;p&gt;You can use a Vagrant box running Kong and Postgres that you can find at
&lt;a href="https://github.com/Kong/kong-vagrant"&gt;Kong/kong-vagrant&lt;/a&gt;.&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-source-install" class="anchor" aria-hidden="true" href="#source-install"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Source Install&lt;/h4&gt;
&lt;p&gt;Kong mostly is an OpenResty application made of Lua source files, but also
requires some additional third-party dependencies. We recommend installing
those by following the source install instructions at
&lt;a href="https://docs.konghq.com/install/source/" rel="nofollow"&gt;https://docs.konghq.com/install/source/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Instead of following the second step (Install Kong), clone this repository
and install the latest Lua sources instead of the currently released ones:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ git clone https://github.com/Kong/kong
$ &lt;span class="pl-c1"&gt;cd&lt;/span&gt; kong/

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; you might want to switch to the development branch. See CONTRIBUTING.md&lt;/span&gt;
$ git checkout next

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; install the Lua sources&lt;/span&gt;
$ luarocks make&lt;/pre&gt;&lt;/div&gt;
&lt;h4&gt;&lt;a id="user-content-running-for-development" class="anchor" aria-hidden="true" href="#running-for-development"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Running for development&lt;/h4&gt;
&lt;p&gt;Check out the &lt;a href="https://github.com/Kong/kong/blob/next/kong.conf.default#L244"&gt;development section&lt;/a&gt;
of the default configuration file for properties to tweak in order to ease
the development process for Kong.&lt;/p&gt;
&lt;p&gt;Modifying the &lt;a href="https://github.com/openresty/lua-nginx-module#lua_package_path"&gt;&lt;code&gt;lua_package_path&lt;/code&gt;&lt;/a&gt;
and &lt;a href="https://github.com/openresty/lua-nginx-module#lua_package_cpath"&gt;&lt;code&gt;lua_package_cpath&lt;/code&gt;&lt;/a&gt;
directives will allow Kong to find your custom plugin's source code wherever it
might be in your system.&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tests&lt;/h4&gt;
&lt;p&gt;Install the development dependencies (&lt;a href="https://github.com/Olivine-Labs/busted"&gt;busted&lt;/a&gt;, &lt;a href="https://github.com/mpeterv/luacheck"&gt;luacheck&lt;/a&gt;) with:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ make dev&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Kong relies on three test suites using the &lt;a href="https://github.com/Olivine-Labs/busted"&gt;busted&lt;/a&gt; testing library:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unit tests&lt;/li&gt;
&lt;li&gt;Integration tests, which require Postgres and Cassandra to be up and running&lt;/li&gt;
&lt;li&gt;Plugins tests, which require Postgres to be running&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The first can simply be run after installing busted and running:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ make test
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;However, the integration and plugins tests will spawn a Kong instance and
perform their tests against it. As so, consult/edit the &lt;code&gt;spec/kong_tests.conf&lt;/code&gt;
configuration file to make your test instance point to your Postgres/Cassandra
servers, depending on your needs.&lt;/p&gt;
&lt;p&gt;You can run the integration tests (assuming &lt;strong&gt;both&lt;/strong&gt; Postgres and Cassandra are
running and configured according to &lt;code&gt;spec/kong_tests.conf&lt;/code&gt;) with:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ make test-integration
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And the plugins tests with:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ make test-plugins
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally, all suites can be run at once by simply using:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ make test-all
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Consult the &lt;a href=".ci/run_tests.sh"&gt;run_tests.sh&lt;/a&gt; script for a more advanced example
usage of the tests suites and the Makefile.&lt;/p&gt;
&lt;p&gt;Finally, a very useful tool in Lua development (as with many other dynamic
languages) is performing static linting of your code. You can use &lt;a href="https://github.com/mpeterv/luacheck"&gt;luacheck&lt;/a&gt;
(installed with &lt;code&gt;make dev&lt;/code&gt;) for this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ make lint
&lt;/code&gt;&lt;/pre&gt;
&lt;h4&gt;&lt;a id="user-content-makefile" class="anchor" aria-hidden="true" href="#makefile"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Makefile&lt;/h4&gt;
&lt;p&gt;When developing, you can use the &lt;code&gt;Makefile&lt;/code&gt; for doing the following operations:&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="right"&gt;Name&lt;/th&gt;
&lt;th&gt;Description&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;install&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Install the Kong luarock globally&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;dev&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Install development dependencies&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;lint&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Lint Lua files in &lt;code&gt;kong/&lt;/code&gt; and &lt;code&gt;spec/&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;test&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Run the unit tests suite&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;test-integration&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Run the integration tests suite&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;test-plugins&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Run the plugins test suite&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align="right"&gt;&lt;code&gt;test-all&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;Run all unit + integration + plugins tests at once&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2&gt;&lt;a id="user-content-enterprise-support--demo" class="anchor" aria-hidden="true" href="#enterprise-support--demo"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Enterprise Support &amp;amp; Demo&lt;/h2&gt;
&lt;p&gt;If you are working in a large organization you should learn more about &lt;a href="https://konghq.com/kong-enterprise-edition/" rel="nofollow"&gt;Kong
Enterprise&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;pre&gt;&lt;code&gt;Copyright 2016-2019 Kong Inc.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
&lt;/code&gt;&lt;/pre&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>Kong</author><guid isPermaLink="false">https://github.com/Kong/kong</guid><pubDate>Fri, 06 Dec 2019 00:02:00 GMT</pubDate></item><item><title>knyar/nginx-lua-prometheus #3 in Lua, Today</title><link>https://github.com/knyar/nginx-lua-prometheus</link><description>&lt;p&gt;&lt;i&gt;Prometheus metric library for Nginx written in Lua&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a href="http://travis-ci.org/knyar/nginx-lua-prometheus?branch=master" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/a94d9fd419c2a7437afe033fafe877d0d4820475/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f6b6e7961722f6e67696e782d6c75612d70726f6d6574686575732e7376673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/knyar/nginx-lua-prometheus.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://coveralls.io/github/knyar/nginx-lua-prometheus?branch=master" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/24fbcd886b48367e7fab32885f6038864216f2fd/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6769746875622f6b6e7961722f6e67696e782d6c75612d70726f6d6574686575732f62616467652e7376673f6272616e63683d6d6173746572" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/github/knyar/nginx-lua-prometheus/badge.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id="user-content-prometheus-metric-library-for-nginx" class="anchor" aria-hidden="true" href="#prometheus-metric-library-for-nginx"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Prometheus metric library for Nginx&lt;/h1&gt;
&lt;p&gt;This is a Lua library that can be used with Nginx to keep track of metrics and
expose them on a separate web page to be pulled by
&lt;a href="https://prometheus.io" rel="nofollow"&gt;Prometheus&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-installation" class="anchor" aria-hidden="true" href="#installation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Installation&lt;/h2&gt;
&lt;p&gt;You need to install nginx package with lua support (&lt;code&gt;libnginx-mod-http-lua&lt;/code&gt; on
newer Debian versions, or &lt;code&gt;nginx-extras&lt;/code&gt; on older ones). The library file,
&lt;code&gt;prometheus.lua&lt;/code&gt;, needs to be available in &lt;code&gt;LUA_PATH&lt;/code&gt;. If this is the only Lua
library you use, you can just point &lt;code&gt;lua_package_path&lt;/code&gt; to the directory with
this git repo checked out (see example below).&lt;/p&gt;
&lt;p&gt;OpenResty users will find this library in &lt;a href="https://opm.openresty.org/" rel="nofollow"&gt;opm&lt;/a&gt;. It
is also available via
&lt;a href="https://luarocks.org/modules/knyar/nginx-lua-prometheus" rel="nofollow"&gt;luarocks&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-quick-start-guide" class="anchor" aria-hidden="true" href="#quick-start-guide"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quick start guide&lt;/h2&gt;
&lt;p&gt;To track request latency broken down by server name and request count
broken down by server name and status, add the following to the &lt;code&gt;http&lt;/code&gt; section
of &lt;code&gt;nginx.conf&lt;/code&gt;:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;lua_shared_dict prometheus_metrics 10M;
lua_package_path "/path/to/nginx-lua-prometheus/?.lua";
init_by_lua '
  prometheus = require("prometheus").init("prometheus_metrics")
  metric_requests = prometheus:counter(
    "nginx_http_requests_total", "Number of HTTP requests", {"host", "status"})
  metric_latency = prometheus:histogram(
    "nginx_http_request_duration_seconds", "HTTP request latency", {"host"})
  metric_connections = prometheus:gauge(
    "nginx_http_connections", "Number of HTTP connections", {"state"})
';
log_by_lua '
  metric_requests:inc(1, {ngx.var.server_name, ngx.var.status})
  metric_latency:observe(tonumber(ngx.var.request_time), {ngx.var.server_name})
';
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;configures a shared dictionary for your metrics called &lt;code&gt;prometheus_metrics&lt;/code&gt;
with a 10MB size limit;&lt;/li&gt;
&lt;li&gt;registers a counter called &lt;code&gt;nginx_http_requests_total&lt;/code&gt; with two labels:
&lt;code&gt;host&lt;/code&gt; and &lt;code&gt;status&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;registers a histogram called &lt;code&gt;nginx_http_request_duration_seconds&lt;/code&gt; with one
label &lt;code&gt;host&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;registers a gauge called &lt;code&gt;nginx_http_connections&lt;/code&gt; with one label &lt;code&gt;state&lt;/code&gt;;&lt;/li&gt;
&lt;li&gt;on each HTTP request measures its latency, recording it in the histogram and
increments the counter, setting current server name as the &lt;code&gt;host&lt;/code&gt; label and
HTTP status code as the &lt;code&gt;status&lt;/code&gt; label.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Last step is to configure a separate server that will expose the metrics.
Please make sure to only make it reachable from your Prometheus server:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
  listen 9145;
  allow 192.168.0.0/16;
  deny all;
  location /metrics {
    content_by_lua '
      metric_connections:set(ngx.var.connections_reading, {"reading"})
      metric_connections:set(ngx.var.connections_waiting, {"waiting"})
      metric_connections:set(ngx.var.connections_writing, {"writing"})
      prometheus:collect()
    ';
  }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Metrics will be available at &lt;code&gt;http://your.nginx:9145/metrics&lt;/code&gt;. Note that the
gauge metric in this example contains values obtained from nginx global state,
so they get set immediately before metrics are returned to the client.&lt;/p&gt;
&lt;p&gt;If you experience problems indicating that nginx doesn't know how to interpret
lua-commands and you use an external module for nginx-lua-support (e.g. the
&lt;code&gt;libnginx-mod-http-lua&lt;/code&gt; package on Debian) try adding&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;load_module modules/ndk_http_module.so;
load_module modules/ngx_http_lua_module.so;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;to the beginning of &lt;code&gt;nginx.conf&lt;/code&gt; to ensure the modules are loaded.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-api-reference" class="anchor" aria-hidden="true" href="#api-reference"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;API reference&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-init" class="anchor" aria-hidden="true" href="#init"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;init()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; require("prometheus").init(&lt;em&gt;dict_name&lt;/em&gt;, [&lt;em&gt;prefix&lt;/em&gt;])&lt;/p&gt;
&lt;p&gt;Initializes the module. This should be called once from the
&lt;a href="https://github.com/openresty/lua-nginx-module#init_by_lua"&gt;init_by_lua&lt;/a&gt;
section in nginx configuration.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;dict_name&lt;/code&gt; is the name of the nginx shared dictionary which will be used to
store all metrics. Defaults to &lt;code&gt;prometheus_metrics&lt;/code&gt; if not specified.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;prefix&lt;/code&gt; is an optional string which will be prepended to metric names on output&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Returns a &lt;code&gt;prometheus&lt;/code&gt; object that should be used to register metrics.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;init_by_lua '
  prometheus = require("prometheus").init("prometheus_metrics")
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-prometheuscounter" class="anchor" aria-hidden="true" href="#prometheuscounter"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;prometheus:counter()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; prometheus:counter(&lt;em&gt;name&lt;/em&gt;, &lt;em&gt;description&lt;/em&gt;, &lt;em&gt;label_names&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Registers a counter. Should be called once from the
&lt;a href="https://github.com/openresty/lua-nginx-module#init_by_lua"&gt;init_by_lua&lt;/a&gt;
section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt; is the name of the metric.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;description&lt;/code&gt; is the text description that will be presented to Prometheus
along with the metric. Optional (pass &lt;code&gt;nil&lt;/code&gt; if you still need to define
label names).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_names&lt;/code&gt; is an array of label names for the metric. Optional.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://prometheus.io/docs/practices/naming/" rel="nofollow"&gt;Naming section&lt;/a&gt; of Prometheus
documentation provides good guidelines on choosing metric and label names.&lt;/p&gt;
&lt;p&gt;Returns a &lt;code&gt;counter&lt;/code&gt; object that can later be incremented.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;init_by_lua '
  prometheus = require("prometheus").init("prometheus_metrics")
  metric_bytes = prometheus:counter(
    "nginx_http_request_size_bytes", "Total size of incoming requests")
  metric_requests = prometheus:counter(
    "nginx_http_requests_total", "Number of HTTP requests", {"host", "status"})
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-prometheusgauge" class="anchor" aria-hidden="true" href="#prometheusgauge"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;prometheus:gauge()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; prometheus:gauge(&lt;em&gt;name&lt;/em&gt;, &lt;em&gt;description&lt;/em&gt;, &lt;em&gt;label_names&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Registers a gauge. Should be called once from the
&lt;a href="https://github.com/openresty/lua-nginx-module#init_by_lua"&gt;init_by_lua&lt;/a&gt;
section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt; is the name of the metric.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;description&lt;/code&gt; is the text description that will be presented to Prometheus
along with the metric. Optional (pass &lt;code&gt;nil&lt;/code&gt; if you still need to define
label names).&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_names&lt;/code&gt; is an array of label names for the metric. Optional.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Returns a &lt;code&gt;gauge&lt;/code&gt; object that can later be set.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;init_by_lua '
  prometheus = require("prometheus").init("prometheus_metrics")
  metric_connections = prometheus:gauge(
    "nginx_http_connections", "Number of HTTP connections", {"state"})
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-prometheushistogram" class="anchor" aria-hidden="true" href="#prometheushistogram"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;prometheus:histogram()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; prometheus:histogram(&lt;em&gt;name&lt;/em&gt;, &lt;em&gt;description&lt;/em&gt;, &lt;em&gt;label_names&lt;/em&gt;,
&lt;em&gt;buckets&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Registers a histogram. Should be called once from the
&lt;a href="https://github.com/openresty/lua-nginx-module#init_by_lua"&gt;init_by_lua&lt;/a&gt;
section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;name&lt;/code&gt; is the name of the metric.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;description&lt;/code&gt; is the text description. Optional.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_names&lt;/code&gt; is an array of label names for the metric. Optional.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;buckets&lt;/code&gt; is an array of numbers defining bucket boundaries. Optional,
defaults to 20 latency buckets covering a range from 5ms to 10s (in seconds).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Returns a &lt;code&gt;histogram&lt;/code&gt; object that can later be used to record samples.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;init_by_lua '
  prometheus = require("prometheus").init("prometheus_metrics")
  metric_latency = prometheus:histogram(
    "nginx_http_request_duration_seconds", "HTTP request latency", {"host"})
  metric_response_sizes = prometheus:histogram(
    "nginx_http_response_size_bytes", "Size of HTTP responses", nil,
    {10,100,1000,10000,100000,1000000})
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-prometheuscollect" class="anchor" aria-hidden="true" href="#prometheuscollect"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;prometheus:collect()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; prometheus:collect()&lt;/p&gt;
&lt;p&gt;Presents all metrics in a text format compatible with Prometheus. This should be
called in
&lt;a href="https://github.com/openresty/lua-nginx-module#content_by_lua"&gt;content_by_lua&lt;/a&gt;
to expose the metrics on a separate HTTP page.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;location /metrics {
  content_by_lua 'prometheus:collect()';
  allow 192.168.0.0/16;
  deny all;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-prometheusmetric_data" class="anchor" aria-hidden="true" href="#prometheusmetric_data"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;prometheus:metric_data()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; prometheus:metric_data()&lt;/p&gt;
&lt;p&gt;Returns metric data as an array of strings.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-counterinc" class="anchor" aria-hidden="true" href="#counterinc"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;counter:inc()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; counter:inc(&lt;em&gt;value&lt;/em&gt;, &lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Increments a previously registered counter. This is usually called from
&lt;a href="https://github.com/openresty/lua-nginx-module#log_by_lua"&gt;log_by_lua&lt;/a&gt;
globally or per server/location.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt; is a value that should be added to the counter. Defaults to 1.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The number of label values should match the number of label names defined when
the counter was registered using &lt;code&gt;prometheus:counter()&lt;/code&gt;. No label values should
be provided for counters with no labels. Non-printable characters will be
stripped from label values.&lt;/p&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;log_by_lua '
  metric_bytes:inc(tonumber(ngx.var.request_length))
  metric_requests:inc(1, {ngx.var.server_name, ngx.var.status})
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-counterdel" class="anchor" aria-hidden="true" href="#counterdel"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;counter:del()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; counter:del(&lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Delete a previously registered counter. This is usually called when you don't
need to observe such counter (or a metric with specific label values in this
counter) any more. If this counter has labels, you have to pass &lt;code&gt;label_values&lt;/code&gt;
to delete the specific metric of this counter. If you want to delete all the
metrics of a counter with labels, you should call &lt;code&gt;Counter:reset()&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The number of label values should match the number of label names defined when
the counter was registered using &lt;code&gt;prometheus:counter()&lt;/code&gt;. No label values should
be provided for counters with no labels. Non-printable characters will be
stripped from label values.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-counterreset" class="anchor" aria-hidden="true" href="#counterreset"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;counter:reset()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; counter:reset()&lt;/p&gt;
&lt;p&gt;Delete all metrics for a previously registered counter. If this counter have no
labels, it is just the same as &lt;code&gt;Counter:del()&lt;/code&gt; function. If this counter have labels,
it will delete all the metrics with different label values.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-gaugeset" class="anchor" aria-hidden="true" href="#gaugeset"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gauge:set()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; gauge:set(&lt;em&gt;value&lt;/em&gt;, &lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Sets the current value of a previously registered gauge. This could be called
from &lt;a href="https://github.com/openresty/lua-nginx-module#log_by_lua"&gt;log_by_lua&lt;/a&gt;
globally or per server/location to modify a gauge on each request, or from
&lt;a href="https://github.com/openresty/lua-nginx-module#content_by_lua"&gt;content_by_lua&lt;/a&gt;
just before &lt;code&gt;prometheus::collect()&lt;/code&gt; to return a real-time value.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt; is a value that the gauge should be set to. Required.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-gaugeinc" class="anchor" aria-hidden="true" href="#gaugeinc"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gauge:inc()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; gauge:inc(&lt;em&gt;value&lt;/em&gt;, &lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Increments or decrements a previously registered gauge. This is usually called
when you want to observe the real-time value of a metric that can both be
increased and decreased.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt; is a value that should be added to the gauge. It could be a negative
value when you need to decrease the value of the gauge. Defaults to 1.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The number of label values should match the number of label names defined when
the gauge was registered using &lt;code&gt;prometheus:gauge()&lt;/code&gt;. No label values should
be provided for gauges with no labels. Non-printable characters will be
stripped from label values.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-gaugedel" class="anchor" aria-hidden="true" href="#gaugedel"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gauge:del()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; gauge:del(&lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Delete a previously registered gauge. This is usually called when you don't
need to observe such gauge (or a metric with specific label values in this
gauge) any more. If this gauge has labels, you have to pass &lt;code&gt;label_values&lt;/code&gt;
to delete the specific metric of this gauge. If you want to delete all the
metrics of a gauge with labels, you should call &lt;code&gt;Gauge:reset()&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The number of label values should match the number of label names defined when
the gauge was registered using &lt;code&gt;prometheus:gauge()&lt;/code&gt;. No label values should
be provided for gauges with no labels. Non-printable characters will be
stripped from label values.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-gaugereset" class="anchor" aria-hidden="true" href="#gaugereset"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;gauge:reset()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; gauge:reset()&lt;/p&gt;
&lt;p&gt;Delete all metrics for a previously registered gauge. If this gauge have no
labels, it is just the same as &lt;code&gt;Gauge:del()&lt;/code&gt; function. If this gauge have labels,
it will delete all the metrics with different label values.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-histogramobserve" class="anchor" aria-hidden="true" href="#histogramobserve"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;histogram:observe()&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;syntax:&lt;/strong&gt; histogram:observe(&lt;em&gt;value&lt;/em&gt;, &lt;em&gt;label_values&lt;/em&gt;)&lt;/p&gt;
&lt;p&gt;Records a value in a previously registered histogram. Usually called from
&lt;a href="https://github.com/openresty/lua-nginx-module#log_by_lua"&gt;log_by_lua&lt;/a&gt;
globally or per server/location.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;value&lt;/code&gt; is a value that should be recorded. Required.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;label_values&lt;/code&gt; is an array of label values.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;log_by_lua '
  metric_latency:observe(tonumber(ngx.var.request_time), {ngx.var.server_name})
  metric_response_sizes:observe(tonumber(ngx.var.bytes_sent))
';
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-built-in-metrics" class="anchor" aria-hidden="true" href="#built-in-metrics"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Built-in metrics&lt;/h3&gt;
&lt;p&gt;The module increments the &lt;code&gt;nginx_metric_errors_total&lt;/code&gt; metric if it encounters
an error (for example, when &lt;code&gt;lua_shared_dict&lt;/code&gt; becomes full). You might want
to configure an alert on that metric.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-caveats" class="anchor" aria-hidden="true" href="#caveats"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Caveats&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-large-number-of-metrics" class="anchor" aria-hidden="true" href="#large-number-of-metrics"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Large number of metrics&lt;/h3&gt;
&lt;p&gt;Please keep in mind that all metrics stored by this library are kept in a
single shared dictionary (&lt;code&gt;lua_shared_dict&lt;/code&gt;). While exposing metrics the module
has to list all dictionary keys, which has serious performance implications for
dictionaries with large number of keys (in this case this means large number
of metrics OR metrics with high label cardinality). Listing the keys has to
lock the dictionary, which blocks all threads that try to access it (i.e.
potentially all nginx worker threads).&lt;/p&gt;
&lt;p&gt;There is no elegant solution to this issue (besides keeping metrics in a
separate storage system external to nginx), so for latency-critical servers you
might want to keep the number of metrics (and distinct metric label values) to
a minimum.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-usage-in-stream-module" class="anchor" aria-hidden="true" href="#usage-in-stream-module"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Usage in stream module&lt;/h3&gt;
&lt;p&gt;For now, there is no way to share a dictionary between HTTP and Stream modules
in Nginx. If you are using this library to collect metrics from stream module,
you will need to configure a separate endpoint to return them. Here's an
example.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;server {
  listen 9145;
  content_by_lua '
    local sock = assert(ngx.req.socket(true))
    local data = sock:receive()
    local location = "GET /metrics"
    if string.sub(data, 1, string.len(location)) == location then
      ngx.say("HTTP/1.1 200 OK")
      ngx.say("Content-Type: text/plain")
      ngx.say("")
      ngx.say(table.concat(prometheus:metric_data(), ""))
    else
      ngx.say("HTTP/1.1 404 Not Found")
    end
  ';
  }
&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;&lt;a id="user-content-development" class="anchor" aria-hidden="true" href="#development"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Development&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-install-dependencies-for-testing" class="anchor" aria-hidden="true" href="#install-dependencies-for-testing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install dependencies for testing&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;luarocks install luacheck&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;luarocks install luaunit&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-run-tests" class="anchor" aria-hidden="true" href="#run-tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Run tests&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;luacheck --globals ngx -- prometheus.lua&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;lua prometheus_test.lua&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;a id="user-content-releasing-new-version" class="anchor" aria-hidden="true" href="#releasing-new-version"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Releasing new version&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;update version in the &lt;code&gt;dist.ini&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;rename &lt;code&gt;.rockspec&lt;/code&gt; file and update version inside it&lt;/li&gt;
&lt;li&gt;commit changes&lt;/li&gt;
&lt;li&gt;push to luarocks: &lt;code&gt;luarocks upload nginx-lua-prometheus-0.20181120-1.rockspec&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;upload to OPM: &lt;code&gt;opm build &amp;amp;&amp;amp; opm upload&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;create a new Git tag: &lt;code&gt;git tag 0.XXXXXXXX-X &amp;amp;&amp;amp; git push origin 0.XXXXXXXX-X&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-credits" class="anchor" aria-hidden="true" href="#credits"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Credits&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Created and maintained by Anton Tolchanov (@knyar)&lt;/li&gt;
&lt;li&gt;Metrix prefix support contributed by david birdsong (@davidbirdsong)&lt;/li&gt;
&lt;li&gt;Gauge support contributed by Cosmo Petrich (@cosmopetrich)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;Licensed under MIT license.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>knyar</author><guid isPermaLink="false">https://github.com/knyar/nginx-lua-prometheus</guid><pubDate>Fri, 06 Dec 2019 00:03:00 GMT</pubDate></item><item><title>ntop/ntopng #4 in Lua, Today</title><link>https://github.com/ntop/ntopng</link><description>&lt;p&gt;&lt;i&gt;Web-based Traffic and Security Network Traffic Monitoring&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/0f789abcef232035c05e0d2e82afa3cc3be46485/687474703a2f2f7777772e6e746f702e6f72672f77702d636f6e74656e742f75706c6f6164732f323031312f30382f6e746f706e672d69636f6e2d313530783135302e706e67"&gt;&lt;img src="https://camo.githubusercontent.com/0f789abcef232035c05e0d2e82afa3cc3be46485/687474703a2f2f7777772e6e746f702e6f72672f77702d636f6e74656e742f75706c6f6164732f323031312f30382f6e746f706e672d69636f6e2d313530783135302e706e67" alt="ntop" style="max-width:100%;"&gt;&lt;/a&gt; &lt;a target="_blank" rel="noopener noreferrer" href="https://camo.githubusercontent.com/58e2a1ecfff62d8ecc9d74633bd1013f26e06cba/687474703a2f2f7777772e6e746f702e6f72672f77702d636f6e74656e742f75706c6f6164732f323031352f30352f6e746f702e706e67"&gt;&lt;img src="https://camo.githubusercontent.com/58e2a1ecfff62d8ecc9d74633bd1013f26e06cba/687474703a2f2f7777772e6e746f702e6f72672f77702d636f6e74656e742f75706c6f6164732f323031352f30352f6e746f702e706e67" alt="ntop" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id="user-content-ntopng" class="anchor" aria-hidden="true" href="#ntopng"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;ntopng&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://travis-ci.org/ntop/ntopng" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/fcefa979c56cbd9b453ab836872c72129593d4c2/68747470733a2f2f7472617669732d63692e6f72672f6e746f702f6e746f706e672e706e673f6272616e63683d646576" alt="Build Status" data-canonical-src="https://travis-ci.org/ntop/ntopng.png?branch=dev" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://lgtm.com/projects/g/ntop/ntopng/alerts" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/a4c0a084a81545bf198eeeb6a86c7ebdda454c9d/68747470733a2f2f696d672e736869656c64732e696f2f6c67746d2f616c657274732f672f6e746f702f6e746f706e672e7376673f6c6f676f3d6c67746d266c6f676f57696474683d3138" alt="Total Alerts" data-canonical-src="https://img.shields.io/lgtm/alerts/g/ntop/ntopng.svg?logo=lgtm&amp;amp;logoWidth=18" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-introduction" class="anchor" aria-hidden="true" href="#introduction"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Introduction&lt;/h3&gt;
&lt;p&gt;ntopng is a web-based network traffic monitoring application released under GPLv3. It is the new incarnation of the original ntop written in 1998, and now revamped in terms of performance, usability, and features.&lt;/p&gt;
&lt;p&gt;While you can read more about ntopng on the ntop web site (&lt;a href="http://www.ntop.org" rel="nofollow"&gt;http://www.ntop.org&lt;/a&gt;), we suggest you to start reading the &lt;a href="https://github.com/ntop/ntopng/blob/dev/doc/README.md"&gt;doc/README.md&lt;/a&gt; file for learning how to compile and use ntopng.&lt;/p&gt;
&lt;p&gt;If instead of source code you prefer to use a pre-built package, please go to &lt;a href="http://packages.ntop.org" rel="nofollow"&gt;http://packages.ntop.org&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;We build binary packages for the following platforms:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Ubuntu Linux Server x64&lt;/li&gt;
&lt;li&gt;CentOS/RedHat Linux x64&lt;/li&gt;
&lt;li&gt;Windows x64&lt;/li&gt;
&lt;li&gt;RaspberryPI/BeagleBoard ARM (based on Ubuntu Linux)&lt;/li&gt;
&lt;li&gt;Ubiquity Networks EdgeRouter (MIPS)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enjoy.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Documentation&lt;/h3&gt;
&lt;p&gt;If you want to learn more about ntopng please visit the &lt;a href="https://www.ntop.org/guides/ntopng/" rel="nofollow"&gt;User's Guide&lt;/a&gt; and the &lt;a href="https://www.ntop.org/guides/ntopng/api/index.html" rel="nofollow"&gt;API Documentation&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-details" class="anchor" aria-hidden="true" href="#details"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Details&lt;/h3&gt;
&lt;p&gt;For more information about ntopng, please visit &lt;a href="https://www.ntop.org/products/traffic-analysis/ntop/" rel="nofollow"&gt;http://ntop.org&lt;/a&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>ntop</author><guid isPermaLink="false">https://github.com/ntop/ntopng</guid><pubDate>Fri, 06 Dec 2019 00:04:00 GMT</pubDate></item><item><title>gogo-easy/ngr #5 in Lua, Today</title><link>https://github.com/gogo-easy/ngr</link><description>&lt;p&gt;&lt;i&gt;A high-performance &amp;  enterprise-class edge gateway middleware&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a href="https://github.com/gogo-easy/ngr"&gt;&lt;img src="./logo/hoot1.png" alt="" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h1&gt;&lt;a id="user-content-ngrouter---a-pratical-api-gateway" class="anchor" aria-hidden="true" href="#ngrouter---a-pratical-api-gateway"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;NgRouter - A Pratical API Gateway&lt;/h1&gt;
&lt;p&gt;&lt;a href="https://github.com/gogo-easy/ngr/blob/master/LICENSE"&gt;&lt;img src="https://camo.githubusercontent.com/8051e9938a1ab39cf002818dfceb6b6092f34d68/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d417061636865253230322e302d626c75652e737667" alt="License" data-canonical-src="https://img.shields.io/badge/License-Apache%202.0-blue.svg" style="max-width:100%;"&gt;&lt;/a&gt; &lt;a href="https://github.com/gogo-easy/ngr/releases"&gt;&lt;img src="https://camo.githubusercontent.com/8a260a67625633f3c6d6d2e7dcbc29457b8c5a52/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f676f676f2d656173792f6e6772" alt="Version" data-canonical-src="https://img.shields.io/github/v/release/gogo-easy/ngr" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;NgRouter是基于OpenResty开发的API网关，继承了Nginx的高并发、低延迟的强大性能的同时，也提供诸如认证鉴权、限流、熔断、健康检查、动态上游发现等常用功能。通过集群化横向扩展多实例的部署方式，可作为企业级边缘网关承载百万级并发，也可根据环境的逻辑划分，每个逻辑单元部署一套，用于需要多环境管理的场景。&lt;/p&gt;
&lt;p&gt;NgRouter is an enterprise-class API gateway based on Openresty. Compared to Openresty, it has almostly the same performance of high concurrency and low latency, it also has a lot of common practical functions such as authentication of requests, dynamically upstream lists, health check, rate limiting, fault torlerance,  etc. NgRouter can be deployed in single -node mode (usually for experiment), and can be scaled to multi-cluster mode, each cluster is dedicated for a logical environment. This makes it very suitable for the cases of multi-environment.&lt;/p&gt;
&lt;p&gt;更多关于NgRouter的详细介绍请参见&lt;a href="https://github.com/gogo-easy/ngr/wiki"&gt;NgRouter Docs&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-管理页面截图" class="anchor" aria-hidden="true" href="#管理页面截图"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;管理页面截图&lt;/h2&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="./logo/preview.png"&gt;&lt;img src="./logo/preview.png" alt="preview" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-feature" class="anchor" aria-hidden="true" href="#feature"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Feature&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;统一管理界面&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;NgRouter提供了统一的管理页面集中管理不通的网关集群（cluster），不同网关集群配置隔离，同一网关集群内的网关实例共享本集群的配置&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;配置修改实时生效&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;在管理页面对集群配置修改后，实时推送该集群的所有网关实例，立即生效&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;支持插件管理&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;NgRouter的功能以插件化的形式自由组合，实现热插拔。自带一部分基本功能性插件，每个插件实现不同功能，如认证鉴权、限流等。考虑到企业和环境差异造成的功能需求的差异，NgRouter也支持通过编写自定义插件的方式实现特殊的客制化需求。通过管理端中的“插件管理”，可由用户自行选择插件启停及优先级&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;动态上游发现&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;网关支持upstream的服务注册发现，动态更新上游节点列表而无需重启服务，降低了网关的运维复杂度&lt;/p&gt;
&lt;p&gt;支持多种负载均衡策略，如weighted round-robin, ip_hash等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;服务治理能力&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;提供上游服务治理能力，如：基于请求特征的限流、熔断等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;健康检查&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;可对上游服务进行主动或被动健康检查，发现并剔除不可用服务&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;安全性&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;支持ACL，基于IP的黑白名单，SQL注入攻击拦截&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;CLI工具&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;提供CLI工具集管理网关集群&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;REST API接口&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;提供REST API接口操作网关集群&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;性能统计&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;提供实时性能监控渠道，集成statsd，prometheus等监控体系，统计指标包括：QPS、响应时间、成功率等&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;日志&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;支持多种日志功能，如本地日志、syslog、ELK&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-deployment" class="anchor" aria-hidden="true" href="#deployment"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Deployment&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/gogo-easy/ngr/wiki/How-to-install-NgRouter(%E5%AE%89%E8%A3%85%E8%AF%B4%E6%98%8E)"&gt;Quick Start&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-release" class="anchor" aria-hidden="true" href="#release"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Release&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/gogo-easy/ngr/releases"&gt;版本发布&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-贡献者" class="anchor" aria-hidden="true" href="#贡献者"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;贡献者&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/jacobslei"&gt;@Fijian&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/yearyeardiff"&gt;@yearyeardiff&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/wl4ever"&gt;@wl4ever&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/helicopter19"&gt;@helicopter19&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;The project is licensed by &lt;a href="https://github.com/gogo-easy/ngr/blob/master/LICENSE"&gt;Apache 2.0&lt;/a&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>gogo-easy</author><guid isPermaLink="false">https://github.com/gogo-easy/ngr</guid><pubDate>Fri, 06 Dec 2019 00:05:00 GMT</pubDate></item><item><title>openwisp/openwisp-config #6 in Lua, Today</title><link>https://github.com/openwisp/openwisp-config</link><description>&lt;p&gt;&lt;i&gt;OpenWRT configuration agent for OpenWISP Controller&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body rst" data-path="README.rst"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-openwisp-config" class="anchor" aria-hidden="true" href="#openwisp-config"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;openwisp-config&lt;/h1&gt;
&lt;a href="https://github.com/openwisp/openwisp-config/releases"&gt;&lt;img src="https://camo.githubusercontent.com/74166d28ea7bd4213ab8fa56379960bc45f86aa5/687474703a2f2f696d672e736869656c64732e696f2f6769746875622f72656c656173652f6f70656e776973702f6f70656e776973702d636f6e6669672e737667" data-canonical-src="http://img.shields.io/github/release/openwisp/openwisp-config.svg" style="max-width:100%;"&gt;
&lt;/a&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href="https://openwrt.org/" rel="nofollow"&gt;OpenWRT&lt;/a&gt; configuration agent for the new
&lt;a href="https://github.com/openwisp/ansible-openwisp2"&gt;OpenWISP 2 Controller&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Want to help OpenWISP?&lt;/strong&gt; &lt;a href="http://openwisp.io/docs/general/help-us.html" rel="nofollow"&gt;Find out how to help us grow here&lt;/a&gt;.&lt;/p&gt;
&lt;a href="http://openwisp.org" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/6d1e33ea8ae0283be731dfc90c5cfab952fbbc90/687474703a2f2f6e65746a736f6e636f6e6669672e6f70656e776973702e6f72672f656e2f6c61746573742f5f696d616765732f6f70656e776973702e6f72672e737667" data-canonical-src="http://netjsonconfig.openwisp.org/en/latest/_images/openwisp.org.svg" style="max-width:100%;"&gt;
&lt;/a&gt;
&lt;div id="user-content-table-of-contents"&gt;
&lt;p&gt;&lt;strong&gt;Table of Contents&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#install-precompiled-package" id="user-content-id4"&gt;Install precompiled package&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#configuration-options" id="user-content-id5"&gt;Configuration options&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#automatic-registration" id="user-content-id6"&gt;Automatic registration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#consistent-key-generation" id="user-content-id7"&gt;Consistent key generation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#merge-configuration" id="user-content-id8"&gt;Merge configuration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#configuration-test" id="user-content-id9"&gt;Configuration test&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#disable-testing" id="user-content-id10"&gt;Disable testing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#define-custom-tests" id="user-content-id11"&gt;Define custom tests&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#hardware-id" id="user-content-id12"&gt;Hardware ID&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#unmanaged-configurations" id="user-content-id13"&gt;Unmanaged Configurations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#hooks" id="user-content-id14"&gt;Hooks&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#pre-reload-hook" id="user-content-id15"&gt;pre-reload-hook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#post-reload-hook" id="user-content-id16"&gt;post-reload-hook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#post-registration-hook" id="user-content-id17"&gt;post-registration-hook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#compiling-openwisp-config" id="user-content-id18"&gt;Compiling openwisp-config&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#compiling-a-custom-openwrt-image" id="user-content-id19"&gt;Compiling a custom OpenWRT image&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#automate-compilation-for-different-organizations" id="user-content-id20"&gt;Automate compilation for different organizations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#debugging" id="user-content-id21"&gt;Debugging&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#run-tests" id="user-content-id22"&gt;Run tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#contributing" id="user-content-id23"&gt;Contributing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#changelog" id="user-content-id24"&gt;Changelog&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#license" id="user-content-id25"&gt;License&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#support" id="user-content-id26"&gt;Support&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;hr&gt;
&lt;a name="user-content-install-precompiled-package"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-install-precompiled-package" class="anchor" aria-hidden="true" href="#install-precompiled-package"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Install precompiled package&lt;/h2&gt;
&lt;p&gt;First run:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;opkg update&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then install one of the &lt;a href="http://downloads.openwisp.io/openwisp-config/" rel="nofollow"&gt;latest builds&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;opkg install &lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt;URL&lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where &lt;code&gt;&amp;lt;URL&amp;gt;&lt;/code&gt; is the URL of the image that is suitable for your case
(we suggest &lt;code&gt;openssl&lt;/code&gt; or alternatively &lt;code&gt;mbedtls&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;For a list of the latest built images, take a look at &lt;a href="http://downloads.openwisp.io/openwisp-config/" rel="nofollow"&gt;downloads.openwisp.io/openwisp-config/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;If you need to compile the package yourself&lt;/strong&gt;, see &lt;a href="#compiling-openwisp-config"&gt;Compiling openwisp-config&lt;/a&gt;
and &lt;a href="#compiling-a-custom-openwrt-image"&gt;Compiling a custom OpenWRT image&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once installed &lt;em&gt;openwisp-config&lt;/em&gt; needs to be configured (see &lt;a href="#configuration-options"&gt;Configuration options&lt;/a&gt;)
and then started with:&lt;/p&gt;
&lt;pre&gt;/etc/init.d/openwisp_config start
&lt;/pre&gt;
&lt;p&gt;To ensure the agent is working correctly find out how to perform debugging in
the &lt;a href="#debugging"&gt;Debugging&lt;/a&gt; section.&lt;/p&gt;
&lt;a name="user-content-configuration-options"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-configuration-options" class="anchor" aria-hidden="true" href="#configuration-options"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuration options&lt;/h2&gt;
&lt;p&gt;UCI configuration options must go in &lt;code&gt;/etc/config/openwisp&lt;/code&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;url&lt;/code&gt;: url of controller, eg: &lt;code&gt;https://controller.openwisp.org&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;interval&lt;/code&gt;: time in seconds between checks for changes to the configuration, defaults to &lt;code&gt;120&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;verify_ssl&lt;/code&gt;: whether SSL verification must be performed or not, defaults to &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;shared_secret&lt;/code&gt;: shared secret, needed for &lt;a href="#automatic-registration"&gt;Automatic registration&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;consistent_key&lt;/code&gt;: whether &lt;a href="#consistent-key-generation"&gt;Consistent key generation&lt;/a&gt; is enabled or not, defaults to &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;merge_config&lt;/code&gt;: whether &lt;a href="#merge-configuration"&gt;Merge configuration&lt;/a&gt; is enabled or not, defaults to &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;test_config&lt;/code&gt;: whether a new configuration must be tested before being considered applied, defaults to &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;test_script&lt;/code&gt;: custom test script, read more about this feature in &lt;a href="#configuration-test"&gt;Configuration test&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;uuid&lt;/code&gt;: unique identifier of the router configuration in the controller application&lt;/li&gt;
&lt;li&gt;&lt;code&gt;key&lt;/code&gt;: key required to download the configuration&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hardware_id_script&lt;/code&gt;: custom script to read out a hardware id (e.g. a serial number), read more about this feature in &lt;a href="#hardware-id"&gt;Hardware ID&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;hardware_id_key&lt;/code&gt;: whether to use the hardware id for key generation or not, defaults to &lt;code&gt;1&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;unmanaged&lt;/code&gt;: list of config sections which won't be overwritten, see &lt;a href="#unmanaged-configurations"&gt;Unmanaged Configurations&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;capath&lt;/code&gt;: value passed to curl &lt;code&gt;--capath&lt;/code&gt; argument, by default is empty; see also &lt;a href="https://curl.haxx.se/docs/manpage.html#--capath" rel="nofollow"&gt;curl capath argument&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cacert&lt;/code&gt;: value passed to curl &lt;code&gt;--cacert&lt;/code&gt; argument, by default is empty; see also &lt;a href="https://curl.haxx.se/docs/manpage.html#--cacert" rel="nofollow"&gt;curl cacert argument&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;connect_timeout&lt;/code&gt;: value passed to curl &lt;code&gt;--connect-timeout&lt;/code&gt; argument, defaults to &lt;code&gt;15&lt;/code&gt;; see &lt;a href="https://curl.haxx.se/docs/manpage.html#--connect-timeout" rel="nofollow"&gt;curl connect-timeout argument&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;max_time&lt;/code&gt;: value passed to curl &lt;code&gt;--max-time&lt;/code&gt; argument, defaults to &lt;code&gt;30&lt;/code&gt;; see &lt;a href="https://curl.haxx.se/docs/manpage.html#-m" rel="nofollow"&gt;curl connect-timeout argument&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;mac_interface&lt;/code&gt;: the interface from which the MAC address is taken when performing automatic registration, defaults to &lt;code&gt;eth0&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;management_interface&lt;/code&gt;: management interface name (both openwrt UCI names and
linux interface names are supported), it's used to collect the management interface ip address&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pre_reload_hook&lt;/code&gt;: path to custom executable script, see &lt;a href="#pre-reload-hook"&gt;pre-reload-hook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;post_reload_hook&lt;/code&gt;: path to custom executable script, see &lt;a href="#post-reload-hook"&gt;post-reload-hook&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;post_registration_hook&lt;/code&gt;: path to custom executable script, see &lt;a href="#post-registration-hook"&gt;post-registration-hook&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-automatic-registration"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-automatic-registration" class="anchor" aria-hidden="true" href="#automatic-registration"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Automatic registration&lt;/h2&gt;
&lt;p&gt;When the agent starts, if both &lt;code&gt;uuid&lt;/code&gt; and &lt;code&gt;key&lt;/code&gt; are not defined, it will consider
the router to be unregistered and it will attempt to perform an automatic registration.&lt;/p&gt;
&lt;p&gt;The automatic registration is performed only if &lt;code&gt;shared_secret&lt;/code&gt; is correctly set.&lt;/p&gt;
&lt;p&gt;The device will choose as name one of its mac addresses, unless its hostname is not &lt;code&gt;OpenWrt&lt;/code&gt;,
in the latter case it will simply register itself with the current hostname.&lt;/p&gt;
&lt;p&gt;When the registration is completed, the agent will automatically set &lt;code&gt;uuid&lt;/code&gt; and &lt;code&gt;key&lt;/code&gt;
in &lt;code&gt;/etc/config/openwisp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To enable this feature by default on your firmware images, follow the procedure described in
&lt;a href="#compiling-a-custom-openwrt-image"&gt;Compiling a custom OpenWRT image&lt;/a&gt;.&lt;/p&gt;
&lt;a name="user-content-consistent-key-generation"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-consistent-key-generation" class="anchor" aria-hidden="true" href="#consistent-key-generation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Consistent key generation&lt;/h2&gt;
&lt;p&gt;When using &lt;a href="#automatic-registration"&gt;Automatic registration&lt;/a&gt;, this feature allows devices to keep the same configuration
even if reset or reflashed.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;key&lt;/code&gt; is generated consistently with an operation like &lt;code&gt;md5sum(mac_address + shared_secret)&lt;/code&gt;;
this allows the controller application to recognize that an existing device is registering itself again.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;mac_interface&lt;/code&gt; configuration key specifies which interface is used to calculate the mac address,
this setting defaults to &lt;code&gt;eth0&lt;/code&gt;. If no &lt;code&gt;eth0&lt;/code&gt; interface exists, the first non-loopback, non-bridge and non-tap
interface is used. You won't need to change this setting often, but if you do, ensure you choose a physical
interface which has constant mac address.&lt;/p&gt;
&lt;p&gt;The "Consistent key generation" feature is enabled by default, but must be enabled also in the
controller application in order to work.&lt;/p&gt;
&lt;a name="user-content-merge-configuration"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-merge-configuration" class="anchor" aria-hidden="true" href="#merge-configuration"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Merge configuration&lt;/h2&gt;
&lt;p&gt;By default the remote configuration is merged with the local one. This has several advantages:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;less bolierplate configuration stored in the remote controller&lt;/li&gt;
&lt;li&gt;local users can change local configurations without fear of losing their changes&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It is possible to turn this feature off by setting &lt;code&gt;merge_config&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt; in &lt;code&gt;/etc/config/openwisp&lt;/code&gt;.&lt;/p&gt;
&lt;a name="user-content-configuration-test"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-configuration-test" class="anchor" aria-hidden="true" href="#configuration-test"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Configuration test&lt;/h2&gt;
&lt;p&gt;When a new configuration is downloaded, the agent will first backup the current running
configuration, then it will try to apply the new one and perform a basic test, which consists
in trying to contact the controller again;&lt;/p&gt;
&lt;p&gt;If the test succeeds, the configuration is considered applied and the backup is deleted.&lt;/p&gt;
&lt;p&gt;If the test fails, the backup is restored and the agent will log the failure via syslog
(see &lt;a href="#debugging"&gt;Debugging&lt;/a&gt; for more information on auditing logs).&lt;/p&gt;
&lt;a name="user-content-disable-testing"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-disable-testing" class="anchor" aria-hidden="true" href="#disable-testing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Disable testing&lt;/h3&gt;
&lt;p&gt;To disable this feature, set the &lt;code&gt;test_config&lt;/code&gt; option to &lt;code&gt;0&lt;/code&gt;, then reload/restart &lt;em&gt;openwisp_config&lt;/em&gt;.&lt;/p&gt;
&lt;a name="user-content-define-custom-tests"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-define-custom-tests" class="anchor" aria-hidden="true" href="#define-custom-tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Define custom tests&lt;/h3&gt;
&lt;p&gt;If the default test does not satisfy your needs, you can define your own tests in an
&lt;strong&gt;executable&lt;/strong&gt; script and indicate the path to this script in the &lt;code&gt;test_script&lt;/code&gt; config option.&lt;/p&gt;
&lt;p&gt;If the exit code of the executable script is higher than &lt;code&gt;0&lt;/code&gt; the test will be considered failed.&lt;/p&gt;
&lt;a name="user-content-hardware-id"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-hardware-id" class="anchor" aria-hidden="true" href="#hardware-id"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hardware ID&lt;/h2&gt;
&lt;p&gt;It is possible to use a unique hardware id for device identification, for example a serial number.&lt;/p&gt;
&lt;p&gt;If &lt;code&gt;hardware_id_script&lt;/code&gt; contains the path to an executable script, it will be used to read out the hardware
id from the device. The hardware id will then be sent to the controller when the device is registered.&lt;/p&gt;
&lt;p&gt;If the above configuration option is set then the hardware id will also be used for generating the device key,
instead of the mac address. If you use a hardware id script but prefer to use the mac address for key
generation then set &lt;code&gt;hardware_id_key&lt;/code&gt; to &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For settings in &lt;code&gt;django-netjsonconfig&lt;/code&gt; related to the hardware id, take a look at the &lt;a href="https://github.com/openwisp/django-netjsonconfig/#netjsonconfig-hardware-id-enabled"&gt;README&lt;/a&gt;&lt;/p&gt;
&lt;a name="user-content-unmanaged-configurations"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-unmanaged-configurations" class="anchor" aria-hidden="true" href="#unmanaged-configurations"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Unmanaged Configurations&lt;/h2&gt;
&lt;p&gt;In some cases it could be necessary to ensure that some configuration sections won't be
overwritten by the controller.&lt;/p&gt;
&lt;p&gt;These settings are called "unmanaged", in the sense that they are not managed remotely.
In the default configuration of &lt;em&gt;openwisp_config&lt;/em&gt; there are no unmanaged settings.&lt;/p&gt;
&lt;p&gt;Example unmanaged settings:&lt;/p&gt;
&lt;pre&gt;config controller 'http'
        ...
        list unmanaged 'system.@led'
        list unmanaged 'network.loopback'
        list unmanaged 'network.@switch'
        list unmanaged 'network.@switch_vlan'
        ...
&lt;/pre&gt;
&lt;p&gt;Note the lines with the @ sign; this syntax means any UCI section of the specified type will be unmanaged.&lt;/p&gt;
&lt;p&gt;In the previous example, the loopback interface, all &lt;code&gt;led settings&lt;/code&gt;, all &lt;code&gt;switch&lt;/code&gt; and &lt;code&gt;switch_vlan&lt;/code&gt;
directives will never be overwritten by the remote configuration and will only be editable via SSH
or via the web interface.&lt;/p&gt;
&lt;a name="user-content-hooks"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-hooks" class="anchor" aria-hidden="true" href="#hooks"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Hooks&lt;/h2&gt;
&lt;p&gt;Below are described the available hooks in &lt;em&gt;openwisp-config&lt;/em&gt;.&lt;/p&gt;
&lt;a name="user-content-pre-reload-hook"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-pre-reload-hook" class="anchor" aria-hidden="true" href="#pre-reload-hook"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;pre-reload-hook&lt;/h3&gt;
&lt;p&gt;Defaults to &lt;code&gt;/etc/openwisp/pre-reload-hook&lt;/code&gt;; the hook is not called if the
path does not point to an executable script file.&lt;/p&gt;
&lt;p&gt;This hook is called each time &lt;em&gt;openwisp-config&lt;/em&gt; applies a configuration, but &lt;strong&gt;before services are reloaded&lt;/strong&gt;,
more precisely in these situations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;after a new remote configuration is downloaded and applied&lt;/li&gt;
&lt;li&gt;after a configuration test failed (see &lt;a href="#configuration-test"&gt;Configuration test&lt;/a&gt;) and a previous backup is restored&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can use this hook to perform custom actions before services are reloaded, eg: to perform
auto-configuration with &lt;a href="http://libre-mesh.org/" rel="nofollow"&gt;LibreMesh&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Example configuration:&lt;/p&gt;
&lt;pre&gt;config controller 'http'
        ...
        option pre_reload_hook '/usr/sbin/my-pre-reload-hook'
        ...
&lt;/pre&gt;
&lt;p&gt;Complete example:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; set hook in configuration&lt;/span&gt;
uci &lt;span class="pl-c1"&gt;set&lt;/span&gt; openwisp.http.pre_reload_hook=&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;'&lt;/span&gt;/usr/sbin/my-pre-reload-hook&lt;span class="pl-pds"&gt;'&lt;/span&gt;&lt;/span&gt;
uci commit openwisp
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; create hook script&lt;/span&gt;
cat &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="pl-k"&gt;EOF&lt;/span&gt; &amp;gt; /usr/sbin/my-pre-reload-hook&lt;/span&gt;
&lt;span class="pl-s"&gt;#!/bin/sh&lt;/span&gt;
&lt;span class="pl-s"&gt;# put your custom operations here&lt;/span&gt;
&lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;EOF&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; make script executable&lt;/span&gt;
chmod +x /usr/sbin/my-pre-reload-hook
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; reload openwisp_config by using procd's convenient utility&lt;/span&gt;
reload_config&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-post-reload-hook"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-post-reload-hook" class="anchor" aria-hidden="true" href="#post-reload-hook"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;post-reload-hook&lt;/h3&gt;
&lt;p&gt;Defaults to &lt;code&gt;/etc/openwisp/post-reload-hook&lt;/code&gt;; the hook is not called if the
path does not point to an executable script file.&lt;/p&gt;
&lt;p&gt;Same as pre_reload_hook but with the difference that this hook is called
after the configuration services have been reloaded.&lt;/p&gt;
&lt;a name="user-content-post-registration-hook"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-post-registration-hook" class="anchor" aria-hidden="true" href="#post-registration-hook"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;post-registration-hook&lt;/h3&gt;
&lt;p&gt;Defaults to &lt;code&gt;/etc/openwisp/post-registration-hook&lt;/code&gt;;&lt;/p&gt;
&lt;p&gt;Path to an executable script that will be called after the registration is completed.&lt;/p&gt;
&lt;a name="user-content-compiling-openwisp-config"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-compiling-openwisp-config" class="anchor" aria-hidden="true" href="#compiling-openwisp-config"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compiling openwisp-config&lt;/h2&gt;
&lt;p&gt;There are 4 variants of &lt;em&gt;openwisp-config&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;openwisp-config-openssl&lt;/strong&gt;: depends on &lt;em&gt;ca-certificates&lt;/em&gt; and &lt;em&gt;libopenssl&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;openwisp-config-mbedtls&lt;/strong&gt;: depends on &lt;em&gt;ca-certificates&lt;/em&gt; and &lt;em&gt;libmbedtls&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;openwisp-config-cyassl&lt;/strong&gt;: depends on &lt;em&gt;ca-certificates&lt;/em&gt; and &lt;em&gt;libcyassl&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;openwisp-config-nossl&lt;/strong&gt;: doesn't depend on any SSL library and doesn't install trusted CA certificates&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following procedure illustrates how to compile all the &lt;em&gt;openwisp-config&lt;/em&gt; variants and their dependencies:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;git clone https://github.com/openwrt/openwrt.git openwrt
&lt;span class="pl-c1"&gt;cd&lt;/span&gt; openwrt
git checkout openwrt-18.06

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; configure feeds&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;src-git openwisp https://github.com/openwisp/openwisp-config.git&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; feeds.conf
cat feeds.conf.default &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; feeds.conf
./scripts/feeds update -a
./scripts/feeds install -a
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; any arch/target is fine because the package is architecture indipendent&lt;/span&gt;
arch=&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;ar71xx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_TARGET_&lt;span class="pl-smi"&gt;$arch&lt;/span&gt;=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; .config&lt;span class="pl-k"&gt;;&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_PACKAGE_openwisp-config-openssl=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_PACKAGE_openwisp-config-mbedtls=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_PACKAGE_openwisp-config-cyassl=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_PACKAGE_openwisp-config-nossl=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
make defconfig
make tools/install
make toolchain/install
make package/openwisp-config/compile&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Alternatively, you can configure your build interactively with &lt;code&gt;make menuconfig&lt;/code&gt;, in this case
you will need to select the &lt;em&gt;openwisp-config&lt;/em&gt; variant by going to &lt;code&gt;Administration &amp;gt; openwisp&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;git clone https://github.com/openwrt/openwrt.git openwrt
&lt;span class="pl-c1"&gt;cd&lt;/span&gt; openwrt
git checkout openwrt-18.06

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; configure feeds&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;src-git openwisp https://github.com/openwisp/openwisp-config.git&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; feeds.conf
cat feeds.conf.default &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; feeds.conf
./scripts/feeds update -a
./scripts/feeds install -a
make menuconfig
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; go to Administration &amp;gt; openwisp and select the variant you need interactively&lt;/span&gt;
make -j1 V=s&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-compiling-a-custom-openwrt-image"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-compiling-a-custom-openwrt-image" class="anchor" aria-hidden="true" href="#compiling-a-custom-openwrt-image"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Compiling a custom OpenWRT image&lt;/h2&gt;
&lt;p&gt;If you are managing many devices and customizing your &lt;code&gt;openwisp-config&lt;/code&gt; configuration by hand on
each new device, you should switch to using a custom OpenWRT firmware image that includes
&lt;code&gt;openwisp-config&lt;/code&gt; and its precompiled configuration file, this strategy has a few important benefits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you can save yourself the effort of installing and configuring &lt;code&gt;openwisp-config&lt;/code&gt; on each device&lt;/li&gt;
&lt;li&gt;you can enable &lt;a href="#automatic-registration"&gt;Automatic registration&lt;/a&gt; by setting &lt;code&gt;shared_secret&lt;/code&gt;,
hence saving extra time and effort to register each device on the controller app&lt;/li&gt;
&lt;li&gt;if you happen to reset the firmware to initial settings, these precompiled settings will be restored as well&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The following procedure illustrates how to compile a custom &lt;a href="https://openwrt.org/" rel="nofollow"&gt;OpenWRT 18.06.1&lt;/a&gt;
image with a precompiled minimal &lt;code&gt;/etc/config/openwisp&lt;/code&gt; configuration file:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;git clone https://github.com/openwrt/openwrt.git openwrt
&lt;span class="pl-c1"&gt;cd&lt;/span&gt; openwrt
git checkout openwrt-18.06

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; include precompiled file&lt;/span&gt;
mkdir -p files/etc/config
cat &lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="pl-k"&gt;EOF&lt;/span&gt; &amp;gt; files/etc/config/openwisp&lt;/span&gt;
&lt;span class="pl-s"&gt;config controller 'http'&lt;/span&gt;
&lt;span class="pl-s"&gt;    # change the values of the following 2 options&lt;/span&gt;
&lt;span class="pl-s"&gt;    option url 'https://openwisp2.mydomain.com'&lt;/span&gt;
&lt;span class="pl-s"&gt;    option shared_secret 'mysharedsecret'&lt;/span&gt;
&lt;span class="pl-s"&gt;&lt;span class="pl-k"&gt;EOF&lt;/span&gt;&lt;/span&gt;

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; configure feeds&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;src-git openwisp https://github.com/openwisp/openwisp-config.git&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; feeds.conf
cat feeds.conf.default &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; feeds.conf
./scripts/feeds update -a
./scripts/feeds install -a
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; replace with your desired arch target&lt;/span&gt;
arch=&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;ar71xx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_TARGET_&lt;span class="pl-smi"&gt;$arch&lt;/span&gt;=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&lt;/span&gt; .config
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_PACKAGE_openwisp-config-openssl=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
&lt;span class="pl-c1"&gt;echo&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;CONFIG_LIBCURL_OPENSSL=y&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-k"&gt;&amp;gt;&amp;gt;&lt;/span&gt; .config
make defconfig
&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; compile with verbose output&lt;/span&gt;
make -j1 V=s&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-automate-compilation-for-different-organizations"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-automate-compilation-for-different-organizations" class="anchor" aria-hidden="true" href="#automate-compilation-for-different-organizations"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Automate compilation for different organizations&lt;/h2&gt;
&lt;p&gt;If you are working with OpenWISP, there are chances you may be compiling several images for different
organizations (clients or non-profit communities) and use cases (full featured, mesh, 4G, etc).&lt;/p&gt;
&lt;p&gt;Doing this by hand without tracking your changes can lead you into a very disorganized and messy situation.&lt;/p&gt;
&lt;p&gt;To alleviate this pain you can use &lt;a href="https://github.com/openwisp/ansible-openwisp2-imagegenerator"&gt;ansible-openwisp2-imagegenerator&lt;/a&gt;.&lt;/p&gt;
&lt;a name="user-content-debugging"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-debugging" class="anchor" aria-hidden="true" href="#debugging"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Debugging&lt;/h2&gt;
&lt;p&gt;Debugging &lt;em&gt;openwisp-config&lt;/em&gt; can be easily done by using the &lt;code&gt;logread&lt;/code&gt; command:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;logread&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Use grep to filter out any other log message:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;logread &lt;span class="pl-k"&gt;|&lt;/span&gt; grep openwisp&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you are in doubt openwisp-config is running at all, you can check with:&lt;/p&gt;
&lt;pre&gt;ps | grep openwisp
&lt;/pre&gt;
&lt;p&gt;You should see something like:&lt;/p&gt;
&lt;pre&gt;3800 root      1200 S    {openwisp_config} /bin/sh /usr/sbin/openwisp_config --url https://openwisp2.mydomain.com --verify-ssl 1 --consistent-key 1 ...
&lt;/pre&gt;
&lt;p&gt;You can inspect the version of openwisp-config currently installed with:&lt;/p&gt;
&lt;pre&gt;openwisp_config --version
&lt;/pre&gt;
&lt;a name="user-content-run-tests"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-run-tests" class="anchor" aria-hidden="true" href="#run-tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Run tests&lt;/h2&gt;
&lt;p&gt;To run the unit tests, you must install the required dependencies first; to do this, you can take
a look at the &lt;a href="https://github.com/openwisp/openwisp-config/blob/master/install-dev.sh"&gt;install-dev.sh&lt;/a&gt;
script.&lt;/p&gt;
&lt;p&gt;You can run all the unit tests by launching the dedicated script:&lt;/p&gt;
&lt;pre&gt;./runtests
&lt;/pre&gt;
&lt;p&gt;Alternatively, you can run specifc tests, eg:&lt;/p&gt;
&lt;pre&gt;cd openwisp-config/tests/
lua test_utils.lua -v
&lt;/pre&gt;
&lt;a name="user-content-contributing"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Please read the &lt;a href="http://openwisp.io/docs/developer/contributing.html" rel="nofollow"&gt;OpenWISP contributing guidelines&lt;/a&gt;.&lt;/p&gt;
&lt;a name="user-content-changelog"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-changelog" class="anchor" aria-hidden="true" href="#changelog"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Changelog&lt;/h2&gt;
&lt;p&gt;See &lt;a href="https://github.com/openwisp/openwisp-config/blob/master/CHANGELOG.rst"&gt;CHANGELOG&lt;/a&gt;.&lt;/p&gt;
&lt;a name="user-content-license"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-license" class="anchor" aria-hidden="true" href="#license"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;License&lt;/h2&gt;
&lt;p&gt;See &lt;a href="https://github.com/openwisp/openwisp-config/blob/master/LICENSE"&gt;LICENSE&lt;/a&gt;.&lt;/p&gt;
&lt;a name="user-content-support"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-support" class="anchor" aria-hidden="true" href="#support"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Support&lt;/h2&gt;
&lt;p&gt;See &lt;a href="http://openwisp.org/support.html" rel="nofollow"&gt;OpenWISP Support Channels&lt;/a&gt;.&lt;/p&gt;

&lt;/article&gt;&lt;/div&gt;</description><author>openwisp</author><guid isPermaLink="false">https://github.com/openwisp/openwisp-config</guid><pubDate>Fri, 06 Dec 2019 00:06:00 GMT</pubDate></item><item><title>docker/dockercraft #7 in Lua, Today</title><link>https://github.com/docker/dockercraft</link><description>&lt;p&gt;&lt;i&gt;Docker + Minecraft = Dockercraft&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="instapaper_body md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-dockercraft" class="anchor" aria-hidden="true" href="#dockercraft"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Dockercraft&lt;/h1&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/logo.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/logo.png?raw=true" alt="Dockercraft" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;A simple Minecraft Docker client, to visualize and manage Docker containers.&lt;/p&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/dockercraft.gif?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/dockercraft.gif?raw=true" alt="Dockercraft" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://www.youtube.com/watch?v=eZDlJgJf55o" rel="nofollow"&gt;YouTube video&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;WARNING: Please use Dockercraft on your local machine only.
It currently doesn't support authentication.
Every player should be considered a root user!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;&lt;a id="user-content-how-to-run-dockercraft" class="anchor" aria-hidden="true" href="#how-to-run-dockercraft"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How to run Dockercraft&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Install Minecraft: &lt;a href="https://minecraft.net" rel="nofollow"&gt;minecraft.net&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The Minecraft client hasn't been modified, just get the official release.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Pull or build Dockercraft image:&lt;/strong&gt; (an official image will be available soon)&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker pull gaetan/dockercraft
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;git clone git@github.com:docker/dockercraft.git
docker build -t gaetan/dockercraft dockercraft
&lt;/code&gt;&lt;/pre&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Run Dockercraft container:&lt;/strong&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run -t -i -d -p 25565:25565 \
-v /var/run/docker.sock:/var/run/docker.sock \
--name dockercraft \
gaetan/dockercraft
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Mounting &lt;code&gt;/var/run/docker.sock&lt;/code&gt; inside the container is necessary to send requests to the Docker remote API.&lt;/p&gt;
&lt;p&gt;The default port for a Minecraft server is &lt;em&gt;25565&lt;/em&gt;, if you prefer a different one: &lt;code&gt;-p &amp;lt;port&amp;gt;:25565&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Open Minecraft &amp;gt; Multiplayer &amp;gt; Add Server&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;The server address is the IP of Docker host. No need to specify a port if you used the default one.&lt;/p&gt;
&lt;p&gt;If you're using &lt;a href="https://docs.docker.com/machine/install-machine/" rel="nofollow"&gt;Docker Machine&lt;/a&gt;: &lt;code&gt;docker-machine ip &amp;lt;machine_name&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Join Server!&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;You should see at least one container in your world, which is the one hosting your Dockercraft server.&lt;/p&gt;
&lt;p&gt;You can start, stop and remove containers interacting with levers and buttons. Some Docker commands are also supported directly via Minecraft's chat window, which is displayed by pressing the &lt;code&gt;T&lt;/code&gt; key (default) or &lt;code&gt;/&lt;/code&gt; key.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;A command always starts with a &lt;code&gt;/&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you open the prompt using the &lt;code&gt;/&lt;/code&gt; key, it will be prefilled with a &lt;code&gt;/&lt;/code&gt; character, but if you open it with the &lt;code&gt;T&lt;/code&gt; key, it will not be prefilled and you will have to type a &lt;code&gt;/&lt;/code&gt; yourself before typing your docker command.&lt;/p&gt;
&lt;p&gt;example: &lt;code&gt;/docker run redis&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/landscape.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/landscape.png?raw=true" alt="Dockercraft" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-customizing-dockercraft" class="anchor" aria-hidden="true" href="#customizing-dockercraft"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Customizing Dockercraft&lt;/h2&gt;
&lt;p&gt;Do you find the plains too plain?
If so, you are in luck!&lt;/p&gt;
&lt;p&gt;Dockercraft can be customised to use any of the &lt;a href="https://github.com/cuberite/cuberite/blob/7f8a4eb7264a12ca2035b4e4d412485e01f309d4/src/BiomeDef.cpp#L17"&gt;Biomes&lt;/a&gt; and &lt;a href="https://github.com/cuberite/cuberite/blob/7f8a4eb7264a12ca2035b4e4d412485e01f309d4/src/Generating/ComposableGenerator.cpp#L299"&gt;Finishers&lt;/a&gt; supported by Cuberite!&lt;/p&gt;
&lt;p&gt;You can pass these additional arguments to your &lt;code&gt;docker run&lt;/code&gt; command:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;docker run -t -i -d -p 25565:25565 \
    -v /var/run/docker.sock:/var/run/docker.sock \
    --name dockercraft \
    gaetan/dockercraft &amp;lt;biome&amp;gt; &amp;lt;groundlevel&amp;gt; &amp;lt;sealevel&amp;gt; &amp;lt;finishers&amp;gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Here are some examples:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Do you long for the calm of the oceans?&lt;/strong&gt;
&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/ocean.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/ocean.png?raw=true" alt="oceans" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Try &lt;code&gt;Ocean 50 63&lt;/code&gt;, or for a more frozen alternative, &lt;code&gt;FrozenOcean 50 63 Ice&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Or perhaps the heat of the desert?&lt;/strong&gt;
&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/desert.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/desert.png?raw=true" alt="desert" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Then &lt;code&gt;Desert 63 0 DeadBushes&lt;/code&gt; is what you need&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Are you pining for the... Pines?&lt;/strong&gt;
&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/forest.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/forest.png?raw=true" alt="forest" style="max-width:100%;"&gt;&lt;/a&gt;
We have you covered. Try &lt;code&gt;Forest 63 0 Trees&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Or maybe you are looking for fun and games?&lt;/strong&gt;
&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/jungle.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/jungle.png?raw=true" alt="jungle" style="max-width:100%;"&gt;&lt;/a&gt;
If so, Welcome to the Jungle. &lt;code&gt;Jungle 63 0 Trees&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-upcoming-features" class="anchor" aria-hidden="true" href="#upcoming-features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Upcoming features&lt;/h2&gt;
&lt;p&gt;This is just the beginning for Dockercraft! We should be able to support a lot more Docker features like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;List &lt;a href="https://docs.docker.com/machine/" rel="nofollow"&gt;Docker Machines&lt;/a&gt; and use portals to see what's inside&lt;/li&gt;
&lt;li&gt;Support more Docker commands&lt;/li&gt;
&lt;li&gt;Display &lt;a href="https://docs.docker.com/v1.8/reference/commandline/logs/" rel="nofollow"&gt;logs&lt;/a&gt; (for each container, pushing a simple button)&lt;/li&gt;
&lt;li&gt;Represent links&lt;/li&gt;
&lt;li&gt;Docker networking&lt;/li&gt;
&lt;li&gt;Docker volumes&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you're interested about Dockercraft's design, discussions happen in &lt;a href="https://github.com/docker/dockercraft/issues/19"&gt;that issue&lt;/a&gt;.
Also, we're using &lt;a href="https://ephtracy.github.io/" rel="nofollow"&gt;Magicavoxel&lt;/a&gt; to do these nice prototypes:&lt;/p&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/voxelproto.jpg?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/voxelproto.jpg?raw=true" alt="Dockercraft" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;You can find our Magicavoxel patterns in that folder.&lt;/p&gt;
&lt;p&gt;To get fresh news, follow our Twitter account: &lt;a href="https://twitter.com/dockercraft" rel="nofollow"&gt;@dockercraft&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-how-it-works" class="anchor" aria-hidden="true" href="#how-it-works"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;How it works&lt;/h2&gt;
&lt;p&gt;The Minecraft client itself remains unmodified. All operations are done server side.&lt;/p&gt;
&lt;p&gt;The Minecraft server we use is &lt;a href="http://cuberite.org" rel="nofollow"&gt;http://cuberite.org&lt;/a&gt;. A custom Minecraft compatible game server written in C++. &lt;a href="https://github.com/cuberite/cuberite"&gt;github repo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This server accepts plugins, scripts written in Lua. So we did one for Docker. (world/Plugins/Docker)&lt;/p&gt;
&lt;p&gt;Unfortunately, there's no nice API to communicate with these plugins. But there's a webadmin, and plugins can be responsible for "webtabs".&lt;/p&gt;
&lt;div class="highlight highlight-source-lua"&gt;&lt;pre&gt;Plugin:&lt;span class="pl-c1"&gt;AddWebTab&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Docker&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,HandleRequest_Docker)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Basically it means the plugin can catch POST requests sent to &lt;code&gt;http://127.0.0.1:8080/webadmin/Docker/Docker&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-goproxy" class="anchor" aria-hidden="true" href="#goproxy"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Goproxy&lt;/h3&gt;
&lt;p&gt;Events from the Docker remote API are transmitted to the Lua plugin by a small daemon (written in Go). (go/src/goproxy)&lt;/p&gt;
&lt;div class="highlight highlight-source-go"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;func&lt;/span&gt; &lt;span class="pl-en"&gt;MCServerRequest&lt;/span&gt;(&lt;span class="pl-v"&gt;data&lt;/span&gt; &lt;span class="pl-v"&gt;url&lt;/span&gt;.&lt;span class="pl-v"&gt;Values&lt;/span&gt;, &lt;span class="pl-v"&gt;client&lt;/span&gt; *&lt;span class="pl-v"&gt;http&lt;/span&gt;.&lt;span class="pl-v"&gt;Client&lt;/span&gt;) {
	&lt;span class="pl-smi"&gt;req&lt;/span&gt;, &lt;span class="pl-smi"&gt;_&lt;/span&gt; &lt;span class="pl-k"&gt;:=&lt;/span&gt; http.&lt;span class="pl-c1"&gt;NewRequest&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;POST&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;http://127.0.0.1:8080/webadmin/Docker/Docker&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, strings.&lt;span class="pl-c1"&gt;NewReader&lt;/span&gt;(data.&lt;span class="pl-c1"&gt;Encode&lt;/span&gt;()))
	req.&lt;span class="pl-smi"&gt;Header&lt;/span&gt;.&lt;span class="pl-c1"&gt;Set&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;Content-Type&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;application/x-www-form-urlencoded&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
	req.&lt;span class="pl-c1"&gt;SetBasicAuth&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;admin&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;admin&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
	client.&lt;span class="pl-c1"&gt;Do&lt;/span&gt;(req)
}&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The goproxy binary can also be executed with parameters from the Lua plugin, to send requests to the daemon:&lt;/p&gt;
&lt;div class="highlight highlight-source-lua"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;function&lt;/span&gt; &lt;span class="pl-en"&gt;PlayerJoined&lt;/span&gt;(&lt;span class="pl-smi"&gt;Player&lt;/span&gt;)
	&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;--&lt;/span&gt; refresh containers&lt;/span&gt;
	r &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;os.execute&lt;/span&gt;(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;goproxy containers&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)
&lt;span class="pl-k"&gt;end&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-contributing" class="anchor" aria-hidden="true" href="#contributing"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributing&lt;/h2&gt;
&lt;p&gt;Want to hack on Dockercraft? &lt;a href="https://github.com/docker/docker/blob/master/CONTRIBUTING.md"&gt;Docker's contributions guidelines&lt;/a&gt; apply.&lt;/p&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="https://github.com/docker/dockercraft/raw/master/docs/img/contribute.png?raw=true"&gt;&lt;img src="https://github.com/docker/dockercraft/raw/master/docs/img/contribute.png?raw=true" alt="Dockercraft" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>docker</author><guid isPermaLink="false">https://github.com/docker/dockercraft</guid><pubDate>Fri, 06 Dec 2019 00:07:00 GMT</pubDate></item></channel></rss>
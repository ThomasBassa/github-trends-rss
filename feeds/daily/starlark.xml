<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>GitHub Trending: Starlark, Today</title><link>https://github.com/trending/starlark?since=daily</link><description>The top repositories on GitHub for starlark, measured daily</description><pubDate>Sun, 02 Feb 2020 01:10:51 GMT</pubDate><lastBuildDate>Sun, 02 Feb 2020 01:10:51 GMT</lastBuildDate><generator>PyRSS2Gen-1.1.0</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><ttl>720</ttl><item><title>bazelbuild/rules_nodejs #1 in Starlark, Today</title><link>https://github.com/bazelbuild/rules_nodejs</link><description>&lt;p&gt;&lt;i&gt;JavaScript and NodeJS rules for Bazel&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-javascript-rules-for-bazel" class="anchor" aria-hidden="true" href="#javascript-rules-for-bazel"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;JavaScript rules for Bazel&lt;/h1&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align="center"&gt;Circle CI&lt;/th&gt;
&lt;th align="center"&gt;Bazel CI&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align="center"&gt;&lt;a href="https://circleci.com/gh/bazelbuild/rules_nodejs" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/fd953ef125782640ff7103c7f626af7a135c034c/68747470733a2f2f636972636c6563692e636f6d2f67682f62617a656c6275696c642f72756c65735f6e6f64656a732e7376673f7374796c653d737667" alt="CircleCI" data-canonical-src="https://circleci.com/gh/bazelbuild/rules_nodejs.svg?style=svg" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/td&gt;
&lt;td align="center"&gt;&lt;a href="https://buildkite.com/bazel/nodejs-rules-nodejs-postsubmit" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/aaa3b11a22f6eb0ac53d6386e9e34223bc524f2b/68747470733a2f2f62616467652e6275696c646b6974652e636f6d2f61663161353932623339623131393233656630663532336362623232336464336462643631363239663862633831336330372e7376673f6272616e63683d6d6173746572" alt="Build status" data-canonical-src="https://badge.buildkite.com/af1a592b39b11923ef0f523cbb223dd3dbd61629f8bc813c07.svg?branch=master" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;The nodejs rules integrate NodeJS development toolchain and runtime with Bazel.&lt;/p&gt;
&lt;p&gt;This toolchain can be used to build applications that target a browser runtime,
so this repo can be thought of as "JavaScript rules for Bazel" as well. (We would call this &lt;code&gt;rules_javascript&lt;/code&gt; if renames weren't so disruptive.)&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Documentation&lt;/h2&gt;
&lt;p&gt;Comprehensive documentation for installing and using the rules, including generated API docs:
&lt;a href="https://bazelbuild.github.io/rules_nodejs/" rel="nofollow"&gt;https://bazelbuild.github.io/rules_nodejs/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-quickstart" class="anchor" aria-hidden="true" href="#quickstart"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart&lt;/h2&gt;
&lt;p&gt;This is the fastest way to get started.
See the &lt;a href="https://bazelbuild.github.io/rules_nodejs/install.html" rel="nofollow"&gt;installation documentation&lt;/a&gt; for details and alternative methods, or if you already have a Bazel project and you're adding Node/JavaScript support to it.&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ npm init @bazel&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;or if you prefer yarn,&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;$ yarn create @bazel&lt;/pre&gt;&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;These commands are equivalent to &lt;code&gt;npx @bazel/create&lt;/code&gt; which downloads the latest version of the &lt;code&gt;@bazel/create&lt;/code&gt; package from npm and runs the program contained.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;See the output of the tool for command-line options and next steps.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-adopters" class="anchor" aria-hidden="true" href="#adopters"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Adopters&lt;/h2&gt;
&lt;p&gt;Thanks to the following active users!&lt;/p&gt;
&lt;p&gt;Open-source repositories:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Angular: &lt;a href="https://github.com/angular/angular"&gt;Angular monorepo&lt;/a&gt;, &lt;a href="https://github.com/angular/angular-cli"&gt;CLI&lt;/a&gt;, &lt;a href="https://github.com/angular/components"&gt;Components&lt;/a&gt;, &lt;a href="https://github.com/angular/universal"&gt;Universal&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Tensorflow: &lt;a href="https://github.com/tensorflow/tfjs"&gt;tf.js&lt;/a&gt; and &lt;a href="https://github.com/tensorflow/tensorboard"&gt;tensorboard&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/SeleniumHQ/selenium"&gt;Selenium&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/ngrx/platform"&gt;NgRX&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/angular/tsickle"&gt;tsickle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/google/incremental-dom"&gt;incremental-dom&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/dataform-co/dataform"&gt;dataform&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/kubernetes/test-infra"&gt;Kubernetes test-infra&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/improbable-eng/ts-protoc-gen"&gt;ts-protoc-gen&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/thesayyn/protoc-gen-ts"&gt;protoc-gen-ts&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Organizations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.evertz.com" rel="nofollow"&gt;Evertz&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.lucidchart.com" rel="nofollow"&gt;Lucidchart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.webdox.cl" rel="nofollow"&gt;Webdox&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.wemaintain.com" rel="nofollow"&gt;WeMaintain&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Not on this list? &lt;a href="https://github.com/bazelbuild/rules_nodejs/edit/master/README.md"&gt;Send a PR&lt;/a&gt; to add your repo or organization!&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-user-testimonials" class="anchor" aria-hidden="true" href="#user-testimonials"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;User testimonials&lt;/h2&gt;
&lt;p&gt;From &lt;a href="https://github.com/lewish"&gt;Lewis Hemens&lt;/a&gt; at Dataform:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;At Dataform we manage a number of NPM packages, Webpack builds, Node services and Java pipelines across two separate repositories. This quickly became hard for us to manage, development was painful and and deploying code required a many manual steps. We decided to dive in and migrate our build system entirely to Bazel. This was a gradual transition that one engineer did over the course of about 2 months, during which we had both Bazel and non bazel build processes in place. Once we had fully migrated, we saw many benefits to all parts of our development workflow:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Faster CI: we enabled the remote build caching which has reduced our average build time from 30 minutes to 5 (for the entire repository)&lt;/li&gt;
&lt;li&gt;Improvements to local development: no more random bash scripts that you forget to run, incremental builds reduced to seconds from minutes&lt;/li&gt;
&lt;li&gt;Simplified deployment processes: we can deploy our code to environments in Kubernetes with just one command that builds and pushes images&lt;/li&gt;
&lt;li&gt;A monorepo that scales: adding new libraries or packages to our repo became easy, which means we do it more and end up write more modular, shared, maintainable code&lt;/li&gt;
&lt;li&gt;Developing across machine types: our engineers have both Macbooks and Linux machines, bazel makes it easy to build code across both&lt;/li&gt;
&lt;li&gt;Developer setup time: New engineers can build all our code with just 3 dependencies - bazel, docker and the JVM. The last engineer to join our team managed to build all our code in &amp;lt; 30 minutes on a brand new, empty laptop&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>bazelbuild</author><guid isPermaLink="false">https://github.com/bazelbuild/rules_nodejs</guid><pubDate>Sun, 02 Feb 2020 00:01:00 GMT</pubDate></item><item><title>bazelbuild/rules_go #2 in Starlark, Today</title><link>https://github.com/bazelbuild/rules_go</link><description>&lt;p&gt;&lt;i&gt;Go rules for Bazel&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="rst" data-path="README.rst"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-go-rules-for-bazel" class="anchor" aria-hidden="true" href="#go-rules-for-bazel"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Go rules for &lt;a href="https://bazel.build/" rel="nofollow"&gt;Bazel&lt;/a&gt;&lt;/h1&gt;
&lt;p&gt;Mailing list: &lt;a href="https://groups.google.com/forum/#!forum/bazel-go-discuss" rel="nofollow"&gt;bazel-go-discuss&lt;/a&gt;&lt;/p&gt;
&lt;a name="user-content-announcements"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-announcements" class="anchor" aria-hidden="true" href="#announcements"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id6"&gt;Announcements&lt;/a&gt;&lt;/h2&gt;
&lt;dl&gt;
&lt;dt&gt;2020-01-28&lt;/dt&gt;
&lt;dd&gt;Releases
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.21.1"&gt;v0.21.1&lt;/a&gt; and
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.20.5"&gt;v0.20.5&lt;/a&gt; are
now available with support for Go 1.13.7 and 1.12.16.&lt;/dd&gt;
&lt;dt&gt;2020-01-10&lt;/dt&gt;
&lt;dd&gt;Release
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.21.0"&gt;v0.21.0&lt;/a&gt; is
now available.&lt;/dd&gt;
&lt;dt&gt;2020-01-09&lt;/dt&gt;
&lt;dd&gt;Releases
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.20.4"&gt;v0.20.4&lt;/a&gt; and
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.19.10"&gt;v0.19.10&lt;/a&gt; are
now available with support for Go 1.13.6 and 1.12.15.&lt;/dd&gt;
&lt;dt&gt;2019-12-05&lt;/dt&gt;
&lt;dd&gt;Releases
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.20.3"&gt;v0.20.3&lt;/a&gt; and
&lt;a href="https://github.com/bazelbuild/rules_go/releases/tag/v0.19.9"&gt;v0.19.9&lt;/a&gt; are
now available with support for Go 1.13.5 and 1.12.14.&lt;/dd&gt;
&lt;/dl&gt;
&lt;a name="user-content-contents"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-contents" class="anchor" aria-hidden="true" href="#contents"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id7"&gt;Contents&lt;/a&gt;&lt;/h2&gt;
&lt;div id="user-content-id5"&gt;
&lt;p&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="#announcements" id="user-content-id6"&gt;Announcements&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#contents" id="user-content-id7"&gt;Contents&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#documentation" id="user-content-id8"&gt;Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#quick-links" id="user-content-id9"&gt;Quick links&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#overview" id="user-content-id10"&gt;Overview&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#setup" id="user-content-id11"&gt;Setup&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#generating-build-files" id="user-content-id12"&gt;Generating build files&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#writing-build-files-by-hand" id="user-content-id13"&gt;Writing build files by hand&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#adding-external-repositories" id="user-content-id14"&gt;Adding external repositories&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#faq" id="user-content-id15"&gt;FAQ&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#can-i-still-use-the-go-tool" id="user-content-id16"&gt;Can I still use the &lt;code&gt;go&lt;/code&gt; tool?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#does-this-work-with-go-modules" id="user-content-id17"&gt;Does this work with Go modules?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#what-s-up-with-the-go-default-library-name" id="user-content-id18"&gt;What's up with the &lt;code&gt;go_default_library&lt;/code&gt; name?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-access-testdata" id="user-content-id19"&gt;How do I access testdata?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-cross-compile" id="user-content-id20"&gt;How do I cross-compile?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-access-go-binary-executables-from-go-test" id="user-content-id21"&gt;How do I access &lt;code&gt;go_binary&lt;/code&gt; executables from &lt;code&gt;go_test&lt;/code&gt;?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-run-bazel-on-travis-ci" id="user-content-id22"&gt;How do I run Bazel on Travis CI?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-test-a-beta-version-of-the-go-sdk" id="user-content-id23"&gt;How do I test a beta version of the Go SDK?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-get-information-about-the-go-sdk-used-by-rules-go" id="user-content-id24"&gt;How do I get information about the Go SDK used by rules_go?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-avoid-conflicts-with-protocol-buffers" id="user-content-id25"&gt;How do I avoid conflicts with protocol buffers?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#how-do-i-build-proto-libraries-and-grpc" id="user-content-id26"&gt;How do I build proto libraries and gRPC?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#can-i-use-a-vendored-grpc-with-go-proto-library" id="user-content-id27"&gt;Can I use a vendored gRPC with go_proto_library?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;a name="user-content-documentation"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id8"&gt;Documentation&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="go/core.rst"&gt;Core API&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_binary"&gt;go_binary&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_library"&gt;go_library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_test"&gt;go_test&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="go/workspace.rst"&gt;Workspace rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="proto/core.rst"&gt;Protobuf rules&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="proto/core.rst#go_proto_library"&gt;go_proto_library&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="proto/core.rst#go_proto_compiler"&gt;go_proto_compiler&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="go/toolchains.rst"&gt;Toolchains&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/extras.rst"&gt;Extra rules&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/nogo.rst"&gt;nogo build-time code analysis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/modes.rst"&gt;Build modes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-quick-links"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-quick-links" class="anchor" aria-hidden="true" href="#quick-links"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id9"&gt;Quick links&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="roadmap.rst"&gt;rules_go and Gazelle roadmap&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="deprecation.rst"&gt;Deprecation schedule&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="windows.rst"&gt;Using rules_go on Windows&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-overview"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-overview" class="anchor" aria-hidden="true" href="#overview"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id10"&gt;Overview&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The rules are in the beta stage of development. They support:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_library"&gt;libraries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_binary"&gt;binaries&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="go/core.rst#go_test"&gt;tests&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="Vendoring.md"&gt;vendoring&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;cgo&lt;/li&gt;
&lt;li&gt;cross compilation&lt;/li&gt;
&lt;li&gt;auto generating BUILD files via &lt;a href="https://github.com/bazelbuild/bazel-gazelle"&gt;gazelle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;build-time code analysis via &lt;a href="go/nogo.rst"&gt;nogo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="proto/core.rst"&gt;protocol buffers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;They currently do not support (in order of importance):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;bazel-style auto generating BUILD (where the library name is other than
go_default_library)&lt;/li&gt;
&lt;li&gt;C/C++ interoperation except cgo (swig etc.)&lt;/li&gt;
&lt;li&gt;coverage&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Note: The latest version of these rules (v0.21.1) requires Bazel ≥ 1.2.0 to work.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;master&lt;/code&gt; branch is only guaranteed to work with the latest version of Bazel.&lt;/p&gt;
&lt;a name="user-content-setup"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-setup" class="anchor" aria-hidden="true" href="#setup"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id11"&gt;Setup&lt;/a&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Create a file at the top of your repository named WORKSPACE and add one
of the snippets below, verbatim. This will let Bazel fetch necessary
dependencies from this repository and a few others.&lt;/p&gt;
&lt;p&gt;If you want to use the latest stable release, add the following:&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_tools//tools/build_defs/repo:http.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;http_archive&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

http_archive(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;io_bazel_rules_go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;urls&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;sha256&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b34cbe1a7514f5f5487c3bfee7340a4496713ddf4f119f7a225583d6cafd793a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_rules_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_register_toolchains&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

go_rules_dependencies()

go_register_toolchains()&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to use a specific commit (for example, something close to
&lt;code&gt;master&lt;/code&gt;), add the following instead:&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_tools//tools/build_defs/repo:git.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;git_repository&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

git_repository(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;io_bazel_rules_go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;remote&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/rules_go.git&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;commit&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;f5cfc31d4e8de28bf19d0fb1da2ab8f4be0d2cde&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_rules_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_register_toolchains&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

go_rules_dependencies()

go_register_toolchains()&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can add more external dependencies to this file later (see
&lt;a href="https://github.com/bazelbuild/bazel-gazelle/blob/master/repository.rst#go_repository"&gt;go_repository&lt;/a&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add a file named &lt;code&gt;BUILD.bazel&lt;/code&gt; in the root directory of your
project. In general, you need one of these files in every directory
with Go code, but you need one in the root directory even if your project
doesn't have any Go code there.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;If your project can be built with &lt;code&gt;go build&lt;/code&gt;, you can
&lt;a href="#generating-build-files"&gt;generate your build files&lt;/a&gt; using Gazelle. If your
project isn't compatible with go build or if you prefer not to use Gazelle,
you can &lt;a href="#writing-build-files-by-hand"&gt;write build files by hand&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-generating-build-files"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-generating-build-files" class="anchor" aria-hidden="true" href="#generating-build-files"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id12"&gt;Generating build files&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;If your project can be built with &lt;code&gt;go build&lt;/code&gt;, you can generate and update your
build files automatically using &lt;a href="https://github.com/bazelbuild/bazel-gazelle"&gt;gazelle&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Add the &lt;code&gt;bazel_gazelle&lt;/code&gt; repository and its dependencies to your WORKSPACE
file before &lt;code&gt;go_rules_dependencies&lt;/code&gt; is called. It should look like this:&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_tools//tools/build_defs/repo:http.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;http_archive&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

http_archive(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;io_bazel_rules_go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;urls&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;sha256&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b34cbe1a7514f5f5487c3bfee7340a4496713ddf4f119f7a225583d6cafd793a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_rules_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_register_toolchains&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

go_rules_dependencies()

go_register_toolchains()

http_archive(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bazel_gazelle&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;urls&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://storage.googleapis.com/bazel-mirror/github.com/bazelbuild/bazel-gazelle/releases/download/v0.19.1/bazel-gazelle-v0.19.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/bazel-gazelle/releases/download/v0.19.1/bazel-gazelle-v0.19.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;sha256&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;86c6d481b3f7aedc1d60c1c211c6f76da282ae197c3b3160f54bd3a8f847896f&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_gazelle//:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;gazelle_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

gazelle_dependencies()&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add the code below to the BUILD or BUILD.bazel file in the root directory
of your repository. Replace the string after &lt;code&gt;prefix&lt;/code&gt; with the prefix you
chose for your project earlier.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_gazelle//:def.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;gazelle&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; gazelle:prefix github.com/example/project&lt;/span&gt;
gazelle(&lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;gazelle&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;After adding the &lt;code&gt;gazelle&lt;/code&gt; rule, run the command below:&lt;/p&gt;
&lt;pre&gt;bazel run //:gazelle
&lt;/pre&gt;
&lt;p&gt;This will generate a &lt;code&gt;BUILD.bazel&lt;/code&gt; file for each Go package in your
repository.  You can run the same command in the future to update existing
build files with new source files, dependencies, and options.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-writing-build-files-by-hand"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-writing-build-files-by-hand" class="anchor" aria-hidden="true" href="#writing-build-files-by-hand"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id13"&gt;Writing build files by hand&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;If your project doesn't follow &lt;code&gt;go build&lt;/code&gt; conventions or you prefer not to use
&lt;a href="https://github.com/bazelbuild/bazel-gazelle"&gt;gazelle&lt;/a&gt;, you can write build files by hand.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;In each directory that contains Go code, create a file named &lt;code&gt;BUILD.bazel&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Add a &lt;code&gt;load&lt;/code&gt; statement at the top of the file for the rules you use.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:def.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_binary&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For each library, add a &lt;a href="go/core.rst#go_library"&gt;go_library&lt;/a&gt; rule like the one below.
Source files are listed in &lt;code&gt;srcs&lt;/code&gt;. Other packages you import are listed in
&lt;code&gt;deps&lt;/code&gt; using &lt;a href="https://docs.bazel.build/versions/master/build-ref.html#labels" rel="nofollow"&gt;Bazel labels&lt;/a&gt;
that refer to other &lt;a href="go/core.rst#go_library"&gt;go_library&lt;/a&gt; rules. The library's import path should
be specified with &lt;code&gt;importpath&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_library(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;deps&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;//tools:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@org_golang_x_utils//stuff:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;importpath&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;github.com/example/project/foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;visibility&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;//visibility:public&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For each test, add a &lt;a href="go/core.rst#go_test"&gt;go_test&lt;/a&gt; rule like either of the ones below.
You'll need separate &lt;a href="go/core.rst#go_test"&gt;go_test&lt;/a&gt; rules for internal and external tests.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Internal test&lt;/span&gt;
go_test(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_default_test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo_test.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;importpath&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;github.com/example/project/foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;embed&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; External test&lt;/span&gt;
go_test(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_default_xtest&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bar_test.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;deps&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;importpath&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;github.com/example/project/foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For each binary, add a &lt;a href="go/core.rst#go_binary"&gt;go_binary&lt;/a&gt; rule like the one below.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_binary(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;main.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;deps&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)&lt;/pre&gt;&lt;/div&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;a name="user-content-adding-external-repositories"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-adding-external-repositories" class="anchor" aria-hidden="true" href="#adding-external-repositories"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id14"&gt;Adding external repositories&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;For each Go repository, add a &lt;a href="https://github.com/bazelbuild/bazel-gazelle/blob/master/repository.rst#go_repository"&gt;go_repository&lt;/a&gt; rule like the one below.
This rule comes from the Gazelle repository, so you will need to load it.
&lt;a href="https://github.com/bazelbuild/bazel-gazelle#update-repos"&gt;gazelle update-repos&lt;/a&gt; can generate or update these rules automatically from
a go.mod or Gopkg.lock file.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_tools//tools/build_defs/repo:http.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;http_archive&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Download the Go rules&lt;/span&gt;
http_archive(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;io_bazel_rules_go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;urls&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://mirror.bazel.build/github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/rules_go/releases/download/v0.21.1/rules_go-v0.21.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;sha256&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;b34cbe1a7514f5f5487c3bfee7340a4496713ddf4f119f7a225583d6cafd793a&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Load and call the dependencies&lt;/span&gt;
load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_rules_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_register_toolchains&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

go_rules_dependencies()

go_register_toolchains()

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Download Gazelle&lt;/span&gt;
http_archive(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;bazel_gazelle&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;urls&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://storage.googleapis.com/bazel-mirror/github.com/bazelbuild/bazel-gazelle/releases/download/v0.19.1/bazel-gazelle-v0.19.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;https://github.com/bazelbuild/bazel-gazelle/releases/download/v0.19.1/bazel-gazelle-v0.19.1.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;sha256&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;86c6d481b3f7aedc1d60c1c211c6f76da282ae197c3b3160f54bd3a8f847896f&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Load and call Gazelle dependencies&lt;/span&gt;
load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@bazel_gazelle//:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;gazelle_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_repository&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;)

gazelle_dependencies()

&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt; Add a go repository&lt;/span&gt;
go_repository(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;com_github_pkg_errors&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;importpath&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;github.com/pkg/errors&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;sum&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;h1:iURUrRGxPUNPdy5/HRSm+Yj6okJ6UtLINN0Q9M4+h3I=&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;version&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;v0.8.1&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-faq"&gt;&lt;/a&gt;
&lt;h2&gt;&lt;a id="user-content-faq" class="anchor" aria-hidden="true" href="#faq"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id15"&gt;FAQ&lt;/a&gt;&lt;/h2&gt;
&lt;a name="user-content-can-i-still-use-the-go-tool"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-can-i-still-use-the-go-tool" class="anchor" aria-hidden="true" href="#can-i-still-use-the-go-tool"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id16"&gt;Can I still use the &lt;code&gt;go&lt;/code&gt; tool?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Yes, this setup was deliberately chosen to be compatible with &lt;code&gt;go build&lt;/code&gt;.
Make sure your project appears in &lt;code&gt;GOPATH&lt;/code&gt; or has a go.mod file, and it should
work.&lt;/p&gt;
&lt;p&gt;Note that &lt;code&gt;go build&lt;/code&gt; won't be aware of dependencies listed in &lt;code&gt;WORKSPACE&lt;/code&gt;,
so you may want to download your dependencies into your &lt;code&gt;GOPATH&lt;/code&gt; or module
cache so that your tools are aware of them.  You may also need to check in
generated files.&lt;/p&gt;
&lt;a name="user-content-does-this-work-with-go-modules"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-does-this-work-with-go-modules" class="anchor" aria-hidden="true" href="#does-this-work-with-go-modules"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id17"&gt;Does this work with Go modules?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Yes, but not directly. Modules are a dependency management feature in cmd/go,
the build system that ships with the Go SDK. Bazel uses the Go compiler and
linker in the Go toolchain, but it does not use cmd/go. You need to describe
your Go packages and executables and their dependencies in &lt;code&gt;go_library&lt;/code&gt;,
&lt;code&gt;go_binary&lt;/code&gt;, and &lt;code&gt;go_test&lt;/code&gt; rules written in build files, and you need to
describe your external dependencies in Bazel's WORKSPACE file.&lt;/p&gt;
&lt;p&gt;If your project follows normal Go conventions (those required by cmd/go), you
can generate and update build files using &lt;a href="https://github.com/bazelbuild/bazel-gazelle"&gt;gazelle&lt;/a&gt;. You can import external
dependencies from your go.mod file with a command like &lt;code&gt;gazelle update-repos
-from_file=go.mod&lt;/code&gt;. This will add &lt;a href="https://github.com/bazelbuild/bazel-gazelle/blob/master/repository.rst#go_repository"&gt;go_repository&lt;/a&gt; rules to your WORKSPACE.
Each &lt;a href="https://github.com/bazelbuild/bazel-gazelle/blob/master/repository.rst#go_repository"&gt;go_repository&lt;/a&gt; rule can download a module and generate build files for
the module's packages using Gazelle. See &lt;a href="https://github.com/bazelbuild/bazel-gazelle#update-repos"&gt;gazelle update-repos&lt;/a&gt; for more
information.&lt;/p&gt;
&lt;a name="user-content-what-s-up-with-the-go-default-library-name"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-whats-up-with-the-go_default_library-name" class="anchor" aria-hidden="true" href="#whats-up-with-the-go_default_library-name"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id18"&gt;What's up with the &lt;code&gt;go_default_library&lt;/code&gt; name?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This was used to keep import paths consistent in libraries that can be built
with &lt;code&gt;go build&lt;/code&gt; before the &lt;code&gt;importpath&lt;/code&gt; attribute was available.&lt;/p&gt;
&lt;p&gt;In order to compile and link correctly, rules_go must know the Go import path
(the string by which a package can be imported) for each library. This is now
set explicitly with the &lt;code&gt;importpath&lt;/code&gt; attribute. Before that attribute existed,
the import path was inferred by concatenating a string from a special
&lt;code&gt;go_prefix&lt;/code&gt; rule and the library's package and label name. For example, if
&lt;code&gt;go_prefix&lt;/code&gt; was &lt;code&gt;github.com/example/project&lt;/code&gt;, for a library
&lt;code&gt;//foo/bar:bar&lt;/code&gt;, rules_go would infer the import path as
&lt;code&gt;github.com/example/project/foo/bar/bar&lt;/code&gt;. The stutter at the end is
incompatible with &lt;code&gt;go build&lt;/code&gt;, so if the label name was &lt;code&gt;go_default_library&lt;/code&gt;,
the import path would not include it. So for the library
&lt;code&gt;//foo/bar:go_default_library&lt;/code&gt;, the import path would be
&lt;code&gt;github.com/example/project/foo/bar&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Since &lt;code&gt;go_prefix&lt;/code&gt; was removed and the &lt;code&gt;importpath&lt;/code&gt; attribute became
mandatory (see &lt;a href="https://github.com/bazelbuild/rules_go/issues/721"&gt;#721&lt;/a&gt;), the &lt;code&gt;go_default_library&lt;/code&gt; name no longer serves any
purpose. We may decide to stop using it in the future (see &lt;a href="https://github.com/bazelbuild/rules_go/issues/265"&gt;#265&lt;/a&gt;).&lt;/p&gt;
&lt;a name="user-content-how-do-i-access-testdata"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-access-testdata" class="anchor" aria-hidden="true" href="#how-do-i-access-testdata"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id19"&gt;How do I access testdata?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Bazel executes tests in a sandbox, which means tests don't automatically have
access to files. You must include test files using the &lt;code&gt;data&lt;/code&gt; attribute.
For example, if you want to include everything in the &lt;code&gt;testdata&lt;/code&gt; directory:&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_test(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_default_test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo_test.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;data&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; glob([&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;testdata/**&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;]),
    &lt;span class="pl-v"&gt;importpath&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;github.com/example/project/foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By default, tests are run in the directory of the build file that defined them.
Note that this follows the Go testing convention, not the Bazel convention
followed by other languages, which run in the repository root. This means
that you can access test files using relative paths. You can change the test
directory using the &lt;code&gt;rundir&lt;/code&gt; attribute. See &lt;a href="go/core.rst#go_test"&gt;go_test&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Gazelle will automatically add a &lt;code&gt;data&lt;/code&gt; attribute like the one above if you
have a &lt;code&gt;testdata&lt;/code&gt; directory &lt;em&gt;unless&lt;/em&gt; it contains buildable .go files or
build files, in which case, &lt;code&gt;testdata&lt;/code&gt; is treated as a normal package.&lt;/p&gt;
&lt;a name="user-content-how-do-i-cross-compile"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-cross-compile" class="anchor" aria-hidden="true" href="#how-do-i-cross-compile"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id20"&gt;How do I cross-compile?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;You can cross-compile by setting the &lt;code&gt;--platforms&lt;/code&gt; flag on the command line.
For example:&lt;/p&gt;
&lt;pre&gt;$ bazel build --platforms=@io_bazel_rules_go//go/toolchain:linux_amd64 //cmd
&lt;/pre&gt;
&lt;p&gt;By default, cgo is disabled when cross-compiling. To cross-compile with cgo,
add a &lt;code&gt;_cgo&lt;/code&gt; suffix to the target platform. You must register a
cross-compiling C/C++ toolchain with Bazel for this to work.&lt;/p&gt;
&lt;pre&gt;$ bazel build --platforms=@io_bazel_rules_go//go/toolchain:linux_amd64_cgo //cmd
&lt;/pre&gt;
&lt;p&gt;Platform-specific sources with build tags or filename suffixes are filtered
automatically at compile time. You can selectively include platform-specific
dependencies with &lt;code&gt;select&lt;/code&gt; expressions (Gazelle does this automatically).&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_library(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo_linux.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo_windows.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    ],
    &lt;span class="pl-v"&gt;deps&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; select({
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go/platform:linux_amd64&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;: [
            &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;//bar_linux:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        ],
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go/platform:windows_amd64&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;: [
            &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;//bar_windows:go_default_library&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
        ],
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;//conditions:default&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;: [],
    }),
)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;rules_go can generate pure Go binaries for any platform the Go SDK supports. If
your project includes cgo code, has C/C++ dependencies, or requires external
linking, you'll need to &lt;a href="https://github.com/bazelbuild/bazel/wiki/Yet-Another-CROSSTOOL-Writing-Tutorial"&gt;write a CROSSTOOL file&lt;/a&gt;
for your toolchain and set the &lt;code&gt;--cpu&lt;/code&gt; flag on the command line, in addition
to setting &lt;code&gt;--platforms&lt;/code&gt;. You'll also need to set &lt;code&gt;pure = "off"&lt;/code&gt; on your
&lt;code&gt;go_binary&lt;/code&gt;. We don't fully support this yet, but people have gotten this to
work in some cases.&lt;/p&gt;
&lt;p&gt;In some cases, you may want to set the &lt;code&gt;goos&lt;/code&gt; and &lt;code&gt;goarch&lt;/code&gt; attributes of
&lt;code&gt;go_binary&lt;/code&gt;. This will cross-compile a binary for a specific platform.
This is necessary when you need to produce multiple binaries for different
platforms in a single build. However, note that &lt;code&gt;select&lt;/code&gt; expressions will
not work correctly when using these attributes.&lt;/p&gt;
&lt;a name="user-content-how-do-i-access-go-binary-executables-from-go-test"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-access-go_binary-executables-from-go_test" class="anchor" aria-hidden="true" href="#how-do-i-access-go_binary-executables-from-go_test"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id21"&gt;How do I access &lt;code&gt;go_binary&lt;/code&gt; executables from &lt;code&gt;go_test&lt;/code&gt;?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The location where &lt;code&gt;go_binary&lt;/code&gt; writes its executable file is not stable across
rules_go versions and should not be depended upon. The parent directory includes
some configuration data in its name. This prevents Bazel's cache from being
poisoned when the same binary is built in different configurations. The binary
basename may also be platform-dependent: on Windows, we add an .exe extension.&lt;/p&gt;
&lt;p&gt;To depend on an executable in a &lt;code&gt;go_test&lt;/code&gt; rule, reference the executable
in the &lt;code&gt;data&lt;/code&gt; attribute (to make it visible), then expand the location
in &lt;code&gt;args&lt;/code&gt;. The real location will be passed to the test on the command line.
For example:&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_binary(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)

go_test(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd_test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd_test.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;args&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;$(location :cmd)&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;data&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;:cmd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;See &lt;a href="https://github.com/bazelbuild/rules_go/blob/master/tests/core/cross/BUILD.bazel"&gt;//tests/core/cross&lt;/a&gt; for a full example of a test that
accesses a binary.&lt;/p&gt;
&lt;p&gt;Alternatively, you can set the &lt;code&gt;out&lt;/code&gt; attribute of &lt;a href="go/core.rst#go_binary"&gt;go_binary&lt;/a&gt; to a specific
filename. Note that when &lt;code&gt;out&lt;/code&gt; is set, the binary won't be cached when
changing configurations.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;go_binary(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;out&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

go_test(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd_test&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;srcs&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;cmd_test.go&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
    &lt;span class="pl-v"&gt;data&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; [&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;:cmd&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;],
)&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-how-do-i-run-bazel-on-travis-ci"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-run-bazel-on-travis-ci" class="anchor" aria-hidden="true" href="#how-do-i-run-bazel-on-travis-ci"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id22"&gt;How do I run Bazel on Travis CI?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;References:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://kev.inburke.com/kevin/bazel-tests-on-travis-ci/" rel="nofollow"&gt;Running Bazel Tests on Travis CI&lt;/a&gt; by Kevin Burke&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/korfuri/bazel-travis"&gt;korfuri/bazel-travis Use Bazel with Travis CI&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In order to run Bazel tests on Travis CI, you'll need to install Bazel in the
&lt;code&gt;before_install&lt;/code&gt; script. See our configuration file linked above.&lt;/p&gt;
&lt;p&gt;You'll want to run Bazel with a number of flags to prevent it from consuming
a huge amount of memory in the test environment.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;--host_jvm_args=-Xmx500m --host_jvm_args=-Xms500m&lt;/code&gt;: Set the maximum and
initial JVM heap size. Keeping the same means the JVM won't spend time
growing the heap. The choice of heap size is somewhat arbitrary; other
configuration files recommend limits as high as 2500m. Higher values mean
a faster build, but higher risk of OOM kill.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--bazelrc=.test-bazelrc&lt;/code&gt;: Use a Bazel configuration file specific to
Travis CI. You can put most of the remaining options in here.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;build --spawn_strategy=standalone --genrule_strategy=standalone&lt;/code&gt;: Disable
sandboxing for the build. Sandboxing may fail inside of Travis's containers
because the &lt;code&gt;mount&lt;/code&gt; system call is not permitted.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;test --test_strategy=standalone&lt;/code&gt;: Disable sandboxing for tests as well.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--local_resources=1536,1.5,0.5&lt;/code&gt;: Set Bazel limits on available RAM in MB,
available cores for compute, and available cores for I/O. Higher values
mean a faster build, but higher contention and risk of OOM kill.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--noshow_progress&lt;/code&gt;: Suppress progress messages in output for cleaner logs.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--verbose_failures&lt;/code&gt;: Get more detailed failure messages.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;--test_output=errors&lt;/code&gt;: Show test stderr in the Travis log. Normally,
test output is written log files which Travis does not save or report.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Downloads on Travis are relatively slow (the network is heavily
contended), so you'll want to minimize the amount of network I/O in
your build. Downloading Bazel and a Go SDK is a huge part of that. To
avoid downloading a Go SDK, you may request a container with a
preinstalled version of Go in your &lt;code&gt;.travis.yml&lt;/code&gt; file, then call
&lt;code&gt;go_register_toolchains(go_version = "host")&lt;/code&gt; in a Travis-specific
&lt;code&gt;WORKSPACE&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;You may be tempted to put Bazel's cache in your Travis cache. Although this
can speed up your build significantly, Travis stores its cache on Amazon, and
it takes a very long time to transfer. Clean builds seem faster in practice.&lt;/p&gt;
&lt;a name="user-content-how-do-i-test-a-beta-version-of-the-go-sdk"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-test-a-beta-version-of-the-go-sdk" class="anchor" aria-hidden="true" href="#how-do-i-test-a-beta-version-of-the-go-sdk"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id23"&gt;How do I test a beta version of the Go SDK?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;rules_go only supports official releases of the Go SDK. However, we do have
an easy way for developers to try out beta releases.&lt;/p&gt;
&lt;p&gt;In your WORKSPACE file, add a call &lt;a href="go/toolchains.rst#go_download_sdk"&gt;go_download_sdk&lt;/a&gt; like the one below. This
must be named &lt;code&gt;go_sdk&lt;/code&gt;, and it must come &lt;em&gt;before&lt;/em&gt; the call to
&lt;a href="go/toolchains.rst#go_register_toolchains"&gt;go_register_toolchains&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight highlight-source-python"&gt;&lt;pre&gt;load(&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;@io_bazel_rules_go//go:deps.bzl&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_download_sdk&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_register_toolchains&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_rules_dependencies&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
)

go_rules_dependencies()

go_download_sdk(
    &lt;span class="pl-v"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go_sdk&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;,
    &lt;span class="pl-v"&gt;sdks&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; {
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;darwin_amd64&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;: (&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go1.10beta1.darwin-amd64.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;8c2a4743359f4b14bcfaf27f12567e3cbfafc809ed5825a2238c0ba45db3a8b4&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;),
        &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;linux_amd64&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;:  (&lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;go1.10beta1.linux-amd64.tar.gz&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;ec7a10b5bf147a8e06cf64e27384ff3c6d065c74ebd8fdd31f572714f74a1055&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;),
    },
)

go_register_toolchains()&lt;/pre&gt;&lt;/div&gt;
&lt;a name="user-content-how-do-i-get-information-about-the-go-sdk-used-by-rules-go"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-get-information-about-the-go-sdk-used-by-rules_go" class="anchor" aria-hidden="true" href="#how-do-i-get-information-about-the-go-sdk-used-by-rules_go"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id24"&gt;How do I get information about the Go SDK used by rules_go?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;You can run: &lt;code&gt;bazel build @io_bazel_rules_go//:go_info&lt;/code&gt; which outputs
&lt;code&gt;go_info_report&lt;/code&gt; with information like the used Golang version.&lt;/p&gt;
&lt;a name="user-content-how-do-i-avoid-conflicts-with-protocol-buffers"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-avoid-conflicts-with-protocol-buffers" class="anchor" aria-hidden="true" href="#how-do-i-avoid-conflicts-with-protocol-buffers"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id25"&gt;How do I avoid conflicts with protocol buffers?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;See &lt;a href="proto/core.rst#avoiding-conflicts"&gt;Avoiding conflicts&lt;/a&gt; in the proto documentation.&lt;/p&gt;
&lt;a name="user-content-how-do-i-build-proto-libraries-and-grpc"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-how-do-i-build-proto-libraries-and-grpc" class="anchor" aria-hidden="true" href="#how-do-i-build-proto-libraries-and-grpc"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id26"&gt;How do I build proto libraries and gRPC?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The &lt;a href="go/workspace.rst#go_rules_dependencies"&gt;go_rules_dependencies&lt;/a&gt; macro used to declare all dependencies needed
to generate and compile protocol buffers. Managing this got too complicated,
and the declarations caused confusion in workspaces that declared different
versions of the same repositories, so these dependencies are no longer
declared in &lt;code&gt;go_rules_dependencies&lt;/code&gt;. They must be declared separately.&lt;/p&gt;
&lt;p&gt;In order to build anything that uses &lt;code&gt;protoc&lt;/code&gt; (including &lt;code&gt;proto_library&lt;/code&gt;),
you must declare a repository rule for &lt;code&gt;com_google_protobuf&lt;/code&gt;. See
&lt;a href="go/workspace.rst#proto-dependencies"&gt;Proto dependencies&lt;/a&gt; for an example.&lt;/p&gt;
&lt;p&gt;In order to build anything that uses gRPC, several additional repositories
must be declared. See &lt;a href="go/workspace.rst#grpc-dependencies"&gt;gRPC dependencies&lt;/a&gt; for instructions and an example.&lt;/p&gt;
&lt;a name="user-content-can-i-use-a-vendored-grpc-with-go-proto-library"&gt;&lt;/a&gt;
&lt;h3&gt;&lt;a id="user-content-can-i-use-a-vendored-grpc-with-go_proto_library" class="anchor" aria-hidden="true" href="#can-i-use-a-vendored-grpc-with-go_proto_library"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;a href="#id27"&gt;Can I use a vendored gRPC with go_proto_library?&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This is not supported. When using &lt;a href="proto/core.rst#go_proto_library"&gt;go_proto_library&lt;/a&gt; with the
&lt;code&gt;@io_bazel_rules_go//proto:go_grpc&lt;/code&gt; compiler, an implicit dependency is added
on &lt;code&gt;@org_golang_google_grpc//:go_default_library&lt;/code&gt;. If you link another copy of
the same package from &lt;code&gt;//vendor/google.golang.org/grpc:go_default_library&lt;/code&gt;
or anywhere else, you may experience conflicts at compile or run-time.&lt;/p&gt;
&lt;p&gt;If you're using Gazelle with proto rule generation enabled, imports of
&lt;code&gt;google.golang.org/grpc&lt;/code&gt; will be automatically resolved to
&lt;code&gt;@org_golang_google_grpc//:go_default_library&lt;/code&gt; to avoid conflicts. The
vendored gRPC should be ignored in this case.&lt;/p&gt;
&lt;p&gt;If you specifically need to use a vendored gRPC package, it's best to avoid
using &lt;code&gt;go_proto_library&lt;/code&gt; altogether. You can check in pre-generated .pb.go
files and build them with &lt;code&gt;go_library&lt;/code&gt; rules. Gazelle will generate these
rules when proto rule generation is disabled (add &lt;code&gt;# gazelle:proto
disable_global&lt;/code&gt; to your root build file).&lt;/p&gt;

&lt;/article&gt;&lt;/div&gt;</description><author>bazelbuild</author><guid isPermaLink="false">https://github.com/bazelbuild/rules_go</guid><pubDate>Sun, 02 Feb 2020 00:02:00 GMT</pubDate></item></channel></rss>
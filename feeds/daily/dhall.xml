<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>GitHub Trending: Dhall, Today</title><link>https://github.com/trending/dhall?since=daily</link><description>The top repositories on GitHub for dhall, measured daily</description><pubDate>Tue, 28 Jan 2020 01:13:00 GMT</pubDate><lastBuildDate>Tue, 28 Jan 2020 01:13:00 GMT</lastBuildDate><generator>PyRSS2Gen-1.1.0</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><ttl>720</ttl><item><title>dhall-lang/dhall-lang #1 in Dhall, Today</title><link>https://github.com/dhall-lang/dhall-lang</link><description>&lt;p&gt;&lt;i&gt;Maintainable configuration files&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="./img/dhall-logo.svg"&gt;&lt;img src="./img/dhall-logo.svg" width="600" alt="Dhall Logo" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;

  
 
&lt;p&gt;Dhall is a programmable configuration language optimized for
maintainability.&lt;/p&gt;
&lt;p&gt;You can think of Dhall as: JSON + functions + types + imports&lt;/p&gt;
&lt;p&gt;Note that while Dhall is programmable, Dhall is not Turing-complete.  Many
of Dhall's features take advantage of this restriction to provide stronger
safety guarantees and more powerful tooling.&lt;/p&gt;
&lt;p&gt;You can try the language live in your browser by visiting the official website:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://dhall-lang.org/" rel="nofollow"&gt;https://dhall-lang.org&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-getting-started" class="anchor" aria-hidden="true" href="#getting-started"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Getting started&lt;/h2&gt;
&lt;p&gt;The easiest way to get started experimenting with Dhall is to install the
&lt;code&gt;dhall-to-json&lt;/code&gt; and/or &lt;code&gt;dhall-to-yaml&lt;/code&gt; executables, which enable you to
generate JSON and YAML, respectively, on the command line. Platform- and
runtime-specific installation instructions can be found in &lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/Getting-started%3A-Generate-JSON-or-YAML"&gt;the Dhall
wiki&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;For other ways to integrate Dhall in your project, read:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/How-to-integrate-Dhall"&gt;How to integrate Dhall&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-tutorials" class="anchor" aria-hidden="true" href="#tutorials"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tutorials&lt;/h2&gt;
&lt;p&gt;For a short introduction, read:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://learnxinyminutes.com/docs/dhall/" rel="nofollow"&gt;Learn Dhall in Y minutes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To learn more about core language features, read:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/Core-language-features"&gt;Core language features&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For an even longer hands-on tutorial, read:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/Getting-started%3A-Generate-JSON-or-YAML"&gt;Getting started: Generate JSON or YAML&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-features" class="anchor" aria-hidden="true" href="#features"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Features:&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Total - Evaluation always terminates and never hangs or infinitely loops&lt;/li&gt;
&lt;li&gt;Safe - Evaluation never crashes or throws exceptions&lt;/li&gt;
&lt;li&gt;Distributed - Expressions can reference other expressions by URL or path&lt;/li&gt;
&lt;li&gt;Strongly normalizing - All expressions (even functions) have a normal form&lt;/li&gt;
&lt;li&gt;Statically typed - Configurations can be validated ahead-of-time&lt;/li&gt;
&lt;li&gt;Strongly typed - No coercions, casts or subtyping&lt;/li&gt;
&lt;li&gt;Built-in data types - Includes lists, anonymous records and anonymous unions&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-documentation" class="anchor" aria-hidden="true" href="#documentation"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Documentation&lt;/h2&gt;
&lt;p&gt;The Dhall language originated as a Haskell-specific configuration file format
and is expanding to support more languages and file formats.  Consequently, the
Haskell package for Dhall still hosts the official tutorial and language manual:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://hackage.haskell.org/package/dhall/docs/Dhall-Tutorial.html" rel="nofollow"&gt;Dhall tutorial and manual&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;... which will eventually become a language-agnostic tutorial&lt;/p&gt;
&lt;p&gt;You can also read about the original motivation behind the language here:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.haskellforall.com/2016/12/dhall-non-turing-complete-configuration.html" rel="nofollow"&gt;Dhall - A non-Turing-complete configuration language&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, we have a cheatsheet for a very condensed overview and quick lookup:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/Cheatsheet"&gt;Dhall Cheatsheet&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-standard-library" class="anchor" aria-hidden="true" href="#standard-library"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Standard Library&lt;/h2&gt;
&lt;p&gt;Dhall's Standard Library is called &lt;code&gt;Prelude&lt;/code&gt;. It implements various utilities to
work with the builtin types. Where to find it:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://prelude.dhall-lang.org" rel="nofollow"&gt;Official link - https://prelude.dhall-lang.org&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/dhall-lang/dhall-lang/tree/master/Prelude"&gt;Github repo&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/development/interpreters/dhall/default.nix"&gt;Nix&lt;/a&gt;:
both &lt;code&gt;dhall&lt;/code&gt; and &lt;code&gt;dhall.prelude&lt;/code&gt; derivations are built, install the &lt;code&gt;Prelude&lt;/code&gt;
with e.g. &lt;code&gt;nix-env -iA nixpkgs.dhall.prelude&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-development-status" class="anchor" aria-hidden="true" href="#development-status"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Development status&lt;/h2&gt;
&lt;p&gt;The current version and versioning policy is detailed in the
&lt;a href="./standard/versioning.md"&gt;Versioning document&lt;/a&gt;, and you can see the latest
changes &lt;a href="CHANGELOG.md"&gt;in the Changelog&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There is an effort under way to formalize the language semantics for Dhall, to
help with porting it to &lt;a href="#language-bindings"&gt;other languages&lt;/a&gt;.
If you would like to assist with either standardizing the language or creating
new bindings just open a new issue or contribute to existing ones in the &lt;a href="https://github.com/dhall-lang/dhall-lang/issues"&gt;issue
tracker&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-design-philosophy" class="anchor" aria-hidden="true" href="#design-philosophy"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Design philosophy&lt;/h2&gt;
&lt;p&gt;Programming languages are all about design tradeoffs and the Dhall language uses
the following guiding principles (in order of descending priority) that help
navigate those tradeoffs:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Polish&lt;/p&gt;
&lt;p&gt;The language should delight users.  Error messages should be fantastic,
execution should be snappy, documentation should be excellent, and
everything should "just work".&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Simplicity&lt;/p&gt;
&lt;p&gt;When in doubt, cut it out.  Every configuration language needs bindings to
multiple programming languages, and the more complex the configuration
language the more difficult to create new bindings.  Let the host language
that you bind to compensate for any missing features from Dhall.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Beginner-friendliness&lt;/p&gt;
&lt;p&gt;Dhall needs to be a language that anybody can learn in a day and debug
with little to no assistance from others.  Otherwise people can't recommend
Dhall to their team with confidence.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Robustness&lt;/p&gt;
&lt;p&gt;A configuration language needs to be rock solid.  The last thing a person
wants to debug is their configuration file.  The language should never hang
or crash.  Ever.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Consistency&lt;/p&gt;
&lt;p&gt;There should only be one way to do something.  Users should be able to
instantly discern whether or not something is possible within the Dhall
language or not.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The Dhall configuration language is also designed to negate many of the common
objections to programmable configuration files, such as:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Config files shouldn't be Turing complete"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Dhall is not Turing-complete.  Evaluation always terminates, no exceptions&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Configuration languages become unreadable due to abstraction and indirection"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Every Dhall configuration file can be reduced to a normal form which eliminates
all abstraction and indirection&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;"Users will go crazy with syntax and user-defined constructs"&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Dhall is a very minimal programming language.  For example: you cannot even
compare strings for equality.  The language also forbids many other common
operations in order to force users to keep things simple&lt;/p&gt;
&lt;p&gt;The biggest issue with using Dhall as a configuration language is that there are
currently only Haskell bindings.  If you would like to contribute bindings to
another language then go for it, otherwise I will do my best to contribute them
as time permits.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-name" class="anchor" aria-hidden="true" href="#name"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Name&lt;/h2&gt;
&lt;p&gt;The language is named after a
&lt;a href="http://torment.wikia.com/wiki/Dhall" rel="nofollow"&gt;Dustman from the game Planescape: Torment&lt;/a&gt; who belongs to a faction
obsessed with death (termination).  The fountain pen in the logo is the modern
analog of Dhall's quill.&lt;/p&gt;
&lt;p&gt;The name rhymes with "tall"/"call"/"hall" (i.e. "dɔl" for a US speaker or
"dɔːl" for a UK speaker using the International Phonetic Alphabet).&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-contributors" class="anchor" aria-hidden="true" href="#contributors"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Contributors&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-code-contributors" class="anchor" aria-hidden="true" href="#code-contributors"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Code Contributors&lt;/h3&gt;
&lt;p&gt;This project exists thanks to all the people who contribute. [&lt;a href=".github/CONTRIBUTING.md"&gt;Contribute&lt;/a&gt;].
&lt;a href="https://github.com/dhall-lang/dhall-lang/graphs/contributors"&gt;&lt;img src="https://camo.githubusercontent.com/281414f83df939fffa425d6408b4b5cc0e35f94e/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f636f6e7472696275746f72732e7376673f77696474683d38393026627574746f6e3d66616c7365" data-canonical-src="https://opencollective.com/dhall/contributors.svg?width=890&amp;amp;button=false" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;&lt;a id="user-content-financial-contributors" class="anchor" aria-hidden="true" href="#financial-contributors"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Financial Contributors&lt;/h3&gt;
&lt;p&gt;Become a financial contributor and help us sustain our community. [&lt;a href="https://opencollective.com/dhall/contribute" rel="nofollow"&gt;Contribute&lt;/a&gt;]&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-individuals" class="anchor" aria-hidden="true" href="#individuals"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Individuals&lt;/h4&gt;
&lt;p&gt;&lt;a href="https://opencollective.com/dhall" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/4135c92b07b3c14440470b82b6715e416709685a/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f696e646976696475616c732e7376673f77696474683d383930" data-canonical-src="https://opencollective.com/dhall/individuals.svg?width=890" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h4&gt;&lt;a id="user-content-organizations" class="anchor" aria-hidden="true" href="#organizations"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Organizations&lt;/h4&gt;
&lt;p&gt;Support this project with your organization. Your logo will show up here with a link to your website. [&lt;a href="https://opencollective.com/dhall/contribute" rel="nofollow"&gt;Contribute&lt;/a&gt;]&lt;/p&gt;
&lt;p&gt;&lt;a href="https://opencollective.com/dhall/organization/0/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/d94eaa81b509e80f246327efde430931469ae34e/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f302f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/0/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/1/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/33e06ec812716bb9ca1cadbc8b785b6d4d72e938/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f312f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/1/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/2/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/8d6d5f014ea5641802c1a078e475506f845f3041/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f322f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/2/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/3/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/835e09322a41e8de278b3072acae171a06289a7f/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f332f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/3/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/4/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/b1a86eda95c9350f6715bb0f06a3e494cc7c7014/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f342f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/4/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/5/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/d3cc9eadd70e34b2983f0e41da97adade8b403d7/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f352f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/5/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/6/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/977a8ff0674c90a9d8df59f828c1904990f6bdbf/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f362f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/6/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/7/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/013bda64f8cdd5691247423699d7fa6515206e0c/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f372f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/7/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/8/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/e457d6dbd97d3eab2e9edba4404fa630d09013c9/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f382f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/8/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;
&lt;a href="https://opencollective.com/dhall/organization/9/website" rel="nofollow"&gt;&lt;img src="https://camo.githubusercontent.com/7b748a4b11496b162a9b2942c9f762535315b8e1/68747470733a2f2f6f70656e636f6c6c6563746976652e636f6d2f6468616c6c2f6f7267616e697a6174696f6e2f392f6176617461722e737667" data-canonical-src="https://opencollective.com/dhall/organization/9/avatar.svg" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>dhall-lang</author><guid isPermaLink="false">https://github.com/dhall-lang/dhall-lang</guid><pubDate>Tue, 28 Jan 2020 00:01:00 GMT</pubDate></item><item><title>dhall-lang/dhall-kubernetes #2 in Dhall, Today</title><link>https://github.com/dhall-lang/dhall-kubernetes</link><description>&lt;p&gt;&lt;i&gt;Typecheck, template and modularize your Kubernetes definitions with Dhall&lt;/i&gt;&lt;/p&gt;&lt;div id="readme" class="md" data-path="README.md"&gt;&lt;article class="markdown-body entry-content p-5" itemprop="text"&gt;&lt;h1&gt;&lt;a id="user-content-dhall-kubernetes" class="anchor" aria-hidden="true" href="#dhall-kubernetes"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;&lt;code&gt;dhall-kubernetes&lt;/code&gt;&lt;/h1&gt;
&lt;p&gt;&lt;a target="_blank" rel="noopener noreferrer" href="logo/dhall-kubernetes-logo.svg"&gt;&lt;img src="logo/dhall-kubernetes-logo.svg" alt="dhall-kubernetes logo" height="300px" style="max-width:100%;"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dhall-kubernetes&lt;/code&gt; contains &lt;a href="https://github.com/dhall-lang/dhall-lang"&gt;Dhall&lt;/a&gt; bindings to &lt;a href="https://kubernetes.io/" rel="nofollow"&gt;Kubernetes&lt;/a&gt;,
so you can generate Kubernetes objects definitions from Dhall expressions.
This will let you easily typecheck, template and modularize your Kubernetes definitions.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-why-do-i-need-this" class="anchor" aria-hidden="true" href="#why-do-i-need-this"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Why do I need this&lt;/h2&gt;
&lt;p&gt;Once you build a slightly non-trivial Kubernetes setup, with many objects floating
around, you'll encounter several issues:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Writing the definitions in YAML is really verbose, and the actually important
things don't stand out that much&lt;/li&gt;
&lt;li&gt;Ok I have a bunch of objects that'll need to be configured together, how do I share data?&lt;/li&gt;
&lt;li&gt;I'd like to reuse an object for different environments, but I cannot make it parametric..&lt;/li&gt;
&lt;li&gt;In general, I'd really love to reuse parts of some definitions in other definitions&lt;/li&gt;
&lt;li&gt;Oh no, I typoed a key and I had to wait until I pushed to the cluster to get an error back :(&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;The natural tendency is to reach for a templating language + a programming language to orchestrate that + some more configuration for it...
But this is just really messy (been there), and we can do better.&lt;/p&gt;
&lt;p&gt;Dhall solves all of this, being a programming language with builtin templating,
all while being non-Turing complete, strongly typed and &lt;a href="https://en.wikipedia.org/wiki/Normalization_property_(abstract_rewriting)" rel="nofollow"&gt;strongly normalizing&lt;/a&gt;
(i.e.: reduces everything to a normal form, no matter how much abstraction you build),
so saving you from the &lt;em&gt;"oh-noes-I-made-my-config-in-code-and-now-its-too-abstract"&lt;/em&gt; nightmare.&lt;/p&gt;
&lt;p&gt;For a Dhall Tutorial, see &lt;a href="https://dhall-lang.org/" rel="nofollow"&gt;the website&lt;/a&gt;, or the &lt;a href="https://github.com/dhall-lang/dhall-lang"&gt;readme of the project&lt;/a&gt;,
or the &lt;a href="http://hackage.haskell.org/package/dhall-1.28.0/docs/Dhall-Tutorial.html" rel="nofollow"&gt;full tutorial&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-prerequisites" class="anchor" aria-hidden="true" href="#prerequisites"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;NOTE&lt;/strong&gt;: &lt;code&gt;dhall-kubernetes&lt;/code&gt; requires at least version &lt;code&gt;1.27.0&lt;/code&gt; of &lt;a href="https://github.com/dhall-lang/dhall-haskell"&gt;the interpreter&lt;/a&gt;
(version &lt;code&gt;11.0.0&lt;/code&gt; of the language).&lt;/p&gt;
&lt;h2&gt;&lt;a id="user-content-quickstart---a-simple-deployment" class="anchor" aria-hidden="true" href="#quickstart---a-simple-deployment"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Quickstart - a simple Deployment&lt;/h2&gt;
&lt;p&gt;Let's say we'd like to configure a Deployment exposing an &lt;code&gt;nginx&lt;/code&gt; webserver.&lt;/p&gt;
&lt;p&gt;In the following example, we:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Import the Kubernetes definitions as a Dhall package (the &lt;code&gt;package.dhall&lt;/code&gt; file) from the local repo.
In your case you will want to replace the local path with a remote one, e.g.
&lt;code&gt;https://raw.githubusercontent.com/dhall-lang/dhall-kubernetes/master/package.dhall&lt;/code&gt;
Note: the &lt;code&gt;sha256:..&lt;/code&gt; is applied to some imports so that:
&lt;ol&gt;
&lt;li&gt;the import is cached locally after the first evaluation, with great time savings (and avoiding network calls)&lt;/li&gt;
&lt;li&gt;prevent execution if the content of the file changes. This is a security feature, and you
can read more &lt;a href="https://github.com/dhall-lang/dhall-lang/wiki/Safety-guarantees#code-injection"&gt;in Dhall's "Security Guarantees" document&lt;/a&gt;
Note: instead of using the &lt;code&gt;package.dhall&lt;/code&gt; from the &lt;code&gt;master&lt;/code&gt; branch, you may want to use a tagged release,
as the contents of the &lt;code&gt;master&lt;/code&gt; branch are liable to change without warning.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Define the &lt;a href="./schemas/io.k8s.api.apps.v1.Deployment.dhall"&gt;Deployment&lt;/a&gt; using the schema pattern and hardcoding the deployment details:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight highlight-source-haskell"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;--&lt;/span&gt; examples/deploymentSimple.dhall&lt;/span&gt;

&lt;span class="pl-k"&gt;let&lt;/span&gt; kubernetes &lt;span class="pl-k"&gt;=&lt;/span&gt;
      &lt;span class="pl-k"&gt;../&lt;/span&gt;package&lt;span class="pl-k"&gt;.&lt;/span&gt;dhall sha256&lt;span class="pl-k"&gt;:&lt;/span&gt;e9c55c7ff71f901314129e7ef100c3af5ec7a918dce25e06d83fa8c5472cb680

&lt;span class="pl-k"&gt;let&lt;/span&gt; deployment &lt;span class="pl-k"&gt;=&lt;/span&gt;
      kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;Deployment&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
      , metadata &lt;span class="pl-k"&gt;=&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;ObjectMeta&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{ &lt;span class="pl-smi"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; }
      , spec &lt;span class="pl-k"&gt;=&lt;/span&gt;
          &lt;span class="pl-ent"&gt;Some&lt;/span&gt;
            kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;DeploymentSpec&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
            , replicas &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;Some&lt;/span&gt; &lt;span class="pl-c1"&gt;2&lt;/span&gt;
            , template &lt;span class="pl-k"&gt;=&lt;/span&gt;
                kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;PodTemplateSpec&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
                , metadata &lt;span class="pl-k"&gt;=&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;ObjectMeta&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{ &lt;span class="pl-smi"&gt;name&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; }
                , spec &lt;span class="pl-k"&gt;=&lt;/span&gt;
                    &lt;span class="pl-ent"&gt;Some&lt;/span&gt;
                      kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;PodSpec&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
                      , containers &lt;span class="pl-k"&gt;=&lt;/span&gt;
                          [ kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;Container&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
                            , name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                            , image &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;Some&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx:1.15.3&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                            , ports &lt;span class="pl-k"&gt;=&lt;/span&gt;
                                [ kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;ContainerPort&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
                                  , containerPort &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;80&lt;/span&gt;
                                  }
                                ]
                            }
                          ]
                      }
                }
            }
      }

&lt;span class="pl-k"&gt;in&lt;/span&gt;  deployment
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;We then run this through &lt;code&gt;dhall-to-yaml&lt;/code&gt; to generate our Kubernetes definition:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;dhall-to-yaml --omit-empty &lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt; examples/deploymentSimple.dhall&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And we get:&lt;/p&gt;
&lt;div class="highlight highlight-source-yaml"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt;# examples/out/deploymentSimple.yaml&lt;/span&gt;

&lt;span class="pl-ent"&gt;apiVersion&lt;/span&gt;: &lt;span class="pl-s"&gt;apps/v1&lt;/span&gt;
&lt;span class="pl-ent"&gt;kind&lt;/span&gt;: &lt;span class="pl-s"&gt;Deployment&lt;/span&gt;
&lt;span class="pl-ent"&gt;metadata&lt;/span&gt;:
  &lt;span class="pl-ent"&gt;name&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx&lt;/span&gt;
&lt;span class="pl-ent"&gt;spec&lt;/span&gt;:
  &lt;span class="pl-ent"&gt;replicas&lt;/span&gt;: &lt;span class="pl-c1"&gt;2&lt;/span&gt;
  &lt;span class="pl-ent"&gt;template&lt;/span&gt;:
    &lt;span class="pl-ent"&gt;metadata&lt;/span&gt;:
      &lt;span class="pl-ent"&gt;name&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx&lt;/span&gt;
    &lt;span class="pl-ent"&gt;spec&lt;/span&gt;:
      &lt;span class="pl-ent"&gt;containers&lt;/span&gt;:
        - &lt;span class="pl-ent"&gt;image&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx:1.15.3&lt;/span&gt;
          &lt;span class="pl-ent"&gt;name&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx&lt;/span&gt;
          &lt;span class="pl-ent"&gt;ports&lt;/span&gt;:
            - &lt;span class="pl-ent"&gt;containerPort&lt;/span&gt;: &lt;span class="pl-c1"&gt;80&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-more-modular-defining-an-ingress" class="anchor" aria-hidden="true" href="#more-modular-defining-an-ingress"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;More modular: defining an Ingress&lt;/h2&gt;
&lt;p&gt;The above is cool, but hardcoding data is not that cool.&lt;/p&gt;
&lt;p&gt;So in a more realistic deployment you'll probably want to define:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;some &lt;code&gt;MyService&lt;/code&gt; type that contains the config settings relevant to your deployments&lt;/li&gt;
&lt;li&gt;some functions parametrized by this type, so that you can produce objects to send to k8s
by just applying these functions to &lt;code&gt;MyService&lt;/code&gt; objects&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This is useful because then you can define your &lt;code&gt;Service&lt;/code&gt;s separately from the Kubernetes logic,
and reuse those objects for configuring other things (e.g. configuring the services themselves,
templating documentation, configuring Terraform deployments, you name it).&lt;/p&gt;
&lt;p&gt;As an example of that, next we'll define an Ingress (an &lt;a href="https://github.com/kubernetes/ingress-nginx"&gt;Nginx Ingress&lt;/a&gt; in this case),
containing stuff like TLS certs and routes for every service - see the &lt;a href="./schemas/io.k8s.api.extensions.v1beta1.Ingress.dhall"&gt;schema&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Things to note in the following example:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;we define the &lt;code&gt;Service&lt;/code&gt; type inline in the file, but in your case you'll want to have a
separate &lt;code&gt;./Service.dhall&lt;/code&gt; file (so you can share around the project)&lt;/li&gt;
&lt;li&gt;we define functions to create the TLS definitions and the routes, so that we can &lt;code&gt;map&lt;/code&gt;
them over the list of services.&lt;/li&gt;
&lt;li&gt;we also defined the list of &lt;code&gt;services&lt;/code&gt; inline, but you should instead return the
&lt;code&gt;mkIngress&lt;/code&gt; function instead of applying it, so you can do something like
&lt;code&gt;dhall-to-yaml --omit-empty &amp;lt;&amp;lt;&amp;lt; "./mkIngress.dhall ./myServices.dhall"&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight highlight-source-haskell"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;--&lt;/span&gt; examples/ingress.dhall&lt;/span&gt;

&lt;span class="pl-k"&gt;let&lt;/span&gt; &lt;span class="pl-ent"&gt;Prelude&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt;
      &lt;span class="pl-k"&gt;../&lt;/span&gt;&lt;span class="pl-c1"&gt;Prelude.&lt;/span&gt;dhall sha256&lt;span class="pl-k"&gt;:&lt;/span&gt;&lt;span class="pl-c1"&gt;771&lt;/span&gt;c7131fc87e13eb18f770a27c59f9418879f7e230ba2a50e46f4461f43ec69

&lt;span class="pl-k"&gt;let&lt;/span&gt; &lt;span class="pl-c1"&gt;map&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;Prelude.List.&lt;/span&gt;&lt;span class="pl-c1"&gt;map&lt;/span&gt;

&lt;span class="pl-k"&gt;let&lt;/span&gt; kv &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-c1"&gt;Prelude.JSON.&lt;/span&gt;keyText

&lt;span class="pl-k"&gt;let&lt;/span&gt; kubernetes &lt;span class="pl-k"&gt;=&lt;/span&gt;
      &lt;span class="pl-k"&gt;../&lt;/span&gt;package&lt;span class="pl-k"&gt;.&lt;/span&gt;dhall sha256&lt;span class="pl-k"&gt;:&lt;/span&gt;e9c55c7ff71f901314129e7ef100c3af5ec7a918dce25e06d83fa8c5472cb680

&lt;span class="pl-k"&gt;let&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;=&lt;/span&gt; { name &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Text&lt;/span&gt;, host &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Text&lt;/span&gt;, version &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Text&lt;/span&gt; }

&lt;span class="pl-k"&gt;let&lt;/span&gt; services &lt;span class="pl-k"&gt;=&lt;/span&gt; [ { name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, host &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;foo.example.com&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;, version &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;2.3&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; } ]

&lt;span class="pl-k"&gt;let&lt;/span&gt; makeTLS
    &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;→&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;IngressTLS.&lt;/span&gt;Type&lt;/span&gt;
    &lt;span class="pl-k"&gt;=&lt;/span&gt;   λ(service &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt;)
      &lt;span class="pl-k"&gt;→&lt;/span&gt; { hosts &lt;span class="pl-k"&gt;=&lt;/span&gt; [ service&lt;span class="pl-k"&gt;.&lt;/span&gt;host ]
        , secretName &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;Some&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;${service.name}-certificate&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
        }

&lt;span class="pl-k"&gt;let&lt;/span&gt; makeRule
    &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;→&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;IngressRule.&lt;/span&gt;Type&lt;/span&gt;
    &lt;span class="pl-k"&gt;=&lt;/span&gt;   λ(service &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt;)
      &lt;span class="pl-k"&gt;→&lt;/span&gt; { host &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;Some&lt;/span&gt; service&lt;span class="pl-k"&gt;.&lt;/span&gt;host
        , http &lt;span class="pl-k"&gt;=&lt;/span&gt;
            &lt;span class="pl-ent"&gt;Some&lt;/span&gt;
              { paths &lt;span class="pl-k"&gt;=&lt;/span&gt;
                  [ { backend &lt;span class="pl-k"&gt;=&lt;/span&gt;
                        { serviceName &lt;span class="pl-k"&gt;=&lt;/span&gt; service&lt;span class="pl-k"&gt;.&lt;/span&gt;name
                        , servicePort &lt;span class="pl-k"&gt;=&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;IntOrString.&lt;/span&gt;Int&lt;/span&gt; &lt;span class="pl-c1"&gt;80&lt;/span&gt;
                        }
                    , path &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;None&lt;/span&gt; &lt;span class="pl-ent"&gt;Text&lt;/span&gt;
                    }
                  ]
              }
        }

&lt;span class="pl-k"&gt;let&lt;/span&gt; mkIngress
    &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;List&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;→&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;Ingress.&lt;/span&gt;Type&lt;/span&gt;
    &lt;span class="pl-k"&gt;=&lt;/span&gt;   λ(inputServices &lt;span class="pl-k"&gt;:&lt;/span&gt; &lt;span class="pl-ent"&gt;List&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt;)
      &lt;span class="pl-k"&gt;→&lt;/span&gt; &lt;span class="pl-k"&gt;let&lt;/span&gt; annotations &lt;span class="pl-k"&gt;=&lt;/span&gt;
              [ kv &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;kubernetes.io/ingress.class&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
              , kv &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;kubernetes.io/ingress.allow-http&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
              ]
        
        &lt;span class="pl-k"&gt;let&lt;/span&gt; defaultService &lt;span class="pl-k"&gt;=&lt;/span&gt;
              { name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;default&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
              , host &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;default.example.com&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
              , version &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt; 1.0&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
              }
        
        &lt;span class="pl-k"&gt;let&lt;/span&gt; ingressServices &lt;span class="pl-k"&gt;=&lt;/span&gt; inputServices &lt;span class="pl-k"&gt;#&lt;/span&gt; [ defaultService ]
        
        &lt;span class="pl-k"&gt;let&lt;/span&gt; spec &lt;span class="pl-k"&gt;=&lt;/span&gt;
              kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;IngressSpec&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
              , tls &lt;span class="pl-k"&gt;=&lt;/span&gt;
                  &lt;span class="pl-c1"&gt;map&lt;/span&gt; &lt;span class="pl-ent"&gt;Service&lt;/span&gt; kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;IngressTLS.&lt;/span&gt;Type&lt;/span&gt; makeTLS ingressServices
              , rules &lt;span class="pl-k"&gt;=&lt;/span&gt;
                  &lt;span class="pl-c1"&gt;map&lt;/span&gt;
                    &lt;span class="pl-ent"&gt;Service&lt;/span&gt;
                    kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;&lt;span class="pl-c1"&gt;IngressRule.&lt;/span&gt;Type&lt;/span&gt;
                    makeRule
                    ingressServices
              }
        
        &lt;span class="pl-k"&gt;in&lt;/span&gt;  kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;Ingress&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
            , metadata &lt;span class="pl-k"&gt;=&lt;/span&gt;
                kubernetes&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;ObjectMeta&lt;/span&gt;&lt;span class="pl-k"&gt;::&lt;/span&gt;{
                , name &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;nginx&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
                , annotations &lt;span class="pl-k"&gt;=&lt;/span&gt; annotations
                }
            , spec &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-ent"&gt;Some&lt;/span&gt; spec
            }

&lt;span class="pl-k"&gt;in&lt;/span&gt;  mkIngress services
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As before we get the yaml out by running:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;dhall-to-yaml --omit-empty &lt;span class="pl-k"&gt;&amp;lt;&lt;/span&gt; examples/ingress.dhall&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Result:&lt;/p&gt;
&lt;div class="highlight highlight-source-yaml"&gt;&lt;pre&gt;&lt;span class="pl-c"&gt;&lt;span class="pl-c"&gt;#&lt;/span&gt;# examples/out/ingress.yaml&lt;/span&gt;

&lt;span class="pl-ent"&gt;apiVersion&lt;/span&gt;: &lt;span class="pl-s"&gt;networking.k8s.io/v1beta1&lt;/span&gt;
&lt;span class="pl-ent"&gt;kind&lt;/span&gt;: &lt;span class="pl-s"&gt;Ingress&lt;/span&gt;
&lt;span class="pl-ent"&gt;metadata&lt;/span&gt;:
  &lt;span class="pl-ent"&gt;annotations&lt;/span&gt;:
    &lt;span class="pl-ent"&gt;kubernetes.io/ingress.allow-http&lt;/span&gt;: &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;false&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
    &lt;span class="pl-ent"&gt;kubernetes.io/ingress.class&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx&lt;/span&gt;
  &lt;span class="pl-ent"&gt;name&lt;/span&gt;: &lt;span class="pl-s"&gt;nginx&lt;/span&gt;
&lt;span class="pl-ent"&gt;spec&lt;/span&gt;:
  &lt;span class="pl-ent"&gt;rules&lt;/span&gt;:
    - &lt;span class="pl-ent"&gt;host&lt;/span&gt;: &lt;span class="pl-s"&gt;foo.example.com&lt;/span&gt;
      &lt;span class="pl-ent"&gt;http&lt;/span&gt;:
        &lt;span class="pl-ent"&gt;paths&lt;/span&gt;:
          - &lt;span class="pl-ent"&gt;backend&lt;/span&gt;:
              &lt;span class="pl-ent"&gt;serviceName&lt;/span&gt;: &lt;span class="pl-s"&gt;foo&lt;/span&gt;
              &lt;span class="pl-ent"&gt;servicePort&lt;/span&gt;: &lt;span class="pl-c1"&gt;80&lt;/span&gt;
    - &lt;span class="pl-ent"&gt;host&lt;/span&gt;: &lt;span class="pl-s"&gt;default.example.com&lt;/span&gt;
      &lt;span class="pl-ent"&gt;http&lt;/span&gt;:
        &lt;span class="pl-ent"&gt;paths&lt;/span&gt;:
          - &lt;span class="pl-ent"&gt;backend&lt;/span&gt;:
              &lt;span class="pl-ent"&gt;serviceName&lt;/span&gt;: &lt;span class="pl-s"&gt;default&lt;/span&gt;
              &lt;span class="pl-ent"&gt;servicePort&lt;/span&gt;: &lt;span class="pl-c1"&gt;80&lt;/span&gt;
  &lt;span class="pl-ent"&gt;tls&lt;/span&gt;:
    - &lt;span class="pl-ent"&gt;hosts&lt;/span&gt;:
        - &lt;span class="pl-s"&gt;foo.example.com&lt;/span&gt;
      &lt;span class="pl-ent"&gt;secretName&lt;/span&gt;: &lt;span class="pl-s"&gt;foo-certificate&lt;/span&gt;
    - &lt;span class="pl-ent"&gt;hosts&lt;/span&gt;:
        - &lt;span class="pl-s"&gt;default.example.com&lt;/span&gt;
      &lt;span class="pl-ent"&gt;secretName&lt;/span&gt;: &lt;span class="pl-s"&gt;default-certificate&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-faq" class="anchor" aria-hidden="true" href="#faq"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;FAQ&lt;/h2&gt;
&lt;h4&gt;&lt;a id="user-content-can-i-generate-a-yaml-file-with-many-objects-in-it" class="anchor" aria-hidden="true" href="#can-i-generate-a-yaml-file-with-many-objects-in-it"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Can I generate a YAML file with many objects in it?&lt;/h4&gt;
&lt;p&gt;It is usual for k8s YAML files to include multiple objects separated by &lt;code&gt;---&lt;/code&gt; ("documents" in YAML lingo),
so you might want to do it too.&lt;/p&gt;
&lt;p&gt;If the objects have the same type, this is very easy: you return a Dhall list containing the
objects, and use the &lt;code&gt;--documents&lt;/code&gt; flag, e.g.:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;dhall-to-yaml --documents --omit-empty &lt;span class="pl-k"&gt;&amp;lt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;let a = ./examples/deploymentSimple.dhall in [a, a]&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If the objects are of different type, it's not possible to have separate documents in the same YAML file.&lt;br&gt;
However, since &lt;a href="https://github.com/kubernetes/kubernetes/blob/master/hack/testdata/list.yaml"&gt;k8s has a builtin &lt;code&gt;List&lt;/code&gt; type for these cases&lt;/a&gt;,
it's possible to use it together with the &lt;a href="https://github.com/dhall-lang/dhall-kubernetes/blob/master/typesUnion.dhall"&gt;union type of all k8s types that we generate&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;So if we want to deploy e.g. a Deployment and a Service together, we can do:&lt;/p&gt;
&lt;div class="highlight highlight-source-haskell"&gt;&lt;pre&gt;&lt;span class="pl-k"&gt;let&lt;/span&gt; k8s &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-k"&gt;./&lt;/span&gt;typesUnion&lt;span class="pl-k"&gt;.&lt;/span&gt;dhall

&lt;span class="pl-k"&gt;in&lt;/span&gt; 
{ apiVersion &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;v1&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
, kind &lt;span class="pl-k"&gt;=&lt;/span&gt; &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;List&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;
, items &lt;span class="pl-k"&gt;=&lt;/span&gt; 
  [ k8s&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;Deployment&lt;/span&gt; &lt;span class="pl-k"&gt;./&lt;/span&gt;my&lt;span class="pl-k"&gt;-&lt;/span&gt;deployment&lt;span class="pl-k"&gt;.&lt;/span&gt;dhall
  , k8s&lt;span class="pl-k"&gt;.&lt;/span&gt;&lt;span class="pl-ent"&gt;Service&lt;/span&gt; &lt;span class="pl-k"&gt;./&lt;/span&gt;my&lt;span class="pl-k"&gt;-&lt;/span&gt;service&lt;span class="pl-k"&gt;.&lt;/span&gt;dhall
  ]
}&lt;/pre&gt;&lt;/div&gt;
&lt;h2&gt;&lt;a id="user-content-projects-using-dhall-kubernetes" class="anchor" aria-hidden="true" href="#projects-using-dhall-kubernetes"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Projects Using &lt;code&gt;dhall-kubernetes&lt;/code&gt;&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/coralogix/dhall-prometheus-operator"&gt;dhall-prometheus-operator&lt;/a&gt;: Provides types and default records for &lt;a href="https://github.com/coreos/prometheus-operator"&gt;Prometheus Operators&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;&lt;a id="user-content-development" class="anchor" aria-hidden="true" href="#development"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Development&lt;/h2&gt;
&lt;h3&gt;&lt;a id="user-content-adding-a-new-kubernetes-releases" class="anchor" aria-hidden="true" href="#adding-a-new-kubernetes-releases"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Adding a new Kubernetes releases&lt;/h3&gt;
&lt;p&gt;To add a new supported release, run:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;./scripts/add-kubernetes-release.sh &lt;span class="pl-s"&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;span class="pl-smi"&gt;${VERSION}&lt;/span&gt;&lt;span class="pl-pds"&gt;"&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to make a specific release the preferred release, run:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ echo "${VERSION}" &amp;gt; ./nix/preferred.txt
$ ./scripts/generate.sh
&lt;/code&gt;&lt;/pre&gt;
&lt;h3&gt;&lt;a id="user-content-tests" class="anchor" aria-hidden="true" href="#tests"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Tests&lt;/h3&gt;
&lt;p&gt;All tests are defined in &lt;code&gt;release.nix&lt;/code&gt;. We run these tests in CI in a &lt;a href="http://hydra.dhall-lang.org/project/dhall-kubernetes" rel="nofollow"&gt;Hydra
project&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can run the tests locally with the following command:&lt;/p&gt;
&lt;div class="highlight highlight-source-shell"&gt;&lt;pre&gt;nix build --file ./release.nix&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;&lt;a id="user-content-generating-types-default-and-readmemd" class="anchor" aria-hidden="true" href="#generating-types-default-and-readmemd"&gt;&lt;svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"&gt;&lt;path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"&gt;&lt;/path&gt;&lt;/svg&gt;&lt;/a&gt;Generating &lt;code&gt;types&lt;/code&gt; &lt;code&gt;default&lt;/code&gt; and &lt;code&gt;README.md&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;Running &lt;code&gt;scripts/generate.sh&lt;/code&gt; will generate all dhall files from the kubernetes
swagger specification, and copy them to &lt;code&gt;types&lt;/code&gt; and &lt;code&gt;default&lt;/code&gt;. It will also
generate &lt;code&gt;README.md&lt;/code&gt; from &lt;code&gt;docs/README.md.dhall&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you make changes to &lt;code&gt;scripts/convert.py&lt;/code&gt; or &lt;code&gt;docs/README.md.dhall&lt;/code&gt;, you need
to run this command afterwards.&lt;/p&gt;
&lt;/article&gt;&lt;/div&gt;</description><author>dhall-lang</author><guid isPermaLink="false">https://github.com/dhall-lang/dhall-kubernetes</guid><pubDate>Tue, 28 Jan 2020 00:02:00 GMT</pubDate></item></channel></rss>